var gS=Object.defineProperty;var xS=(e,t,n)=>t in e?gS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Xo=(e,t,n)=>(xS(e,typeof t!="symbol"?t+"":t,n),n);function yS(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var am=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function wS(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var xy={exports:{}},nu={},yy={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gs=Symbol.for("react.element"),bS=Symbol.for("react.portal"),kS=Symbol.for("react.fragment"),ES=Symbol.for("react.strict_mode"),SS=Symbol.for("react.profiler"),_S=Symbol.for("react.provider"),jS=Symbol.for("react.context"),CS=Symbol.for("react.forward_ref"),IS=Symbol.for("react.suspense"),AS=Symbol.for("react.memo"),NS=Symbol.for("react.lazy"),Hh=Symbol.iterator;function FS(e){return e===null||typeof e!="object"?null:(e=Hh&&e[Hh]||e["@@iterator"],typeof e=="function"?e:null)}var wy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},by=Object.assign,ky={};function Uo(e,t,n){this.props=e,this.context=t,this.refs=ky,this.updater=n||wy}Uo.prototype.isReactComponent={};Uo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Uo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ey(){}Ey.prototype=Uo.prototype;function sm(e,t,n){this.props=e,this.context=t,this.refs=ky,this.updater=n||wy}var lm=sm.prototype=new Ey;lm.constructor=sm;by(lm,Uo.prototype);lm.isPureReactComponent=!0;var Vh=Array.isArray,Sy=Object.prototype.hasOwnProperty,cm={current:null},_y={key:!0,ref:!0,__self:!0,__source:!0};function jy(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Sy.call(t,r)&&!_y.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:gs,type:e,key:o,ref:a,props:i,_owner:cm.current}}function TS(e,t){return{$$typeof:gs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function um(e){return typeof e=="object"&&e!==null&&e.$$typeof===gs}function RS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Kh=/\/+/g;function Gu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?RS(""+e.key):t.toString(36)}function wl(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case gs:case bS:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+Gu(a,0):r,Vh(i)?(n="",e!=null&&(n=e.replace(Kh,"$&/")+"/"),wl(i,t,n,"",function(u){return u})):i!=null&&(um(i)&&(i=TS(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Kh,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",Vh(e))for(var s=0;s<e.length;s++){o=e[s];var c=r+Gu(o,s);a+=wl(o,t,n,c,i)}else if(c=FS(e),typeof c=="function")for(e=c.call(e),s=0;!(o=e.next()).done;)o=o.value,c=r+Gu(o,s++),a+=wl(o,t,n,c,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ds(e,t,n){if(e==null)return e;var r=[],i=0;return wl(e,r,"","",function(o){return t.call(n,o,i++)}),r}function PS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ct={current:null},bl={transition:null},DS={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:bl,ReactCurrentOwner:cm};de.Children={map:Ds,forEach:function(e,t,n){Ds(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ds(e,function(){t++}),t},toArray:function(e){return Ds(e,function(t){return t})||[]},only:function(e){if(!um(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};de.Component=Uo;de.Fragment=kS;de.Profiler=SS;de.PureComponent=sm;de.StrictMode=ES;de.Suspense=IS;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DS;de.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=by({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=cm.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)Sy.call(t,c)&&!_y.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&s!==void 0?s[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){s=Array(c);for(var u=0;u<c;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:gs,type:e.type,key:i,ref:o,props:r,_owner:a}};de.createContext=function(e){return e={$$typeof:jS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_S,_context:e},e.Consumer=e};de.createElement=jy;de.createFactory=function(e){var t=jy.bind(null,e);return t.type=e,t};de.createRef=function(){return{current:null}};de.forwardRef=function(e){return{$$typeof:CS,render:e}};de.isValidElement=um;de.lazy=function(e){return{$$typeof:NS,_payload:{_status:-1,_result:e},_init:PS}};de.memo=function(e,t){return{$$typeof:AS,type:e,compare:t===void 0?null:t}};de.startTransition=function(e){var t=bl.transition;bl.transition={};try{e()}finally{bl.transition=t}};de.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};de.useCallback=function(e,t){return Ct.current.useCallback(e,t)};de.useContext=function(e){return Ct.current.useContext(e)};de.useDebugValue=function(){};de.useDeferredValue=function(e){return Ct.current.useDeferredValue(e)};de.useEffect=function(e,t){return Ct.current.useEffect(e,t)};de.useId=function(){return Ct.current.useId()};de.useImperativeHandle=function(e,t,n){return Ct.current.useImperativeHandle(e,t,n)};de.useInsertionEffect=function(e,t){return Ct.current.useInsertionEffect(e,t)};de.useLayoutEffect=function(e,t){return Ct.current.useLayoutEffect(e,t)};de.useMemo=function(e,t){return Ct.current.useMemo(e,t)};de.useReducer=function(e,t,n){return Ct.current.useReducer(e,t,n)};de.useRef=function(e){return Ct.current.useRef(e)};de.useState=function(e){return Ct.current.useState(e)};de.useSyncExternalStore=function(e,t,n){return Ct.current.useSyncExternalStore(e,t,n)};de.useTransition=function(){return Ct.current.useTransition()};de.version="18.2.0";yy.exports=de;var B=yy.exports;const F=tu(B),Cy=yS({__proto__:null,default:F},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS=B,OS=Symbol.for("react.element"),LS=Symbol.for("react.fragment"),BS=Object.prototype.hasOwnProperty,$S=MS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,US={key:!0,ref:!0,__self:!0,__source:!0};function Iy(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)BS.call(t,r)&&!US.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:OS,type:e,key:o,ref:a,props:i,_owner:$S.current}}nu.Fragment=LS;nu.jsx=Iy;nu.jsxs=Iy;xy.exports=nu;var l=xy.exports,kd={},Ay={exports:{}},Yt={},Ny={exports:{}},Fy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,U){var H=I.length;I.push(U);e:for(;0<H;){var q=H-1>>>1,Y=I[q];if(0<i(Y,U))I[q]=U,I[H]=Y,H=q;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var U=I[0],H=I.pop();if(H!==U){I[0]=H;e:for(var q=0,Y=I.length,ee=Y>>>1;q<ee;){var re=2*(q+1)-1,ae=I[re],pe=re+1,ge=I[pe];if(0>i(ae,H))pe<Y&&0>i(ge,ae)?(I[q]=ge,I[pe]=H,q=pe):(I[q]=ae,I[re]=H,q=re);else if(pe<Y&&0>i(ge,H))I[q]=ge,I[pe]=H,q=pe;else break e}}return U}function i(I,U){var H=I.sortIndex-U.sortIndex;return H!==0?H:I.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var c=[],u=[],f=1,d=null,p=3,h=!1,g=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(I){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=I)r(u),U.sortIndex=U.expirationTime,t(c,U);else break;U=n(u)}}function b(I){if(w=!1,E(I),!g)if(n(c)!==null)g=!0,V(S);else{var U=n(u);U!==null&&W(b,U.startTime-I)}}function S(I,U){g=!1,w&&(w=!1,y(C),C=-1),h=!0;var H=p;try{for(E(U),d=n(c);d!==null&&(!(d.expirationTime>U)||I&&!L());){var q=d.callback;if(typeof q=="function"){d.callback=null,p=d.priorityLevel;var Y=q(d.expirationTime<=U);U=e.unstable_now(),typeof Y=="function"?d.callback=Y:d===n(c)&&r(c),E(U)}else r(c);d=n(c)}if(d!==null)var ee=!0;else{var re=n(u);re!==null&&W(b,re.startTime-U),ee=!1}return ee}finally{d=null,p=H,h=!1}}var A=!1,R=null,C=-1,T=5,N=-1;function L(){return!(e.unstable_now()-N<T)}function $(){if(R!==null){var I=e.unstable_now();N=I;var U=!0;try{U=R(!0,I)}finally{U?O():(A=!1,R=null)}}else A=!1}var O;if(typeof x=="function")O=function(){x($)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,M=P.port2;P.port1.onmessage=$,O=function(){M.postMessage(null)}}else O=function(){_($,0)};function V(I){R=I,A||(A=!0,O())}function W(I,U){C=_(function(){I(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){g||h||(g=!0,V(S))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(I){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var H=p;p=U;try{return I()}finally{p=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,U){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var H=p;p=I;try{return U()}finally{p=H}},e.unstable_scheduleCallback=function(I,U,H){var q=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?q+H:q):H=q,I){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=H+Y,I={id:f++,callback:U,priorityLevel:I,startTime:H,expirationTime:Y,sortIndex:-1},H>q?(I.sortIndex=H,t(u,I),n(c)===null&&I===n(u)&&(w?(y(C),C=-1):w=!0,W(b,H-q))):(I.sortIndex=Y,t(c,I),g||h||(g=!0,V(S))),I},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(I){var U=p;return function(){var H=p;p=U;try{return I.apply(this,arguments)}finally{p=H}}}})(Fy);Ny.exports=Fy;var zS=Ny.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ty=B,Zt=zS;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ry=new Set,$a={};function Ni(e,t){yo(e,t),yo(e+"Capture",t)}function yo(e,t){for($a[e]=t,e=0;e<t.length;e++)Ry.add(t[e])}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ed=Object.prototype.hasOwnProperty,GS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zh={},qh={};function WS(e){return Ed.call(qh,e)?!0:Ed.call(Zh,e)?!1:GS.test(e)?qh[e]=!0:(Zh[e]=!0,!1)}function HS(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function VS(e,t,n,r){if(t===null||typeof t>"u"||HS(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function It(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new It(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new It(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new It(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new It(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new It(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new It(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new It(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new It(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new It(e,5,!1,e.toLowerCase(),null,!1,!1)});var fm=/[\-:]([a-z])/g;function dm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fm,dm);ut[t]=new It(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fm,dm);ut[t]=new It(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fm,dm);ut[t]=new It(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new It(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new It(e,1,!1,e.toLowerCase(),null,!0,!0)});function pm(e,t,n,r){var i=ut.hasOwnProperty(t)?ut[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(VS(t,n,i,r)&&(n=null),r||i===null?WS(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ar=Ty.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ms=Symbol.for("react.element"),Vi=Symbol.for("react.portal"),Ki=Symbol.for("react.fragment"),mm=Symbol.for("react.strict_mode"),Sd=Symbol.for("react.profiler"),Py=Symbol.for("react.provider"),Dy=Symbol.for("react.context"),hm=Symbol.for("react.forward_ref"),_d=Symbol.for("react.suspense"),jd=Symbol.for("react.suspense_list"),vm=Symbol.for("react.memo"),fr=Symbol.for("react.lazy"),My=Symbol.for("react.offscreen"),Yh=Symbol.iterator;function Qo(e){return e===null||typeof e!="object"?null:(e=Yh&&e[Yh]||e["@@iterator"],typeof e=="function"?e:null)}var Be=Object.assign,Wu;function da(e){if(Wu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wu=t&&t[1]||""}return`
`+Wu+e}var Hu=!1;function Vu(e,t){if(!e||Hu)return"";Hu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=s);break}}}finally{Hu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?da(e):""}function KS(e){switch(e.tag){case 5:return da(e.type);case 16:return da("Lazy");case 13:return da("Suspense");case 19:return da("SuspenseList");case 0:case 2:case 15:return e=Vu(e.type,!1),e;case 11:return e=Vu(e.type.render,!1),e;case 1:return e=Vu(e.type,!0),e;default:return""}}function Cd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ki:return"Fragment";case Vi:return"Portal";case Sd:return"Profiler";case mm:return"StrictMode";case _d:return"Suspense";case jd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dy:return(e.displayName||"Context")+".Consumer";case Py:return(e._context.displayName||"Context")+".Provider";case hm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vm:return t=e.displayName||null,t!==null?t:Cd(e.type)||"Memo";case fr:t=e._payload,e=e._init;try{return Cd(e(t))}catch{}}return null}function ZS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cd(t);case 8:return t===mm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Pr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Oy(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qS(e){var t=Oy(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Os(e){e._valueTracker||(e._valueTracker=qS(e))}function Ly(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Oy(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Wl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Id(e,t){var n=t.checked;return Be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Xh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Pr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function By(e,t){t=t.checked,t!=null&&pm(e,"checked",t,!1)}function Ad(e,t){By(e,t);var n=Pr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Nd(e,t.type,n):t.hasOwnProperty("defaultValue")&&Nd(e,t.type,Pr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Qh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Nd(e,t,n){(t!=="number"||Wl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pa=Array.isArray;function lo(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Pr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Fd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return Be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(X(92));if(pa(n)){if(1<n.length)throw Error(X(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Pr(n)}}function $y(e,t){var n=Pr(t.value),r=Pr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ev(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Uy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Td(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Uy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ls,zy=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ls=Ls||document.createElement("div"),Ls.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ls.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ua(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var wa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YS=["Webkit","ms","Moz","O"];Object.keys(wa).forEach(function(e){YS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wa[t]=wa[e]})});function Gy(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||wa.hasOwnProperty(e)&&wa[e]?(""+t).trim():t+"px"}function Wy(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Gy(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var XS=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rd(e,t){if(t){if(XS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function Pd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dd=null;function gm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Md=null,co=null,uo=null;function tv(e){if(e=ws(e)){if(typeof Md!="function")throw Error(X(280));var t=e.stateNode;t&&(t=su(t),Md(e.stateNode,e.type,t))}}function Hy(e){co?uo?uo.push(e):uo=[e]:co=e}function Vy(){if(co){var e=co,t=uo;if(uo=co=null,tv(e),t)for(e=0;e<t.length;e++)tv(t[e])}}function Ky(e,t){return e(t)}function Zy(){}var Ku=!1;function qy(e,t,n){if(Ku)return e(t,n);Ku=!0;try{return Ky(e,t,n)}finally{Ku=!1,(co!==null||uo!==null)&&(Zy(),Vy())}}function za(e,t){var n=e.stateNode;if(n===null)return null;var r=su(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(X(231,t,typeof n));return n}var Od=!1;if(Jn)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){Od=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{Od=!1}function QS(e,t,n,r,i,o,a,s,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var ba=!1,Hl=null,Vl=!1,Ld=null,JS={onError:function(e){ba=!0,Hl=e}};function e_(e,t,n,r,i,o,a,s,c){ba=!1,Hl=null,QS.apply(JS,arguments)}function t_(e,t,n,r,i,o,a,s,c){if(e_.apply(this,arguments),ba){if(ba){var u=Hl;ba=!1,Hl=null}else throw Error(X(198));Vl||(Vl=!0,Ld=u)}}function Fi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Yy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nv(e){if(Fi(e)!==e)throw Error(X(188))}function n_(e){var t=e.alternate;if(!t){if(t=Fi(e),t===null)throw Error(X(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return nv(i),e;if(o===r)return nv(i),t;o=o.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?e:t}function Xy(e){return e=n_(e),e!==null?Qy(e):null}function Qy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Qy(e);if(t!==null)return t;e=e.sibling}return null}var Jy=Zt.unstable_scheduleCallback,rv=Zt.unstable_cancelCallback,r_=Zt.unstable_shouldYield,i_=Zt.unstable_requestPaint,Ge=Zt.unstable_now,o_=Zt.unstable_getCurrentPriorityLevel,xm=Zt.unstable_ImmediatePriority,e1=Zt.unstable_UserBlockingPriority,Kl=Zt.unstable_NormalPriority,a_=Zt.unstable_LowPriority,t1=Zt.unstable_IdlePriority,ru=null,Pn=null;function s_(e){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(ru,e,void 0,(e.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:u_,l_=Math.log,c_=Math.LN2;function u_(e){return e>>>=0,e===0?32:31-(l_(e)/c_|0)|0}var Bs=64,$s=4194304;function ma(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=ma(s):(o&=a,o!==0&&(r=ma(o)))}else a=n&~i,a!==0?r=ma(a):o!==0&&(r=ma(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-wn(t),i=1<<n,r|=e[n],t&=~i;return r}function f_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d_(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-wn(o),s=1<<a,c=i[a];c===-1?(!(s&n)||s&r)&&(i[a]=f_(s,t)):c<=t&&(e.expiredLanes|=s),o&=~s}}function Bd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function n1(){var e=Bs;return Bs<<=1,!(Bs&4194240)&&(Bs=64),e}function Zu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wn(t),e[t]=n}function p_(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-wn(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function ym(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-wn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var we=0;function r1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var i1,wm,o1,a1,s1,$d=!1,Us=[],kr=null,Er=null,Sr=null,Ga=new Map,Wa=new Map,mr=[],m_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iv(e,t){switch(e){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":Ga.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wa.delete(t.pointerId)}}function ea(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=ws(t),t!==null&&wm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function h_(e,t,n,r,i){switch(t){case"focusin":return kr=ea(kr,e,t,n,r,i),!0;case"dragenter":return Er=ea(Er,e,t,n,r,i),!0;case"mouseover":return Sr=ea(Sr,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ga.set(o,ea(Ga.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Wa.set(o,ea(Wa.get(o)||null,e,t,n,r,i)),!0}return!1}function l1(e){var t=ni(e.target);if(t!==null){var n=Fi(t);if(n!==null){if(t=n.tag,t===13){if(t=Yy(n),t!==null){e.blockedOn=t,s1(e.priority,function(){o1(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ud(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Dd=r,n.target.dispatchEvent(r),Dd=null}else return t=ws(n),t!==null&&wm(t),e.blockedOn=n,!1;t.shift()}return!0}function ov(e,t,n){kl(e)&&n.delete(t)}function v_(){$d=!1,kr!==null&&kl(kr)&&(kr=null),Er!==null&&kl(Er)&&(Er=null),Sr!==null&&kl(Sr)&&(Sr=null),Ga.forEach(ov),Wa.forEach(ov)}function ta(e,t){e.blockedOn===t&&(e.blockedOn=null,$d||($d=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,v_)))}function Ha(e){function t(i){return ta(i,e)}if(0<Us.length){ta(Us[0],e);for(var n=1;n<Us.length;n++){var r=Us[n];r.blockedOn===e&&(r.blockedOn=null)}}for(kr!==null&&ta(kr,e),Er!==null&&ta(Er,e),Sr!==null&&ta(Sr,e),Ga.forEach(t),Wa.forEach(t),n=0;n<mr.length;n++)r=mr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<mr.length&&(n=mr[0],n.blockedOn===null);)l1(n),n.blockedOn===null&&mr.shift()}var fo=ar.ReactCurrentBatchConfig,ql=!0;function g_(e,t,n,r){var i=we,o=fo.transition;fo.transition=null;try{we=1,bm(e,t,n,r)}finally{we=i,fo.transition=o}}function x_(e,t,n,r){var i=we,o=fo.transition;fo.transition=null;try{we=4,bm(e,t,n,r)}finally{we=i,fo.transition=o}}function bm(e,t,n,r){if(ql){var i=Ud(e,t,n,r);if(i===null)of(e,t,r,Yl,n),iv(e,r);else if(h_(i,e,t,n,r))r.stopPropagation();else if(iv(e,r),t&4&&-1<m_.indexOf(e)){for(;i!==null;){var o=ws(i);if(o!==null&&i1(o),o=Ud(e,t,n,r),o===null&&of(e,t,r,Yl,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else of(e,t,r,null,n)}}var Yl=null;function Ud(e,t,n,r){if(Yl=null,e=gm(r),e=ni(e),e!==null)if(t=Fi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Yy(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yl=e,null}function c1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o_()){case xm:return 1;case e1:return 4;case Kl:case a_:return 16;case t1:return 536870912;default:return 16}default:return 16}}var xr=null,km=null,El=null;function u1(){if(El)return El;var e,t=km,n=t.length,r,i="value"in xr?xr.value:xr.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return El=i.slice(e,1<r?1-r:void 0)}function Sl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zs(){return!0}function av(){return!1}function Xt(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?zs:av,this.isPropagationStopped=av,this}return Be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){},isPersistent:zs}),t}var zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Em=Xt(zo),ys=Be({},zo,{view:0,detail:0}),y_=Xt(ys),qu,Yu,na,iu=Be({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==na&&(na&&e.type==="mousemove"?(qu=e.screenX-na.screenX,Yu=e.screenY-na.screenY):Yu=qu=0,na=e),qu)},movementY:function(e){return"movementY"in e?e.movementY:Yu}}),sv=Xt(iu),w_=Be({},iu,{dataTransfer:0}),b_=Xt(w_),k_=Be({},ys,{relatedTarget:0}),Xu=Xt(k_),E_=Be({},zo,{animationName:0,elapsedTime:0,pseudoElement:0}),S_=Xt(E_),__=Be({},zo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),j_=Xt(__),C_=Be({},zo,{data:0}),lv=Xt(C_),I_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=N_[e])?!!t[e]:!1}function Sm(){return F_}var T_=Be({},ys,{key:function(e){if(e.key){var t=I_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Sl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?A_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sm,charCode:function(e){return e.type==="keypress"?Sl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Sl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),R_=Xt(T_),P_=Be({},iu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cv=Xt(P_),D_=Be({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sm}),M_=Xt(D_),O_=Be({},zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),L_=Xt(O_),B_=Be({},iu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$_=Xt(B_),U_=[9,13,27,32],_m=Jn&&"CompositionEvent"in window,ka=null;Jn&&"documentMode"in document&&(ka=document.documentMode);var z_=Jn&&"TextEvent"in window&&!ka,f1=Jn&&(!_m||ka&&8<ka&&11>=ka),uv=" ",fv=!1;function d1(e,t){switch(e){case"keyup":return U_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zi=!1;function G_(e,t){switch(e){case"compositionend":return p1(t);case"keypress":return t.which!==32?null:(fv=!0,uv);case"textInput":return e=t.data,e===uv&&fv?null:e;default:return null}}function W_(e,t){if(Zi)return e==="compositionend"||!_m&&d1(e,t)?(e=u1(),El=km=xr=null,Zi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return f1&&t.locale!=="ko"?null:t.data;default:return null}}var H_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!H_[e.type]:t==="textarea"}function m1(e,t,n,r){Hy(r),t=Xl(t,"onChange"),0<t.length&&(n=new Em("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ea=null,Va=null;function V_(e){_1(e,0)}function ou(e){var t=Xi(e);if(Ly(t))return e}function K_(e,t){if(e==="change")return t}var h1=!1;if(Jn){var Qu;if(Jn){var Ju="oninput"in document;if(!Ju){var pv=document.createElement("div");pv.setAttribute("oninput","return;"),Ju=typeof pv.oninput=="function"}Qu=Ju}else Qu=!1;h1=Qu&&(!document.documentMode||9<document.documentMode)}function mv(){Ea&&(Ea.detachEvent("onpropertychange",v1),Va=Ea=null)}function v1(e){if(e.propertyName==="value"&&ou(Va)){var t=[];m1(t,Va,e,gm(e)),qy(V_,t)}}function Z_(e,t,n){e==="focusin"?(mv(),Ea=t,Va=n,Ea.attachEvent("onpropertychange",v1)):e==="focusout"&&mv()}function q_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ou(Va)}function Y_(e,t){if(e==="click")return ou(t)}function X_(e,t){if(e==="input"||e==="change")return ou(t)}function Q_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sn=typeof Object.is=="function"?Object.is:Q_;function Ka(e,t){if(Sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ed.call(t,i)||!Sn(e[i],t[i]))return!1}return!0}function hv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vv(e,t){var n=hv(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hv(n)}}function g1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?g1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function x1(){for(var e=window,t=Wl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wl(e.document)}return t}function jm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function J_(e){var t=x1(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&g1(n.ownerDocument.documentElement,n)){if(r!==null&&jm(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=vv(n,o);var a=vv(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var e2=Jn&&"documentMode"in document&&11>=document.documentMode,qi=null,zd=null,Sa=null,Gd=!1;function gv(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gd||qi==null||qi!==Wl(r)||(r=qi,"selectionStart"in r&&jm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sa&&Ka(Sa,r)||(Sa=r,r=Xl(zd,"onSelect"),0<r.length&&(t=new Em("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=qi)))}function Gs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yi={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionend:Gs("Transition","TransitionEnd")},ef={},y1={};Jn&&(y1=document.createElement("div").style,"AnimationEvent"in window||(delete Yi.animationend.animation,delete Yi.animationiteration.animation,delete Yi.animationstart.animation),"TransitionEvent"in window||delete Yi.transitionend.transition);function au(e){if(ef[e])return ef[e];if(!Yi[e])return e;var t=Yi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in y1)return ef[e]=t[n];return e}var w1=au("animationend"),b1=au("animationiteration"),k1=au("animationstart"),E1=au("transitionend"),S1=new Map,xv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(e,t){S1.set(e,t),Ni(t,[e])}for(var tf=0;tf<xv.length;tf++){var nf=xv[tf],t2=nf.toLowerCase(),n2=nf[0].toUpperCase()+nf.slice(1);Br(t2,"on"+n2)}Br(w1,"onAnimationEnd");Br(b1,"onAnimationIteration");Br(k1,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(E1,"onTransitionEnd");yo("onMouseEnter",["mouseout","mouseover"]);yo("onMouseLeave",["mouseout","mouseover"]);yo("onPointerEnter",["pointerout","pointerover"]);yo("onPointerLeave",["pointerout","pointerover"]);Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r2=new Set("cancel close invalid load scroll toggle".split(" ").concat(ha));function yv(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,t_(r,t,void 0,e),e.currentTarget=null}function _1(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;yv(i,s,u),o=c}else for(a=0;a<r.length;a++){if(s=r[a],c=s.instance,u=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;yv(i,s,u),o=c}}}if(Vl)throw e=Ld,Vl=!1,Ld=null,e}function Ce(e,t){var n=t[Zd];n===void 0&&(n=t[Zd]=new Set);var r=e+"__bubble";n.has(r)||(j1(t,e,2,!1),n.add(r))}function rf(e,t,n){var r=0;t&&(r|=4),j1(n,e,r,t)}var Ws="_reactListening"+Math.random().toString(36).slice(2);function Za(e){if(!e[Ws]){e[Ws]=!0,Ry.forEach(function(n){n!=="selectionchange"&&(r2.has(n)||rf(n,!1,e),rf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ws]||(t[Ws]=!0,rf("selectionchange",!1,t))}}function j1(e,t,n,r){switch(c1(t)){case 1:var i=g_;break;case 4:i=x_;break;default:i=bm}n=i.bind(null,t,n,e),i=void 0,!Od||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function of(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;s!==null;){if(a=ni(s),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}s=s.parentNode}}r=r.return}qy(function(){var u=o,f=gm(n),d=[];e:{var p=S1.get(e);if(p!==void 0){var h=Em,g=e;switch(e){case"keypress":if(Sl(n)===0)break e;case"keydown":case"keyup":h=R_;break;case"focusin":g="focus",h=Xu;break;case"focusout":g="blur",h=Xu;break;case"beforeblur":case"afterblur":h=Xu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=sv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=b_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=M_;break;case w1:case b1:case k1:h=S_;break;case E1:h=L_;break;case"scroll":h=y_;break;case"wheel":h=$_;break;case"copy":case"cut":case"paste":h=j_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=cv}var w=(t&4)!==0,_=!w&&e==="scroll",y=w?p!==null?p+"Capture":null:p;w=[];for(var x=u,E;x!==null;){E=x;var b=E.stateNode;if(E.tag===5&&b!==null&&(E=b,y!==null&&(b=za(x,y),b!=null&&w.push(qa(x,b,E)))),_)break;x=x.return}0<w.length&&(p=new h(p,g,null,n,f),d.push({event:p,listeners:w}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&n!==Dd&&(g=n.relatedTarget||n.fromElement)&&(ni(g)||g[er]))break e;if((h||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=u,g=g?ni(g):null,g!==null&&(_=Fi(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=u),h!==g)){if(w=sv,b="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(w=cv,b="onPointerLeave",y="onPointerEnter",x="pointer"),_=h==null?p:Xi(h),E=g==null?p:Xi(g),p=new w(b,x+"leave",h,n,f),p.target=_,p.relatedTarget=E,b=null,ni(f)===u&&(w=new w(y,x+"enter",g,n,f),w.target=E,w.relatedTarget=_,b=w),_=b,h&&g)t:{for(w=h,y=g,x=0,E=w;E;E=Di(E))x++;for(E=0,b=y;b;b=Di(b))E++;for(;0<x-E;)w=Di(w),x--;for(;0<E-x;)y=Di(y),E--;for(;x--;){if(w===y||y!==null&&w===y.alternate)break t;w=Di(w),y=Di(y)}w=null}else w=null;h!==null&&wv(d,p,h,w,!1),g!==null&&_!==null&&wv(d,_,g,w,!0)}}e:{if(p=u?Xi(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var S=K_;else if(dv(p))if(h1)S=X_;else{S=q_;var A=Z_}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=Y_);if(S&&(S=S(e,u))){m1(d,S,n,f);break e}A&&A(e,p,u),e==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&Nd(p,"number",p.value)}switch(A=u?Xi(u):window,e){case"focusin":(dv(A)||A.contentEditable==="true")&&(qi=A,zd=u,Sa=null);break;case"focusout":Sa=zd=qi=null;break;case"mousedown":Gd=!0;break;case"contextmenu":case"mouseup":case"dragend":Gd=!1,gv(d,n,f);break;case"selectionchange":if(e2)break;case"keydown":case"keyup":gv(d,n,f)}var R;if(_m)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Zi?d1(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(f1&&n.locale!=="ko"&&(Zi||C!=="onCompositionStart"?C==="onCompositionEnd"&&Zi&&(R=u1()):(xr=f,km="value"in xr?xr.value:xr.textContent,Zi=!0)),A=Xl(u,C),0<A.length&&(C=new lv(C,e,null,n,f),d.push({event:C,listeners:A}),R?C.data=R:(R=p1(n),R!==null&&(C.data=R)))),(R=z_?G_(e,n):W_(e,n))&&(u=Xl(u,"onBeforeInput"),0<u.length&&(f=new lv("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=R))}_1(d,t)})}function qa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xl(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=za(e,n),o!=null&&r.unshift(qa(e,o,i)),o=za(e,t),o!=null&&r.push(qa(e,o,i))),e=e.return}return r}function Di(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wv(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var s=n,c=s.alternate,u=s.stateNode;if(c!==null&&c===r)break;s.tag===5&&u!==null&&(s=u,i?(c=za(n,o),c!=null&&a.unshift(qa(n,c,s))):i||(c=za(n,o),c!=null&&a.push(qa(n,c,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var i2=/\r\n?/g,o2=/\u0000|\uFFFD/g;function bv(e){return(typeof e=="string"?e:""+e).replace(i2,`
`).replace(o2,"")}function Hs(e,t,n){if(t=bv(t),bv(e)!==t&&n)throw Error(X(425))}function Ql(){}var Wd=null,Hd=null;function Vd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Kd=typeof setTimeout=="function"?setTimeout:void 0,a2=typeof clearTimeout=="function"?clearTimeout:void 0,kv=typeof Promise=="function"?Promise:void 0,s2=typeof queueMicrotask=="function"?queueMicrotask:typeof kv<"u"?function(e){return kv.resolve(null).then(e).catch(l2)}:Kd;function l2(e){setTimeout(function(){throw e})}function af(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ha(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ha(t)}function _r(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ev(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Go=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Go,Ya="__reactProps$"+Go,er="__reactContainer$"+Go,Zd="__reactEvents$"+Go,c2="__reactListeners$"+Go,u2="__reactHandles$"+Go;function ni(e){var t=e[Nn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[er]||n[Nn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ev(e);e!==null;){if(n=e[Nn])return n;e=Ev(e)}return t}e=n,n=e.parentNode}return null}function ws(e){return e=e[Nn]||e[er],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function su(e){return e[Ya]||null}var qd=[],Qi=-1;function $r(e){return{current:e}}function Ie(e){0>Qi||(e.current=qd[Qi],qd[Qi]=null,Qi--)}function je(e,t){Qi++,qd[Qi]=e.current,e.current=t}var Dr={},vt=$r(Dr),Pt=$r(!1),gi=Dr;function wo(e,t){var n=e.type.contextTypes;if(!n)return Dr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Dt(e){return e=e.childContextTypes,e!=null}function Jl(){Ie(Pt),Ie(vt)}function Sv(e,t,n){if(vt.current!==Dr)throw Error(X(168));je(vt,t),je(Pt,n)}function C1(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(X(108,ZS(e)||"Unknown",i));return Be({},n,r)}function ec(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dr,gi=vt.current,je(vt,e),je(Pt,Pt.current),!0}function _v(e,t,n){var r=e.stateNode;if(!r)throw Error(X(169));n?(e=C1(e,t,gi),r.__reactInternalMemoizedMergedChildContext=e,Ie(Pt),Ie(vt),je(vt,e)):Ie(Pt),je(Pt,n)}var Hn=null,lu=!1,sf=!1;function I1(e){Hn===null?Hn=[e]:Hn.push(e)}function f2(e){lu=!0,I1(e)}function Ur(){if(!sf&&Hn!==null){sf=!0;var e=0,t=we;try{var n=Hn;for(we=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Hn=null,lu=!1}catch(i){throw Hn!==null&&(Hn=Hn.slice(e+1)),Jy(xm,Ur),i}finally{we=t,sf=!1}}return null}var Ji=[],eo=0,tc=null,nc=0,nn=[],rn=0,xi=null,Zn=1,qn="";function Yr(e,t){Ji[eo++]=nc,Ji[eo++]=tc,tc=e,nc=t}function A1(e,t,n){nn[rn++]=Zn,nn[rn++]=qn,nn[rn++]=xi,xi=e;var r=Zn;e=qn;var i=32-wn(r)-1;r&=~(1<<i),n+=1;var o=32-wn(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Zn=1<<32-wn(t)+i|n<<i|r,qn=o+e}else Zn=1<<o|n<<i|r,qn=e}function Cm(e){e.return!==null&&(Yr(e,1),A1(e,1,0))}function Im(e){for(;e===tc;)tc=Ji[--eo],Ji[eo]=null,nc=Ji[--eo],Ji[eo]=null;for(;e===xi;)xi=nn[--rn],nn[rn]=null,qn=nn[--rn],nn[rn]=null,Zn=nn[--rn],nn[rn]=null}var Ht=null,Gt=null,Re=!1,xn=null;function N1(e,t){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function jv(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ht=e,Gt=_r(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ht=e,Gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=xi!==null?{id:Zn,overflow:qn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ht=e,Gt=null,!0):!1;default:return!1}}function Yd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xd(e){if(Re){var t=Gt;if(t){var n=t;if(!jv(e,t)){if(Yd(e))throw Error(X(418));t=_r(n.nextSibling);var r=Ht;t&&jv(e,t)?N1(r,n):(e.flags=e.flags&-4097|2,Re=!1,Ht=e)}}else{if(Yd(e))throw Error(X(418));e.flags=e.flags&-4097|2,Re=!1,Ht=e}}}function Cv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ht=e}function Vs(e){if(e!==Ht)return!1;if(!Re)return Cv(e),Re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Vd(e.type,e.memoizedProps)),t&&(t=Gt)){if(Yd(e))throw F1(),Error(X(418));for(;t;)N1(e,t),t=_r(t.nextSibling)}if(Cv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Gt=_r(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Gt=null}}else Gt=Ht?_r(e.stateNode.nextSibling):null;return!0}function F1(){for(var e=Gt;e;)e=_r(e.nextSibling)}function bo(){Gt=Ht=null,Re=!1}function Am(e){xn===null?xn=[e]:xn.push(e)}var d2=ar.ReactCurrentBatchConfig;function vn(e,t){if(e&&e.defaultProps){t=Be({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var rc=$r(null),ic=null,to=null,Nm=null;function Fm(){Nm=to=ic=null}function Tm(e){var t=rc.current;Ie(rc),e._currentValue=t}function Qd(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function po(e,t){ic=e,Nm=to=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function un(e){var t=e._currentValue;if(Nm!==e)if(e={context:e,memoizedValue:t,next:null},to===null){if(ic===null)throw Error(X(308));to=e,ic.dependencies={lanes:0,firstContext:e}}else to=to.next=e;return t}var ri=null;function Rm(e){ri===null?ri=[e]:ri.push(e)}function T1(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Rm(t)):(n.next=i.next,i.next=n),t.interleaved=n,tr(e,r)}function tr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var dr=!1;function Pm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function R1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,tr(e,n)}return i=r.interleaved,i===null?(t.next=t,Rm(r)):(t.next=i.next,i.next=t),r.interleaved=t,tr(e,n)}function _l(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ym(e,n)}}function Iv(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function oc(e,t,n,r){var i=e.updateQueue;dr=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==a&&(s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=c))}if(o!==null){var d=i.baseState;a=0,f=u=c=null,s=o;do{var p=s.lane,h=s.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=e,w=s;switch(p=t,h=n,w.tag){case 1:if(g=w.payload,typeof g=="function"){d=g.call(h,d,p);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,p=typeof g=="function"?g.call(h,d,p):g,p==null)break e;d=Be({},d,p);break e;case 2:dr=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[s]:p.push(s))}else h={eventTime:h,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(u=f=h,c=d):f=f.next=h,a|=p;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(f===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);wi|=a,e.lanes=a,e.memoizedState=d}}function Av(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var P1=new Ty.Component().refs;function Jd(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Be({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var cu={isMounted:function(e){return(e=e._reactInternals)?Fi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=St(),i=Ir(e),o=Xn(r,i);o.payload=t,n!=null&&(o.callback=n),t=jr(e,o,i),t!==null&&(bn(t,e,i,r),_l(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=St(),i=Ir(e),o=Xn(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=jr(e,o,i),t!==null&&(bn(t,e,i,r),_l(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=St(),r=Ir(e),i=Xn(n,r);i.tag=2,t!=null&&(i.callback=t),t=jr(e,i,r),t!==null&&(bn(t,e,r,n),_l(t,e,r))}};function Nv(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Ka(n,r)||!Ka(i,o):!0}function D1(e,t,n){var r=!1,i=Dr,o=t.contextType;return typeof o=="object"&&o!==null?o=un(o):(i=Dt(t)?gi:vt.current,r=t.contextTypes,o=(r=r!=null)?wo(e,i):Dr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Fv(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&cu.enqueueReplaceState(t,t.state,null)}function ep(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=P1,Pm(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=un(o):(o=Dt(t)?gi:vt.current,i.context=wo(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Jd(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&cu.enqueueReplaceState(i,i.state,null),oc(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ra(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;s===P1&&(s=i.refs={}),a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,e))}return e}function Ks(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Tv(e){var t=e._init;return t(e._payload)}function M1(e){function t(y,x){if(e){var E=y.deletions;E===null?(y.deletions=[x],y.flags|=16):E.push(x)}}function n(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=Ar(y,x),y.index=0,y.sibling=null,y}function o(y,x,E){return y.index=E,e?(E=y.alternate,E!==null?(E=E.index,E<x?(y.flags|=2,x):E):(y.flags|=2,x)):(y.flags|=1048576,x)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function s(y,x,E,b){return x===null||x.tag!==6?(x=mf(E,y.mode,b),x.return=y,x):(x=i(x,E),x.return=y,x)}function c(y,x,E,b){var S=E.type;return S===Ki?f(y,x,E.props.children,b,E.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===fr&&Tv(S)===x.type)?(b=i(x,E.props),b.ref=ra(y,x,E),b.return=y,b):(b=Fl(E.type,E.key,E.props,null,y.mode,b),b.ref=ra(y,x,E),b.return=y,b)}function u(y,x,E,b){return x===null||x.tag!==4||x.stateNode.containerInfo!==E.containerInfo||x.stateNode.implementation!==E.implementation?(x=hf(E,y.mode,b),x.return=y,x):(x=i(x,E.children||[]),x.return=y,x)}function f(y,x,E,b,S){return x===null||x.tag!==7?(x=ci(E,y.mode,b,S),x.return=y,x):(x=i(x,E),x.return=y,x)}function d(y,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return x=mf(""+x,y.mode,E),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ms:return E=Fl(x.type,x.key,x.props,null,y.mode,E),E.ref=ra(y,null,x),E.return=y,E;case Vi:return x=hf(x,y.mode,E),x.return=y,x;case fr:var b=x._init;return d(y,b(x._payload),E)}if(pa(x)||Qo(x))return x=ci(x,y.mode,E,null),x.return=y,x;Ks(y,x)}return null}function p(y,x,E,b){var S=x!==null?x.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return S!==null?null:s(y,x,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ms:return E.key===S?c(y,x,E,b):null;case Vi:return E.key===S?u(y,x,E,b):null;case fr:return S=E._init,p(y,x,S(E._payload),b)}if(pa(E)||Qo(E))return S!==null?null:f(y,x,E,b,null);Ks(y,E)}return null}function h(y,x,E,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(E)||null,s(x,y,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ms:return y=y.get(b.key===null?E:b.key)||null,c(x,y,b,S);case Vi:return y=y.get(b.key===null?E:b.key)||null,u(x,y,b,S);case fr:var A=b._init;return h(y,x,E,A(b._payload),S)}if(pa(b)||Qo(b))return y=y.get(E)||null,f(x,y,b,S,null);Ks(x,b)}return null}function g(y,x,E,b){for(var S=null,A=null,R=x,C=x=0,T=null;R!==null&&C<E.length;C++){R.index>C?(T=R,R=null):T=R.sibling;var N=p(y,R,E[C],b);if(N===null){R===null&&(R=T);break}e&&R&&N.alternate===null&&t(y,R),x=o(N,x,C),A===null?S=N:A.sibling=N,A=N,R=T}if(C===E.length)return n(y,R),Re&&Yr(y,C),S;if(R===null){for(;C<E.length;C++)R=d(y,E[C],b),R!==null&&(x=o(R,x,C),A===null?S=R:A.sibling=R,A=R);return Re&&Yr(y,C),S}for(R=r(y,R);C<E.length;C++)T=h(R,y,C,E[C],b),T!==null&&(e&&T.alternate!==null&&R.delete(T.key===null?C:T.key),x=o(T,x,C),A===null?S=T:A.sibling=T,A=T);return e&&R.forEach(function(L){return t(y,L)}),Re&&Yr(y,C),S}function w(y,x,E,b){var S=Qo(E);if(typeof S!="function")throw Error(X(150));if(E=S.call(E),E==null)throw Error(X(151));for(var A=S=null,R=x,C=x=0,T=null,N=E.next();R!==null&&!N.done;C++,N=E.next()){R.index>C?(T=R,R=null):T=R.sibling;var L=p(y,R,N.value,b);if(L===null){R===null&&(R=T);break}e&&R&&L.alternate===null&&t(y,R),x=o(L,x,C),A===null?S=L:A.sibling=L,A=L,R=T}if(N.done)return n(y,R),Re&&Yr(y,C),S;if(R===null){for(;!N.done;C++,N=E.next())N=d(y,N.value,b),N!==null&&(x=o(N,x,C),A===null?S=N:A.sibling=N,A=N);return Re&&Yr(y,C),S}for(R=r(y,R);!N.done;C++,N=E.next())N=h(R,y,C,N.value,b),N!==null&&(e&&N.alternate!==null&&R.delete(N.key===null?C:N.key),x=o(N,x,C),A===null?S=N:A.sibling=N,A=N);return e&&R.forEach(function($){return t(y,$)}),Re&&Yr(y,C),S}function _(y,x,E,b){if(typeof E=="object"&&E!==null&&E.type===Ki&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ms:e:{for(var S=E.key,A=x;A!==null;){if(A.key===S){if(S=E.type,S===Ki){if(A.tag===7){n(y,A.sibling),x=i(A,E.props.children),x.return=y,y=x;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===fr&&Tv(S)===A.type){n(y,A.sibling),x=i(A,E.props),x.ref=ra(y,A,E),x.return=y,y=x;break e}n(y,A);break}else t(y,A);A=A.sibling}E.type===Ki?(x=ci(E.props.children,y.mode,b,E.key),x.return=y,y=x):(b=Fl(E.type,E.key,E.props,null,y.mode,b),b.ref=ra(y,x,E),b.return=y,y=b)}return a(y);case Vi:e:{for(A=E.key;x!==null;){if(x.key===A)if(x.tag===4&&x.stateNode.containerInfo===E.containerInfo&&x.stateNode.implementation===E.implementation){n(y,x.sibling),x=i(x,E.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else t(y,x);x=x.sibling}x=hf(E,y.mode,b),x.return=y,y=x}return a(y);case fr:return A=E._init,_(y,x,A(E._payload),b)}if(pa(E))return g(y,x,E,b);if(Qo(E))return w(y,x,E,b);Ks(y,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,x!==null&&x.tag===6?(n(y,x.sibling),x=i(x,E),x.return=y,y=x):(n(y,x),x=mf(E,y.mode,b),x.return=y,y=x),a(y)):n(y,x)}return _}var ko=M1(!0),O1=M1(!1),bs={},Dn=$r(bs),Xa=$r(bs),Qa=$r(bs);function ii(e){if(e===bs)throw Error(X(174));return e}function Dm(e,t){switch(je(Qa,t),je(Xa,e),je(Dn,bs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Td(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Td(t,e)}Ie(Dn),je(Dn,t)}function Eo(){Ie(Dn),Ie(Xa),Ie(Qa)}function L1(e){ii(Qa.current);var t=ii(Dn.current),n=Td(t,e.type);t!==n&&(je(Xa,e),je(Dn,n))}function Mm(e){Xa.current===e&&(Ie(Dn),Ie(Xa))}var Me=$r(0);function ac(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lf=[];function Om(){for(var e=0;e<lf.length;e++)lf[e]._workInProgressVersionPrimary=null;lf.length=0}var jl=ar.ReactCurrentDispatcher,cf=ar.ReactCurrentBatchConfig,yi=0,Le=null,Ve=null,tt=null,sc=!1,_a=!1,Ja=0,p2=0;function ft(){throw Error(X(321))}function Lm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Sn(e[n],t[n]))return!1;return!0}function Bm(e,t,n,r,i,o){if(yi=o,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,jl.current=e===null||e.memoizedState===null?g2:x2,e=n(r,i),_a){o=0;do{if(_a=!1,Ja=0,25<=o)throw Error(X(301));o+=1,tt=Ve=null,t.updateQueue=null,jl.current=y2,e=n(r,i)}while(_a)}if(jl.current=lc,t=Ve!==null&&Ve.next!==null,yi=0,tt=Ve=Le=null,sc=!1,t)throw Error(X(300));return e}function $m(){var e=Ja!==0;return Ja=0,e}function In(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Le.memoizedState=tt=e:tt=tt.next=e,tt}function fn(){if(Ve===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=tt===null?Le.memoizedState:tt.next;if(t!==null)tt=t,Ve=e;else{if(e===null)throw Error(X(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},tt===null?Le.memoizedState=tt=e:tt=tt.next=e}return tt}function es(e,t){return typeof t=="function"?t(e):t}function uf(e){var t=fn(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=Ve,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,c=null,u=o;do{var f=u.lane;if((yi&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(s=c=d,a=r):c=c.next=d,Le.lanes|=f,wi|=f}u=u.next}while(u!==null&&u!==o);c===null?a=r:c.next=s,Sn(r,t.memoizedState)||(Tt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Le.lanes|=o,wi|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ff(e){var t=fn(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);Sn(o,t.memoizedState)||(Tt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function B1(){}function $1(e,t){var n=Le,r=fn(),i=t(),o=!Sn(r.memoizedState,i);if(o&&(r.memoizedState=i,Tt=!0),r=r.queue,Um(G1.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,ts(9,z1.bind(null,n,r,i,t),void 0,null),nt===null)throw Error(X(349));yi&30||U1(n,t,i)}return i}function U1(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function z1(e,t,n,r){t.value=n,t.getSnapshot=r,W1(t)&&H1(e)}function G1(e,t,n){return n(function(){W1(t)&&H1(e)})}function W1(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Sn(e,n)}catch{return!0}}function H1(e){var t=tr(e,1);t!==null&&bn(t,e,1,-1)}function Rv(e){var t=In();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:e},t.queue=e,e=e.dispatch=v2.bind(null,Le,e),[t.memoizedState,e]}function ts(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function V1(){return fn().memoizedState}function Cl(e,t,n,r){var i=In();Le.flags|=e,i.memoizedState=ts(1|t,n,void 0,r===void 0?null:r)}function uu(e,t,n,r){var i=fn();r=r===void 0?null:r;var o=void 0;if(Ve!==null){var a=Ve.memoizedState;if(o=a.destroy,r!==null&&Lm(r,a.deps)){i.memoizedState=ts(t,n,o,r);return}}Le.flags|=e,i.memoizedState=ts(1|t,n,o,r)}function Pv(e,t){return Cl(8390656,8,e,t)}function Um(e,t){return uu(2048,8,e,t)}function K1(e,t){return uu(4,2,e,t)}function Z1(e,t){return uu(4,4,e,t)}function q1(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Y1(e,t,n){return n=n!=null?n.concat([e]):null,uu(4,4,q1.bind(null,t,e),n)}function zm(){}function X1(e,t){var n=fn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Lm(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Q1(e,t){var n=fn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Lm(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function J1(e,t,n){return yi&21?(Sn(n,t)||(n=n1(),Le.lanes|=n,wi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=n)}function m2(e,t){var n=we;we=n!==0&&4>n?n:4,e(!0);var r=cf.transition;cf.transition={};try{e(!1),t()}finally{we=n,cf.transition=r}}function ew(){return fn().memoizedState}function h2(e,t,n){var r=Ir(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tw(e))nw(t,n);else if(n=T1(e,t,n,r),n!==null){var i=St();bn(n,e,r,i),rw(n,t,r)}}function v2(e,t,n){var r=Ir(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tw(e))nw(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Sn(s,a)){var c=t.interleaved;c===null?(i.next=i,Rm(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=T1(e,t,i,r),n!==null&&(i=St(),bn(n,e,r,i),rw(n,t,r))}}function tw(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function nw(e,t){_a=sc=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function rw(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ym(e,n)}}var lc={readContext:un,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},g2={readContext:un,useCallback:function(e,t){return In().memoizedState=[e,t===void 0?null:t],e},useContext:un,useEffect:Pv,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Cl(4194308,4,q1.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Cl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Cl(4,2,e,t)},useMemo:function(e,t){var n=In();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=In();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=h2.bind(null,Le,e),[r.memoizedState,e]},useRef:function(e){var t=In();return e={current:e},t.memoizedState=e},useState:Rv,useDebugValue:zm,useDeferredValue:function(e){return In().memoizedState=e},useTransition:function(){var e=Rv(!1),t=e[0];return e=m2.bind(null,e[1]),In().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Le,i=In();if(Re){if(n===void 0)throw Error(X(407));n=n()}else{if(n=t(),nt===null)throw Error(X(349));yi&30||U1(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Pv(G1.bind(null,r,o,e),[e]),r.flags|=2048,ts(9,z1.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=In(),t=nt.identifierPrefix;if(Re){var n=qn,r=Zn;n=(r&~(1<<32-wn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ja++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=p2++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},x2={readContext:un,useCallback:X1,useContext:un,useEffect:Um,useImperativeHandle:Y1,useInsertionEffect:K1,useLayoutEffect:Z1,useMemo:Q1,useReducer:uf,useRef:V1,useState:function(){return uf(es)},useDebugValue:zm,useDeferredValue:function(e){var t=fn();return J1(t,Ve.memoizedState,e)},useTransition:function(){var e=uf(es)[0],t=fn().memoizedState;return[e,t]},useMutableSource:B1,useSyncExternalStore:$1,useId:ew,unstable_isNewReconciler:!1},y2={readContext:un,useCallback:X1,useContext:un,useEffect:Um,useImperativeHandle:Y1,useInsertionEffect:K1,useLayoutEffect:Z1,useMemo:Q1,useReducer:ff,useRef:V1,useState:function(){return ff(es)},useDebugValue:zm,useDeferredValue:function(e){var t=fn();return Ve===null?t.memoizedState=e:J1(t,Ve.memoizedState,e)},useTransition:function(){var e=ff(es)[0],t=fn().memoizedState;return[e,t]},useMutableSource:B1,useSyncExternalStore:$1,useId:ew,unstable_isNewReconciler:!1};function So(e,t){try{var n="",r=t;do n+=KS(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function df(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function tp(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var w2=typeof WeakMap=="function"?WeakMap:Map;function iw(e,t,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){uc||(uc=!0,fp=r),tp(e,t)},n}function ow(e,t,n){n=Xn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){tp(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){tp(e,t),typeof r!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Dv(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new w2;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=P2.bind(null,e,t,n),t.then(e,e))}function Mv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ov(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Xn(-1,1),t.tag=2,jr(n,t,1))),n.lanes|=1),e)}var b2=ar.ReactCurrentOwner,Tt=!1;function bt(e,t,n,r){t.child=e===null?O1(t,null,n,r):ko(t,e.child,n,r)}function Lv(e,t,n,r,i){n=n.render;var o=t.ref;return po(t,i),r=Bm(e,t,n,r,o,i),n=$m(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nr(e,t,i)):(Re&&n&&Cm(t),t.flags|=1,bt(e,t,r,i),t.child)}function Bv(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Ym(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,aw(e,t,o,r,i)):(e=Fl(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ka,n(a,r)&&e.ref===t.ref)return nr(e,t,i)}return t.flags|=1,e=Ar(o,r),e.ref=t.ref,e.return=t,t.child=e}function aw(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Ka(o,r)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,nr(e,t,i)}return np(e,t,n,r,i)}function sw(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(ro,Ut),Ut|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,je(ro,Ut),Ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,je(ro,Ut),Ut|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,je(ro,Ut),Ut|=r;return bt(e,t,i,n),t.child}function lw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function np(e,t,n,r,i){var o=Dt(n)?gi:vt.current;return o=wo(t,o),po(t,i),n=Bm(e,t,n,r,o,i),r=$m(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nr(e,t,i)):(Re&&r&&Cm(t),t.flags|=1,bt(e,t,n,i),t.child)}function $v(e,t,n,r,i){if(Dt(n)){var o=!0;ec(t)}else o=!1;if(po(t,i),t.stateNode===null)Il(e,t),D1(t,n,r),ep(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=un(u):(u=Dt(n)?gi:vt.current,u=wo(t,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||c!==u)&&Fv(t,a,r,u),dr=!1;var p=t.memoizedState;a.state=p,oc(t,r,a,i),c=t.memoizedState,s!==r||p!==c||Pt.current||dr?(typeof f=="function"&&(Jd(t,n,f,r),c=t.memoizedState),(s=dr||Nv(t,n,s,r,p,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,R1(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:vn(t.type,s),a.props=u,d=t.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=un(c):(c=Dt(n)?gi:vt.current,c=wo(t,c));var h=n.getDerivedStateFromProps;(f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||p!==c)&&Fv(t,a,r,c),dr=!1,p=t.memoizedState,a.state=p,oc(t,r,a,i);var g=t.memoizedState;s!==d||p!==g||Pt.current||dr?(typeof h=="function"&&(Jd(t,n,h,r),g=t.memoizedState),(u=dr||Nv(t,n,u,r,p,g,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return rp(e,t,n,r,o,i)}function rp(e,t,n,r,i,o){lw(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&_v(t,n,!1),nr(e,t,o);r=t.stateNode,b2.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ko(t,e.child,null,o),t.child=ko(t,null,s,o)):bt(e,t,s,o),t.memoizedState=r.state,i&&_v(t,n,!0),t.child}function cw(e){var t=e.stateNode;t.pendingContext?Sv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sv(e,t.context,!1),Dm(e,t.containerInfo)}function Uv(e,t,n,r,i){return bo(),Am(i),t.flags|=256,bt(e,t,n,r),t.child}var ip={dehydrated:null,treeContext:null,retryLane:0};function op(e){return{baseLanes:e,cachePool:null,transitions:null}}function uw(e,t,n){var r=t.pendingProps,i=Me.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),je(Me,i&1),e===null)return Xd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=pu(a,r,0,null),e=ci(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=op(n),t.memoizedState=ip,e):Gm(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return k2(e,t,a,r,s,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,s=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ar(i,c),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Ar(s,o):(o=ci(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?op(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=ip,r}return o=e.child,e=o.sibling,r=Ar(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Gm(e,t){return t=pu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zs(e,t,n,r){return r!==null&&Am(r),ko(t,e.child,null,n),e=Gm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function k2(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=df(Error(X(422))),Zs(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=pu({mode:"visible",children:r.children},i,0,null),o=ci(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&ko(t,e.child,null,a),t.child.memoizedState=op(a),t.memoizedState=ip,o);if(!(t.mode&1))return Zs(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(X(419)),r=df(o,r,void 0),Zs(e,t,a,r)}if(s=(a&e.childLanes)!==0,Tt||s){if(r=nt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,tr(e,i),bn(r,e,i,-1))}return qm(),r=df(Error(X(421))),Zs(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=D2.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Gt=_r(i.nextSibling),Ht=t,Re=!0,xn=null,e!==null&&(nn[rn++]=Zn,nn[rn++]=qn,nn[rn++]=xi,Zn=e.id,qn=e.overflow,xi=t),t=Gm(t,r.children),t.flags|=4096,t)}function zv(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Qd(e.return,t,n)}function pf(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function fw(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(bt(e,t,r.children,n),r=Me.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zv(e,n,t);else if(e.tag===19)zv(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(je(Me,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&ac(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),pf(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ac(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}pf(t,!0,n,null,o);break;case"together":pf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Il(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),wi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,n=Ar(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ar(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function E2(e,t,n){switch(t.tag){case 3:cw(t),bo();break;case 5:L1(t);break;case 1:Dt(t.type)&&ec(t);break;case 4:Dm(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;je(rc,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(je(Me,Me.current&1),t.flags|=128,null):n&t.child.childLanes?uw(e,t,n):(je(Me,Me.current&1),e=nr(e,t,n),e!==null?e.sibling:null);je(Me,Me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return fw(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(Me,Me.current),r)break;return null;case 22:case 23:return t.lanes=0,sw(e,t,n)}return nr(e,t,n)}var dw,ap,pw,mw;dw=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ap=function(){};pw=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ii(Dn.current);var o=null;switch(n){case"input":i=Id(e,i),r=Id(e,r),o=[];break;case"select":i=Be({},i,{value:void 0}),r=Be({},r,{value:void 0}),o=[];break;case"textarea":i=Fd(e,i),r=Fd(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ql)}Rd(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&($a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==s&&(c!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&($a.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ce("scroll",e),o||s===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};mw=function(e,t,n,r){n!==r&&(t.flags|=4)};function ia(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function S2(e,t,n){var r=t.pendingProps;switch(Im(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return Dt(t.type)&&Jl(),dt(t),null;case 3:return r=t.stateNode,Eo(),Ie(Pt),Ie(vt),Om(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xn!==null&&(mp(xn),xn=null))),ap(e,t),dt(t),null;case 5:Mm(t);var i=ii(Qa.current);if(n=t.type,e!==null&&t.stateNode!=null)pw(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(X(166));return dt(t),null}if(e=ii(Dn.current),Vs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Nn]=t,r[Ya]=o,e=(t.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<ha.length;i++)Ce(ha[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Xh(r,o),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ce("invalid",r);break;case"textarea":Jh(r,o),Ce("invalid",r)}Rd(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&Hs(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Hs(r.textContent,s,e),i=["children",""+s]):$a.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Os(r),Qh(r,o,!0);break;case"textarea":Os(r),ev(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ql)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Uy(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Nn]=t,e[Ya]=r,dw(e,t,!1,!1),t.stateNode=e;e:{switch(a=Pd(n,r),n){case"dialog":Ce("cancel",e),Ce("close",e),i=r;break;case"iframe":case"object":case"embed":Ce("load",e),i=r;break;case"video":case"audio":for(i=0;i<ha.length;i++)Ce(ha[i],e);i=r;break;case"source":Ce("error",e),i=r;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),i=r;break;case"details":Ce("toggle",e),i=r;break;case"input":Xh(e,r),i=Id(e,r),Ce("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Be({},r,{value:void 0}),Ce("invalid",e);break;case"textarea":Jh(e,r),i=Fd(e,r),Ce("invalid",e);break;default:i=r}Rd(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="style"?Wy(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&zy(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ua(e,c):typeof c=="number"&&Ua(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&($a.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ce("scroll",e):c!=null&&pm(e,o,c,a))}switch(n){case"input":Os(e),Qh(e,r,!1);break;case"textarea":Os(e),ev(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Pr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?lo(e,!!r.multiple,o,!1):r.defaultValue!=null&&lo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ql)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)mw(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(X(166));if(n=ii(Qa.current),ii(Dn.current),Vs(t)){if(r=t.stateNode,n=t.memoizedProps,r[Nn]=t,(o=r.nodeValue!==n)&&(e=Ht,e!==null))switch(e.tag){case 3:Hs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hs(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nn]=t,t.stateNode=r}return dt(t),null;case 13:if(Ie(Me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re&&Gt!==null&&t.mode&1&&!(t.flags&128))F1(),bo(),t.flags|=98560,o=!1;else if(o=Vs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(X(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(X(317));o[Nn]=t}else bo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),o=!1}else xn!==null&&(mp(xn),xn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Me.current&1?Ke===0&&(Ke=3):qm())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return Eo(),ap(e,t),e===null&&Za(t.stateNode.containerInfo),dt(t),null;case 10:return Tm(t.type._context),dt(t),null;case 17:return Dt(t.type)&&Jl(),dt(t),null;case 19:if(Ie(Me),o=t.memoizedState,o===null)return dt(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)ia(o,!1);else{if(Ke!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=ac(e),a!==null){for(t.flags|=128,ia(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return je(Me,Me.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ge()>_o&&(t.flags|=128,r=!0,ia(o,!1),t.lanes=4194304)}else{if(!r)if(e=ac(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ia(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Re)return dt(t),null}else 2*Ge()-o.renderingStartTime>_o&&n!==1073741824&&(t.flags|=128,r=!0,ia(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ge(),t.sibling=null,n=Me.current,je(Me,r?n&1|2:n&1),t):(dt(t),null);case 22:case 23:return Zm(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ut&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function _2(e,t){switch(Im(t),t.tag){case 1:return Dt(t.type)&&Jl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Eo(),Ie(Pt),Ie(vt),Om(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Mm(t),null;case 13:if(Ie(Me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));bo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(Me),null;case 4:return Eo(),null;case 10:return Tm(t.type._context),null;case 22:case 23:return Zm(),null;case 24:return null;default:return null}}var qs=!1,mt=!1,j2=typeof WeakSet=="function"?WeakSet:Set,J=null;function no(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(e,t,r)}else n.current=null}function sp(e,t,n){try{n()}catch(r){ze(e,t,r)}}var Gv=!1;function C2(e,t){if(Wd=ql,e=x1(),jm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,c=-1,u=0,f=0,d=e,p=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(s=a+i),d!==o||r!==0&&d.nodeType!==3||(c=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(h=d.firstChild)!==null;)p=d,d=h;for(;;){if(d===e)break t;if(p===n&&++u===i&&(s=a),p===o&&++f===r&&(c=a),(h=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=h}n=s===-1||c===-1?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hd={focusedElem:e,selectionRange:n},ql=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,_=g.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?w:vn(t.type,w),_);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(b){ze(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return g=Gv,Gv=!1,g}function ja(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&sp(t,n,o)}i=i.next}while(i!==r)}}function fu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function lp(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function hw(e){var t=e.alternate;t!==null&&(e.alternate=null,hw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Nn],delete t[Ya],delete t[Zd],delete t[c2],delete t[u2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function vw(e){return e.tag===5||e.tag===3||e.tag===4}function Wv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ql));else if(r!==4&&(e=e.child,e!==null))for(cp(e,t,n),e=e.sibling;e!==null;)cp(e,t,n),e=e.sibling}function up(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(up(e,t,n),e=e.sibling;e!==null;)up(e,t,n),e=e.sibling}var ot=null,gn=!1;function cr(e,t,n){for(n=n.child;n!==null;)gw(e,t,n),n=n.sibling}function gw(e,t,n){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(ru,n)}catch{}switch(n.tag){case 5:mt||no(n,t);case 6:var r=ot,i=gn;ot=null,cr(e,t,n),ot=r,gn=i,ot!==null&&(gn?(e=ot,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(gn?(e=ot,n=n.stateNode,e.nodeType===8?af(e.parentNode,n):e.nodeType===1&&af(e,n),Ha(e)):af(ot,n.stateNode));break;case 4:r=ot,i=gn,ot=n.stateNode.containerInfo,gn=!0,cr(e,t,n),ot=r,gn=i;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&sp(n,t,a),i=i.next}while(i!==r)}cr(e,t,n);break;case 1:if(!mt&&(no(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){ze(n,t,s)}cr(e,t,n);break;case 21:cr(e,t,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,cr(e,t,n),mt=r):cr(e,t,n);break;default:cr(e,t,n)}}function Hv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new j2),t.forEach(function(r){var i=M2.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function mn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:ot=s.stateNode,gn=!1;break e;case 3:ot=s.stateNode.containerInfo,gn=!0;break e;case 4:ot=s.stateNode.containerInfo,gn=!0;break e}s=s.return}if(ot===null)throw Error(X(160));gw(o,a,i),ot=null,gn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){ze(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)xw(t,e),t=t.sibling}function xw(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mn(t,e),_n(e),r&4){try{ja(3,e,e.return),fu(3,e)}catch(w){ze(e,e.return,w)}try{ja(5,e,e.return)}catch(w){ze(e,e.return,w)}}break;case 1:mn(t,e),_n(e),r&512&&n!==null&&no(n,n.return);break;case 5:if(mn(t,e),_n(e),r&512&&n!==null&&no(n,n.return),e.flags&32){var i=e.stateNode;try{Ua(i,"")}catch(w){ze(e,e.return,w)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&By(i,o),Pd(s,a);var u=Pd(s,o);for(a=0;a<c.length;a+=2){var f=c[a],d=c[a+1];f==="style"?Wy(i,d):f==="dangerouslySetInnerHTML"?zy(i,d):f==="children"?Ua(i,d):pm(i,f,d,u)}switch(s){case"input":Ad(i,o);break;case"textarea":$y(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?lo(i,!!o.multiple,h,!1):p!==!!o.multiple&&(o.defaultValue!=null?lo(i,!!o.multiple,o.defaultValue,!0):lo(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ya]=o}catch(w){ze(e,e.return,w)}}break;case 6:if(mn(t,e),_n(e),r&4){if(e.stateNode===null)throw Error(X(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(w){ze(e,e.return,w)}}break;case 3:if(mn(t,e),_n(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ha(t.containerInfo)}catch(w){ze(e,e.return,w)}break;case 4:mn(t,e),_n(e);break;case 13:mn(t,e),_n(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Vm=Ge())),r&4&&Hv(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(mt=(u=mt)||f,mn(t,e),mt=u):mn(t,e),_n(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(J=e,f=e.child;f!==null;){for(d=J=f;J!==null;){switch(p=J,h=p.child,p.tag){case 0:case 11:case 14:case 15:ja(4,p,p.return);break;case 1:no(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(w){ze(r,n,w)}}break;case 5:no(p,p.return);break;case 22:if(p.memoizedState!==null){Kv(d);continue}}h!==null?(h.return=p,J=h):Kv(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=Gy("display",a))}catch(w){ze(e,e.return,w)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){ze(e,e.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mn(t,e),_n(e),r&4&&Hv(e);break;case 21:break;default:mn(t,e),_n(e)}}function _n(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(vw(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ua(i,""),r.flags&=-33);var o=Wv(e);up(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=Wv(e);cp(e,s,a);break;default:throw Error(X(161))}}catch(c){ze(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function I2(e,t,n){J=e,yw(e)}function yw(e,t,n){for(var r=(e.mode&1)!==0;J!==null;){var i=J,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||qs;if(!a){var s=i.alternate,c=s!==null&&s.memoizedState!==null||mt;s=qs;var u=mt;if(qs=a,(mt=c)&&!u)for(J=i;J!==null;)a=J,c=a.child,a.tag===22&&a.memoizedState!==null?Zv(i):c!==null?(c.return=a,J=c):Zv(i);for(;o!==null;)J=o,yw(o),o=o.sibling;J=i,qs=s,mt=u}Vv(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,J=o):Vv(e)}}function Vv(e){for(;J!==null;){var t=J;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:mt||fu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!mt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Av(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Av(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Ha(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}mt||t.flags&512&&lp(t)}catch(p){ze(t,t.return,p)}}if(t===e){J=null;break}if(n=t.sibling,n!==null){n.return=t.return,J=n;break}J=t.return}}function Kv(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var n=t.sibling;if(n!==null){n.return=t.return,J=n;break}J=t.return}}function Zv(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{fu(4,t)}catch(c){ze(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){ze(t,i,c)}}var o=t.return;try{lp(t)}catch(c){ze(t,o,c)}break;case 5:var a=t.return;try{lp(t)}catch(c){ze(t,a,c)}}}catch(c){ze(t,t.return,c)}if(t===e){J=null;break}var s=t.sibling;if(s!==null){s.return=t.return,J=s;break}J=t.return}}var A2=Math.ceil,cc=ar.ReactCurrentDispatcher,Wm=ar.ReactCurrentOwner,ln=ar.ReactCurrentBatchConfig,ve=0,nt=null,We=null,ct=0,Ut=0,ro=$r(0),Ke=0,ns=null,wi=0,du=0,Hm=0,Ca=null,Nt=null,Vm=0,_o=1/0,Gn=null,uc=!1,fp=null,Cr=null,Ys=!1,yr=null,fc=0,Ia=0,dp=null,Al=-1,Nl=0;function St(){return ve&6?Ge():Al!==-1?Al:Al=Ge()}function Ir(e){return e.mode&1?ve&2&&ct!==0?ct&-ct:d2.transition!==null?(Nl===0&&(Nl=n1()),Nl):(e=we,e!==0||(e=window.event,e=e===void 0?16:c1(e.type)),e):1}function bn(e,t,n,r){if(50<Ia)throw Ia=0,dp=null,Error(X(185));xs(e,n,r),(!(ve&2)||e!==nt)&&(e===nt&&(!(ve&2)&&(du|=n),Ke===4&&hr(e,ct)),Mt(e,r),n===1&&ve===0&&!(t.mode&1)&&(_o=Ge()+500,lu&&Ur()))}function Mt(e,t){var n=e.callbackNode;d_(e,t);var r=Zl(e,e===nt?ct:0);if(r===0)n!==null&&rv(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&rv(n),t===1)e.tag===0?f2(qv.bind(null,e)):I1(qv.bind(null,e)),s2(function(){!(ve&6)&&Ur()}),n=null;else{switch(r1(r)){case 1:n=xm;break;case 4:n=e1;break;case 16:n=Kl;break;case 536870912:n=t1;break;default:n=Kl}n=Cw(n,ww.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ww(e,t){if(Al=-1,Nl=0,ve&6)throw Error(X(327));var n=e.callbackNode;if(mo()&&e.callbackNode!==n)return null;var r=Zl(e,e===nt?ct:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=dc(e,r);else{t=r;var i=ve;ve|=2;var o=kw();(nt!==e||ct!==t)&&(Gn=null,_o=Ge()+500,li(e,t));do try{T2();break}catch(s){bw(e,s)}while(!0);Fm(),cc.current=o,ve=i,We!==null?t=0:(nt=null,ct=0,t=Ke)}if(t!==0){if(t===2&&(i=Bd(e),i!==0&&(r=i,t=pp(e,i))),t===1)throw n=ns,li(e,0),hr(e,r),Mt(e,Ge()),n;if(t===6)hr(e,r);else{if(i=e.current.alternate,!(r&30)&&!N2(i)&&(t=dc(e,r),t===2&&(o=Bd(e),o!==0&&(r=o,t=pp(e,o))),t===1))throw n=ns,li(e,0),hr(e,r),Mt(e,Ge()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(X(345));case 2:Xr(e,Nt,Gn);break;case 3:if(hr(e,r),(r&130023424)===r&&(t=Vm+500-Ge(),10<t)){if(Zl(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){St(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Kd(Xr.bind(null,e,Nt,Gn),t);break}Xr(e,Nt,Gn);break;case 4:if(hr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-wn(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*A2(r/1960))-r,10<r){e.timeoutHandle=Kd(Xr.bind(null,e,Nt,Gn),r);break}Xr(e,Nt,Gn);break;case 5:Xr(e,Nt,Gn);break;default:throw Error(X(329))}}}return Mt(e,Ge()),e.callbackNode===n?ww.bind(null,e):null}function pp(e,t){var n=Ca;return e.current.memoizedState.isDehydrated&&(li(e,t).flags|=256),e=dc(e,t),e!==2&&(t=Nt,Nt=n,t!==null&&mp(t)),e}function mp(e){Nt===null?Nt=e:Nt.push.apply(Nt,e)}function N2(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Sn(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hr(e,t){for(t&=~Hm,t&=~du,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-wn(t),r=1<<n;e[n]=-1,t&=~r}}function qv(e){if(ve&6)throw Error(X(327));mo();var t=Zl(e,0);if(!(t&1))return Mt(e,Ge()),null;var n=dc(e,t);if(e.tag!==0&&n===2){var r=Bd(e);r!==0&&(t=r,n=pp(e,r))}if(n===1)throw n=ns,li(e,0),hr(e,t),Mt(e,Ge()),n;if(n===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xr(e,Nt,Gn),Mt(e,Ge()),null}function Km(e,t){var n=ve;ve|=1;try{return e(t)}finally{ve=n,ve===0&&(_o=Ge()+500,lu&&Ur())}}function bi(e){yr!==null&&yr.tag===0&&!(ve&6)&&mo();var t=ve;ve|=1;var n=ln.transition,r=we;try{if(ln.transition=null,we=1,e)return e()}finally{we=r,ln.transition=n,ve=t,!(ve&6)&&Ur()}}function Zm(){Ut=ro.current,Ie(ro)}function li(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,a2(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Im(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jl();break;case 3:Eo(),Ie(Pt),Ie(vt),Om();break;case 5:Mm(r);break;case 4:Eo();break;case 13:Ie(Me);break;case 19:Ie(Me);break;case 10:Tm(r.type._context);break;case 22:case 23:Zm()}n=n.return}if(nt=e,We=e=Ar(e.current,null),ct=Ut=t,Ke=0,ns=null,Hm=du=wi=0,Nt=Ca=null,ri!==null){for(t=0;t<ri.length;t++)if(n=ri[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}ri=null}return e}function bw(e,t){do{var n=We;try{if(Fm(),jl.current=lc,sc){for(var r=Le.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}sc=!1}if(yi=0,tt=Ve=Le=null,_a=!1,Ja=0,Wm.current=null,n===null||n.return===null){Ke=1,ns=t,We=null;break}e:{var o=e,a=n.return,s=n,c=t;if(t=ct,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=s,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=Mv(a);if(h!==null){h.flags&=-257,Ov(h,a,s,o,t),h.mode&1&&Dv(o,u,t),t=h,c=u;var g=t.updateQueue;if(g===null){var w=new Set;w.add(c),t.updateQueue=w}else g.add(c);break e}else{if(!(t&1)){Dv(o,u,t),qm();break e}c=Error(X(426))}}else if(Re&&s.mode&1){var _=Mv(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Ov(_,a,s,o,t),Am(So(c,s));break e}}o=c=So(c,s),Ke!==4&&(Ke=2),Ca===null?Ca=[o]:Ca.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var y=iw(o,c,t);Iv(o,y);break e;case 1:s=c;var x=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Cr===null||!Cr.has(E)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=ow(o,s,t);Iv(o,b);break e}}o=o.return}while(o!==null)}Sw(n)}catch(S){t=S,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function kw(){var e=cc.current;return cc.current=lc,e===null?lc:e}function qm(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),nt===null||!(wi&268435455)&&!(du&268435455)||hr(nt,ct)}function dc(e,t){var n=ve;ve|=2;var r=kw();(nt!==e||ct!==t)&&(Gn=null,li(e,t));do try{F2();break}catch(i){bw(e,i)}while(!0);if(Fm(),ve=n,cc.current=r,We!==null)throw Error(X(261));return nt=null,ct=0,Ke}function F2(){for(;We!==null;)Ew(We)}function T2(){for(;We!==null&&!r_();)Ew(We)}function Ew(e){var t=jw(e.alternate,e,Ut);e.memoizedProps=e.pendingProps,t===null?Sw(e):We=t,Wm.current=null}function Sw(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=_2(n,t),n!==null){n.flags&=32767,We=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ke=6,We=null;return}}else if(n=S2(n,t,Ut),n!==null){We=n;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Ke===0&&(Ke=5)}function Xr(e,t,n){var r=we,i=ln.transition;try{ln.transition=null,we=1,R2(e,t,n,r)}finally{ln.transition=i,we=r}return null}function R2(e,t,n,r){do mo();while(yr!==null);if(ve&6)throw Error(X(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(p_(e,o),e===nt&&(We=nt=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ys||(Ys=!0,Cw(Kl,function(){return mo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ln.transition,ln.transition=null;var a=we;we=1;var s=ve;ve|=4,Wm.current=null,C2(e,n),xw(n,e),J_(Hd),ql=!!Wd,Hd=Wd=null,e.current=n,I2(n),i_(),ve=s,we=a,ln.transition=o}else e.current=n;if(Ys&&(Ys=!1,yr=e,fc=i),o=e.pendingLanes,o===0&&(Cr=null),s_(n.stateNode),Mt(e,Ge()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(uc)throw uc=!1,e=fp,fp=null,e;return fc&1&&e.tag!==0&&mo(),o=e.pendingLanes,o&1?e===dp?Ia++:(Ia=0,dp=e):Ia=0,Ur(),null}function mo(){if(yr!==null){var e=r1(fc),t=ln.transition,n=we;try{if(ln.transition=null,we=16>e?16:e,yr===null)var r=!1;else{if(e=yr,yr=null,fc=0,ve&6)throw Error(X(331));var i=ve;for(ve|=4,J=e.current;J!==null;){var o=J,a=o.child;if(J.flags&16){var s=o.deletions;if(s!==null){for(var c=0;c<s.length;c++){var u=s[c];for(J=u;J!==null;){var f=J;switch(f.tag){case 0:case 11:case 15:ja(8,f,o)}var d=f.child;if(d!==null)d.return=f,J=d;else for(;J!==null;){f=J;var p=f.sibling,h=f.return;if(hw(f),f===u){J=null;break}if(p!==null){p.return=h,J=p;break}J=h}}}var g=o.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}J=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,J=a;else e:for(;J!==null;){if(o=J,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ja(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,J=y;break e}J=o.return}}var x=e.current;for(J=x;J!==null;){a=J;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,J=E;else e:for(a=x;J!==null;){if(s=J,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:fu(9,s)}}catch(S){ze(s,s.return,S)}if(s===a){J=null;break e}var b=s.sibling;if(b!==null){b.return=s.return,J=b;break e}J=s.return}}if(ve=i,Ur(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(ru,e)}catch{}r=!0}return r}finally{we=n,ln.transition=t}}return!1}function Yv(e,t,n){t=So(n,t),t=iw(e,t,1),e=jr(e,t,1),t=St(),e!==null&&(xs(e,1,t),Mt(e,t))}function ze(e,t,n){if(e.tag===3)Yv(e,e,n);else for(;t!==null;){if(t.tag===3){Yv(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cr===null||!Cr.has(r))){e=So(n,e),e=ow(t,e,1),t=jr(t,e,1),e=St(),t!==null&&(xs(t,1,e),Mt(t,e));break}}t=t.return}}function P2(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=St(),e.pingedLanes|=e.suspendedLanes&n,nt===e&&(ct&n)===n&&(Ke===4||Ke===3&&(ct&130023424)===ct&&500>Ge()-Vm?li(e,0):Hm|=n),Mt(e,t)}function _w(e,t){t===0&&(e.mode&1?(t=$s,$s<<=1,!($s&130023424)&&($s=4194304)):t=1);var n=St();e=tr(e,t),e!==null&&(xs(e,t,n),Mt(e,n))}function D2(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_w(e,n)}function M2(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(t),_w(e,n)}var jw;jw=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pt.current)Tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tt=!1,E2(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,Re&&t.flags&1048576&&A1(t,nc,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Il(e,t),e=t.pendingProps;var i=wo(t,vt.current);po(t,n),i=Bm(null,t,r,e,i,n);var o=$m();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dt(r)?(o=!0,ec(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Pm(t),i.updater=cu,t.stateNode=i,i._reactInternals=t,ep(t,r,e,n),t=rp(null,t,r,!0,o,n)):(t.tag=0,Re&&o&&Cm(t),bt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Il(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=L2(r),e=vn(r,e),i){case 0:t=np(null,t,r,e,n);break e;case 1:t=$v(null,t,r,e,n);break e;case 11:t=Lv(null,t,r,e,n);break e;case 14:t=Bv(null,t,r,vn(r.type,e),n);break e}throw Error(X(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vn(r,i),np(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vn(r,i),$v(e,t,r,i,n);case 3:e:{if(cw(t),e===null)throw Error(X(387));r=t.pendingProps,o=t.memoizedState,i=o.element,R1(e,t),oc(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=So(Error(X(423)),t),t=Uv(e,t,r,n,i);break e}else if(r!==i){i=So(Error(X(424)),t),t=Uv(e,t,r,n,i);break e}else for(Gt=_r(t.stateNode.containerInfo.firstChild),Ht=t,Re=!0,xn=null,n=O1(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bo(),r===i){t=nr(e,t,n);break e}bt(e,t,r,n)}t=t.child}return t;case 5:return L1(t),e===null&&Xd(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,Vd(r,i)?a=null:o!==null&&Vd(r,o)&&(t.flags|=32),lw(e,t),bt(e,t,a,n),t.child;case 6:return e===null&&Xd(t),null;case 13:return uw(e,t,n);case 4:return Dm(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ko(t,null,r,n):bt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vn(r,i),Lv(e,t,r,i,n);case 7:return bt(e,t,t.pendingProps,n),t.child;case 8:return bt(e,t,t.pendingProps.children,n),t.child;case 12:return bt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,je(rc,r._currentValue),r._currentValue=a,o!==null)if(Sn(o.value,a)){if(o.children===i.children&&!Pt.current){t=nr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var c=s.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Xn(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Qd(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(X(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Qd(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}bt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,po(t,n),i=un(i),r=r(i),t.flags|=1,bt(e,t,r,n),t.child;case 14:return r=t.type,i=vn(r,t.pendingProps),i=vn(r.type,i),Bv(e,t,r,i,n);case 15:return aw(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vn(r,i),Il(e,t),t.tag=1,Dt(r)?(e=!0,ec(t)):e=!1,po(t,n),D1(t,r,i),ep(t,r,i,n),rp(null,t,r,!0,e,n);case 19:return fw(e,t,n);case 22:return sw(e,t,n)}throw Error(X(156,t.tag))};function Cw(e,t){return Jy(e,t)}function O2(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(e,t,n,r){return new O2(e,t,n,r)}function Ym(e){return e=e.prototype,!(!e||!e.isReactComponent)}function L2(e){if(typeof e=="function")return Ym(e)?1:0;if(e!=null){if(e=e.$$typeof,e===hm)return 11;if(e===vm)return 14}return 2}function Ar(e,t){var n=e.alternate;return n===null?(n=sn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fl(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")Ym(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ki:return ci(n.children,i,o,t);case mm:a=8,i|=8;break;case Sd:return e=sn(12,n,t,i|2),e.elementType=Sd,e.lanes=o,e;case _d:return e=sn(13,n,t,i),e.elementType=_d,e.lanes=o,e;case jd:return e=sn(19,n,t,i),e.elementType=jd,e.lanes=o,e;case My:return pu(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Py:a=10;break e;case Dy:a=9;break e;case hm:a=11;break e;case vm:a=14;break e;case fr:a=16,r=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=sn(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function ci(e,t,n,r){return e=sn(7,e,r,t),e.lanes=n,e}function pu(e,t,n,r){return e=sn(22,e,r,t),e.elementType=My,e.lanes=n,e.stateNode={isHidden:!1},e}function mf(e,t,n){return e=sn(6,e,null,t),e.lanes=n,e}function hf(e,t,n){return t=sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function B2(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zu(0),this.expirationTimes=Zu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xm(e,t,n,r,i,o,a,s,c){return e=new B2(e,t,n,s,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=sn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pm(o),e}function $2(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Iw(e){if(!e)return Dr;e=e._reactInternals;e:{if(Fi(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var n=e.type;if(Dt(n))return C1(e,n,t)}return t}function Aw(e,t,n,r,i,o,a,s,c){return e=Xm(n,r,!0,e,i,o,a,s,c),e.context=Iw(null),n=e.current,r=St(),i=Ir(n),o=Xn(r,i),o.callback=t??null,jr(n,o,i),e.current.lanes=i,xs(e,i,r),Mt(e,r),e}function mu(e,t,n,r){var i=t.current,o=St(),a=Ir(i);return n=Iw(n),t.context===null?t.context=n:t.pendingContext=n,t=Xn(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=jr(i,t,a),e!==null&&(bn(e,i,a,o),_l(e,i,a)),a}function pc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Qm(e,t){Xv(e,t),(e=e.alternate)&&Xv(e,t)}function U2(){return null}var Nw=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jm(e){this._internalRoot=e}hu.prototype.render=Jm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));mu(e,t,null,null)};hu.prototype.unmount=Jm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bi(function(){mu(null,e,null,null)}),t[er]=null}};function hu(e){this._internalRoot=e}hu.prototype.unstable_scheduleHydration=function(e){if(e){var t=a1();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mr.length&&t!==0&&t<mr[n].priority;n++);mr.splice(n,0,e),n===0&&l1(e)}};function eh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qv(){}function z2(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=pc(a);o.call(u)}}var a=Aw(t,r,e,0,null,!1,!1,"",Qv);return e._reactRootContainer=a,e[er]=a.current,Za(e.nodeType===8?e.parentNode:e),bi(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=pc(c);s.call(u)}}var c=Xm(e,0,!1,null,null,!1,!1,"",Qv);return e._reactRootContainer=c,e[er]=c.current,Za(e.nodeType===8?e.parentNode:e),bi(function(){mu(t,c,n,r)}),c}function gu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var c=pc(a);s.call(c)}}mu(t,a,e,i)}else a=z2(n,t,e,i,r);return pc(a)}i1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ma(t.pendingLanes);n!==0&&(ym(t,n|1),Mt(t,Ge()),!(ve&6)&&(_o=Ge()+500,Ur()))}break;case 13:bi(function(){var r=tr(e,1);if(r!==null){var i=St();bn(r,e,1,i)}}),Qm(e,1)}};wm=function(e){if(e.tag===13){var t=tr(e,134217728);if(t!==null){var n=St();bn(t,e,134217728,n)}Qm(e,134217728)}};o1=function(e){if(e.tag===13){var t=Ir(e),n=tr(e,t);if(n!==null){var r=St();bn(n,e,t,r)}Qm(e,t)}};a1=function(){return we};s1=function(e,t){var n=we;try{return we=e,t()}finally{we=n}};Md=function(e,t,n){switch(t){case"input":if(Ad(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=su(r);if(!i)throw Error(X(90));Ly(r),Ad(r,i)}}}break;case"textarea":$y(e,n);break;case"select":t=n.value,t!=null&&lo(e,!!n.multiple,t,!1)}};Ky=Km;Zy=bi;var G2={usingClientEntryPoint:!1,Events:[ws,Xi,su,Hy,Vy,Km]},oa={findFiberByHostInstance:ni,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},W2={bundleType:oa.bundleType,version:oa.version,rendererPackageName:oa.rendererPackageName,rendererConfig:oa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Xy(e),e===null?null:e.stateNode},findFiberByHostInstance:oa.findFiberByHostInstance||U2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xs.isDisabled&&Xs.supportsFiber)try{ru=Xs.inject(W2),Pn=Xs}catch{}}Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G2;Yt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eh(t))throw Error(X(200));return $2(e,t,null,n)};Yt.createRoot=function(e,t){if(!eh(e))throw Error(X(299));var n=!1,r="",i=Nw;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Xm(e,1,!1,null,null,n,!1,r,i),e[er]=t.current,Za(e.nodeType===8?e.parentNode:e),new Jm(t)};Yt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=Xy(t),e=e===null?null:e.stateNode,e};Yt.flushSync=function(e){return bi(e)};Yt.hydrate=function(e,t,n){if(!vu(t))throw Error(X(200));return gu(null,e,t,!0,n)};Yt.hydrateRoot=function(e,t,n){if(!eh(e))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=Nw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Aw(t,null,e,1,n??null,i,!1,o,a),e[er]=t.current,Za(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new hu(t)};Yt.render=function(e,t,n){if(!vu(t))throw Error(X(200));return gu(null,e,t,!1,n)};Yt.unmountComponentAtNode=function(e){if(!vu(e))throw Error(X(40));return e._reactRootContainer?(bi(function(){gu(null,null,e,!1,function(){e._reactRootContainer=null,e[er]=null})}),!0):!1};Yt.unstable_batchedUpdates=Km;Yt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!vu(n))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return gu(e,t,n,!1,r)};Yt.version="18.2.0-next-9e3b772b8-20220608";function Fw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fw)}catch(e){console.error(e)}}Fw(),Ay.exports=Yt;var xu=Ay.exports,Jv=xu;kd.createRoot=Jv.createRoot,kd.hydrateRoot=Jv.hydrateRoot;const Tw=F.createContext(void 0);function ne({children:e,onClick:t,color:n,disabled:r}){let i;r?i=n==="success"?"bg-emerald-400 text-emerald-100":n==="danger"?"bg-rose-400 text-rose-100":"bg-slate-400 text-slate-100":(i=n==="success"?"bg-emerald-600 hover:bg-emerald-500 text-white":n==="danger"?"bg-rose-600 hover:bg-rose-500 text-white":"bg-slate-600 hover:bg-slate-500 text-white",i+=" hover:underline");const o=r?"cursor-not-allowed":"";return l.jsx("button",{className:`${i} ${o} inline-flex items-center font-bold px-2.5 py-1.5 rounded-sm`,onClick:()=>!r&&t(),disabled:r,children:e})}var Rw={exports:{}},H2="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",V2=H2,K2=V2;function Pw(){}function Dw(){}Dw.resetWarningCache=Pw;var Z2=function(){function e(r,i,o,a,s,c){if(c!==K2){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Dw,resetWarningCache:Pw};return n.PropTypes=n,n};Rw.exports=Z2();var q2=Rw.exports;const Kr=tu(q2);var Y2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},X2=Object.defineProperty,Q2=Object.defineProperties,J2=Object.getOwnPropertyDescriptors,mc=Object.getOwnPropertySymbols,Mw=Object.prototype.hasOwnProperty,Ow=Object.prototype.propertyIsEnumerable,eg=(e,t,n)=>t in e?X2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tg=(e,t)=>{for(var n in t||(t={}))Mw.call(t,n)&&eg(e,n,t[n]);if(mc)for(var n of mc(t))Ow.call(t,n)&&eg(e,n,t[n]);return e},ej=(e,t)=>Q2(e,J2(t)),tj=(e,t)=>{var n={};for(var r in e)Mw.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mc)for(var r of mc(e))t.indexOf(r)<0&&Ow.call(e,r)&&(n[r]=e[r]);return n},le=(e,t,n)=>{const r=B.forwardRef((i,o)=>{var a=i,{color:s="currentColor",size:c=24,stroke:u=2,children:f}=a,d=tj(a,["color","size","stroke","children"]);return B.createElement("svg",tg(ej(tg({ref:o},Y2),{width:c,height:c,stroke:s,strokeWidth:u,className:`tabler-icon tabler-icon-${e}`}),d),[...n.map(([p,h])=>B.createElement(p,h)),...f||[]])});return r.propTypes={color:Kr.string,size:Kr.oneOfType([Kr.string,Kr.number]),stroke:Kr.oneOfType([Kr.string,Kr.number])},r.displayName=`${t}`,r},nj=le("alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),rj=le("arrow-down","IconArrowDown",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 13l-6 6",key:"svg-1"}],["path",{d:"M6 13l6 6",key:"svg-2"}]]),ij=le("arrow-fork","IconArrowFork",[["path",{d:"M16 3h5v5",key:"svg-0"}],["path",{d:"M8 3h-5v5",key:"svg-1"}],["path",{d:"M21 3l-7.536 7.536a5 5 0 0 0 -1.464 3.534v6.93",key:"svg-2"}],["path",{d:"M3 3l7.536 7.536a5 5 0 0 1 1.464 3.534v.93",key:"svg-3"}]]),oj=le("arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]),aj=le("box-multiple","IconBoxMultiple",[["path",{d:"M7 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M17 17v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2",key:"svg-1"}]]),sj=le("caret-down","IconCaretDown",[["path",{d:"M6 10l6 6l6 -6h-12",key:"svg-0"}]]),lj=le("caret-up","IconCaretUp",[["path",{d:"M18 14l-6 -6l-6 6h12",key:"svg-0"}]]),cj=le("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]),uj=le("circle-caret-down","IconCircleCaretDown",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 15l-4 -4h8z",key:"svg-1"}]]),fj=le("circle-caret-up","IconCircleCaretUp",[["path",{d:"M12 9l4 4h-8z",key:"svg-0"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-1"}]]),dj=le("circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]),pj=le("circle-dot","IconCircleDot",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-1"}]]),mj=le("circle-off","IconCircleOff",[["path",{d:"M20.042 16.045a9 9 0 0 0 -12.087 -12.087m-2.318 1.677a9 9 0 1 0 12.725 12.73",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]),hj=le("circle-plus","IconCirclePlus",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M9 12h6",key:"svg-1"}],["path",{d:"M12 9v6",key:"svg-2"}]]),vj=le("circle-x","IconCircleX",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M10 10l4 4m0 -4l-4 4",key:"svg-1"}]]),gj=le("circle","IconCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}]]),xj=le("device-floppy","IconDeviceFloppy",[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]]),yj=le("download","IconDownload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]),wj=le("exclamation-circle","IconExclamationCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 9v4",key:"svg-1"}],["path",{d:"M12 16v.01",key:"svg-2"}]]),ng=le("file","IconFile",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}]]),bj=le("folder-open","IconFolderOpen",[["path",{d:"M5 19l2.757 -7.351a1 1 0 0 1 .936 -.649h12.307a1 1 0 0 1 .986 1.164l-.996 5.211a2 2 0 0 1 -1.964 1.625h-14.026a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2h4l3 3h7a2 2 0 0 1 2 2v2",key:"svg-0"}]]),kj=le("help","IconHelp",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 17l0 .01",key:"svg-1"}],["path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4",key:"svg-2"}]]),Ej=le("info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]),Sj=le("minus","IconMinus",[["path",{d:"M5 12l14 0",key:"svg-0"}]]),_j=le("package-export","IconPackageExport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M15 18h7",key:"svg-4"}],["path",{d:"M19 15l3 3l-3 3",key:"svg-5"}]]),jj=le("pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]),Cj=le("photo-cancel","IconPhotoCancel",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-2"}],["path",{d:"M14 14l1 -1c.616 -.593 1.328 -.792 2.008 -.598",key:"svg-3"}],["path",{d:"M19 19m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-4"}],["path",{d:"M17 21l4 -4",key:"svg-5"}]]),Ij=le("photo-check","IconPhotoCheck",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M11.5 21h-5.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v7",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l4 4",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l.5 .5",key:"svg-3"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-4"}]]),Aj=le("photo-down","IconPhotoDown",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6.5",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l4 4",key:"svg-2"}],["path",{d:"M14 14l1 -1c.653 -.629 1.413 -.815 2.13 -.559",key:"svg-3"}],["path",{d:"M19 16v6",key:"svg-4"}],["path",{d:"M22 19l-3 3l-3 -3",key:"svg-5"}]]),Nj=le("photo-share","IconPhotoShare",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M12 21h-6a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v7",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0",key:"svg-3"}],["path",{d:"M16 22l5 -5",key:"svg-4"}],["path",{d:"M21 21.5v-4.5h-4.5",key:"svg-5"}]]),Fj=le("player-skip-back","IconPlayerSkipBack",[["path",{d:"M20 5v14l-12 -7z",key:"svg-0"}],["path",{d:"M4 5l0 14",key:"svg-1"}]]),Tj=le("player-skip-forward","IconPlayerSkipForward",[["path",{d:"M4 5v14l12 -7z",key:"svg-0"}],["path",{d:"M20 5l0 14",key:"svg-1"}]]),Rj=le("player-track-next","IconPlayerTrackNext",[["path",{d:"M3 5v14l8 -7z",key:"svg-0"}],["path",{d:"M14 5v14l8 -7z",key:"svg-1"}]]),Pj=le("plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]),Dj=le("refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]),Mj=le("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),Oj=le("square-number-1","IconSquareNumber1",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M10 10l2 -2v8",key:"svg-1"}]]),Lj=le("stack","IconStack",[["path",{d:"M12 6l-8 4l8 4l8 -4l-8 -4",key:"svg-0"}],["path",{d:"M4 14l8 4l8 -4",key:"svg-1"}]]),Bj=le("trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]),rg=le("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);const ie={Help:kj,Delete:Bj,Warning:nj,Error:wj,ArrowDown:rj,ArrowFork:ij,ArrowRight:oj,ImportProject:yj,BlankProject:ng,NewFile:ng,OpenFile:bj,SaveFile:xj,ExportFile:_j,ExportImage:Nj,CaretUp:lj,CaretDown:sj,Options:Mj,Plus:Pj,CirclePlus:hj,Minus:Sj,Close:rg,Block:mj,X:rg,Circle:gj,CircleDot:pj,CircleX:vj,Check:cj,CircleCheck:dj,CircleCaretUp:fj,CircleCaretDown:uj,Prev:Fj,Next:Tj,NextAll:Rj,PhotoLossless:Ij,PhotoLossy:Aj,PhotoError:Cj,Edit:jj,CompositeSubframes:Lj,SingleLayered:Oj,MultiLayered:aj,Info:Ej,Reset:Dj};var $j={BASE_URL:"/gaf-studio-web",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ig=e=>{let t;const n=new Set,r=(f,d)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const h=t;t=d??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(g=>g(t,h))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>u,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{($j?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,c);return c},yu=e=>e?ig(e):ig;var Lw={exports:{}},Bw={},$w={exports:{}},Uw={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jo=B;function Uj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zj=typeof Object.is=="function"?Object.is:Uj,Gj=jo.useState,Wj=jo.useEffect,Hj=jo.useLayoutEffect,Vj=jo.useDebugValue;function Kj(e,t){var n=t(),r=Gj({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return Hj(function(){i.value=n,i.getSnapshot=t,vf(i)&&o({inst:i})},[e,n,t]),Wj(function(){return vf(i)&&o({inst:i}),e(function(){vf(i)&&o({inst:i})})},[e]),Vj(n),n}function vf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zj(e,n)}catch{return!0}}function Zj(e,t){return t()}var qj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Zj:Kj;Uw.useSyncExternalStore=jo.useSyncExternalStore!==void 0?jo.useSyncExternalStore:qj;$w.exports=Uw;var Yj=$w.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wu=B,Xj=Yj;function Qj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Jj=typeof Object.is=="function"?Object.is:Qj,eC=Xj.useSyncExternalStore,tC=wu.useRef,nC=wu.useEffect,rC=wu.useMemo,iC=wu.useDebugValue;Bw.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=tC(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=rC(function(){function c(h){if(!u){if(u=!0,f=h,h=r(h),i!==void 0&&a.hasValue){var g=a.value;if(i(g,h))return d=g}return d=h}if(g=d,Jj(f,h))return g;var w=r(h);return i!==void 0&&i(g,w)?g:(f=h,d=w)}var u=!1,f,d,p=n===void 0?null:n;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,n,r,i]);var s=eC(e,o[0],o[1]);return nC(function(){a.hasValue=!0,a.value=s},[s]),iC(s),s};Lw.exports=Bw;var oC=Lw.exports;const aC=tu(oC);var zw={BASE_URL:"/gaf-studio-web",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:sC}=F,{useSyncExternalStoreWithSelector:lC}=aC;let og=!1;const cC=e=>e;function bu(e,t=cC,n){(zw?"production":void 0)!=="production"&&n&&!og&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),og=!0);const r=lC(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return sC(r),r}const ag=e=>{(zw?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?yu(e):e,n=(r,i)=>bu(t,r,i);return Object.assign(n,t),n},Gw=e=>e?ag(e):ag,ku=F.createContext(null);function te(e){const t=F.useContext(ku);if(!t)throw new Error("Missing WorkspaceWrapperContext.Provider in the tree");return bu(t.store,e)}function sg(e){const t=F.useContext(ku);if(!t)throw new Error("Missing WorkspaceWrapperContext.Provider in the tree");if(t.format!=="gaf")throw new Error("Not a Gaf workspace.");return bu(t.store,e)}function lg(e){const t=F.useContext(ku);if(!t)throw new Error("Missing WorkspaceWrapperContext.Provider in the tree");if(t.format!=="taf-solo")throw new Error("Not a Taf Solo workspace.");return bu(t.store,e)}function uC(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const{useRef:fC}=F;function Qs(e){const t=fC();return n=>{const r=e(n);return uC(t.current,r)?t.current:t.current=r}}var Z;(e=>{function t(){return te(G=>G.format)}e.useFormat=t;function n(){return te(G=>G.gafFormat)}e.useGafFormat=n;function r(){return te(G=>G.cursor)}e.useCursor=r;function i(){return te(Qs(G=>G.cursor))}e.useShallowCursor=i;function o(){return te(G=>G.abstractActions.getCurrentGaf())}e.useCurrentGaf=o;function a(){return te(G=>G.commonActions.getEntries())}e.useEntries=a;function s(){return te(G=>G.commonActions.getEntries().length)}e.useEntriesLength=s;function c(){return te(G=>G.cursor.entryIndex)}e.useActiveEntryIndex=c;function u(){return te(G=>G.cursor.frameIndex)}e.useActiveFrameIndex=u;function f(){return te(G=>G.cursor.subframeIndex)}e.useActiveSubframeIndex=f;function d(){return te(G=>G.commonActions.setActiveEntryIndex)}e.useSetActiveEntryIndex=d;function p(){return te(G=>G.commonActions.setActiveFrameIndex)}e.useSetActiveFrameIndex=p;function h(){return te(G=>G.commonActions.setActiveSubframeIndex)}e.useSetActiveSubframeIndex=h;function g(){return te(G=>G.cursor.entryIndex!==null)}e.useHasActiveEntry=g;function w(){return te(G=>G.cursor.frameIndex!==null)}e.useHasActiveFrame=w;function _(){return te(G=>G.cursor.subframeIndex!==null)}e.useHasActiveSubframe=_;function y(){return te(G=>{var Q;return G.cursor.entryIndex!==null&&((Q=G.commonActions.getActiveFrame())==null?void 0:Q.frameData.kind)==="multi"})}e.useHasActiveFrameMulti=y;function x(){return te(G=>G.commonActions.getActiveEntry())}e.useActiveEntry=x;function E(){return te(G=>{var Q;return(Q=G.commonActions.getActiveEntry())==null?void 0:Q.frames.length})}e.useActiveEntryFramesCount=E;function b(){return te(G=>{var Q;return(Q=G.commonActions.getActiveEntry())==null?void 0:Q.name})}e.useActiveEntryName=b;function S(){return te(G=>G.commonActions.getActiveFrame())}e.useActiveFrame=S;function A(){return te(G=>{const Q=G.commonActions.getActiveFrame();if(!(Q===null||Q.frameData.kind==="single"))return Q.frameData.layers.length})}e.useActiveFrameSubframesCount=A;function R(){return te(G=>{var Q;return(Q=G.commonActions.getActiveFrame())==null?void 0:Q.frameData})}e.useActiveFrameFrameData=R;function C(){return te(G=>{var Q;return((Q=G.commonActions.getActiveFrame())==null?void 0:Q.frameData.kind)==="multi"})}e.useActiveFrameFrameDataIsMulti=C;function T(){return te(G=>G.commonActions.getActiveSubframe())}e.useActiveSubframe=T;function N(G,Q){return te(he=>Q===(G==="frame"?he.cursor.frameIndex:he.cursor.subframeIndex))}e.useIsFrameOrSubframeSelectedAt=N;function L(G){return te(Q=>Q.cursor.frameIndex===G)}e.useIsFrameSelectedAt=L;function $(G){return te(Q=>Q.cursor.subframeIndex===G)}e.useIsSubframeSelectedAt=$;function O(G){return te(Q=>Q.commonActions.getActiveEntry().frames[G].frameData)}e.useFrameDataAt=O;function P(G,Q){return te(he=>{const qe=he.commonActions.getActiveEntry().frames[G].frameData;if(qe.kind==="single")throw new Error("Can't use this component for single-layered frameData.");return qe.layers[Q]})}e.useSubframeDataAt=P;function M(G,Q){return te(he=>{if(G==="subframe")return null;const qe=he.commonActions.getActiveEntry().frames[Q].frameData;return qe.kind==="single"?null:qe.layers.length})}e.useSubframesCountAtFrameOrSubframe=M;function V(G){return{name:G.name,unknown1:G.unknown1,unknown2:G.unknown2,framesLength:G.frames.length}}function W(){return te(Qs(G=>{const{entryIndex:Q}=G.cursor;if(Q===null)return null;const he=G.commonActions.getEntries()[Q];return V(he)}))}e.useShallowActiveEntryProps=W;function I(){return te(Qs(G=>{const{entryIndex:Q,frameIndex:he}=G.cursor;if(Q===null)throw new Error("No active entry.");if(he===null)return null;const Ee=G.commonActions.getEntries()[Q].frames[he].frameData,rt={width:Ee.width,height:Ee.height,xOffset:Ee.xOffset,yOffset:Ee.yOffset,transparencyIndex:Ee.transparencyIndex,unknown2:Ee.unknown2,unknown3:Ee.unknown3};return{kind:Ee.kind,...rt}}))}e.useShallowActiveFrameDataProps=I;function U(){return te(G=>G.commonActions.replaceFrameImageData)}e.useReplaceFrameImageData=U;function H(){return te(G=>G.commonActions.replaceSubframeImageData)}e.useReplaceSubframeImageData=H;function q(){return te(G=>G.commonActions.modifyActiveFrameData)}e.useModifyActiveFrameData=q;function Y(){return te(G=>G.commonActions.modifyActiveFrameDuration)}e.useModifyActiveFrameDuration=Y;function ee(){return te(G=>G.commonActions.modifyActiveSequenceFrameDuration)}e.useModifyActiveSequenceFrameDuration=ee;function re(){return te(G=>{const{entryIndex:Q,frameIndex:he}=G.cursor;if(Q===null)throw new Error("No active entry.");return he===null?null:G.commonActions.getEntries()[Q].frames[he].duration})}e.useActiveFrameDuration=re;function ae(){return te(Qs(G=>{const{entryIndex:Q,frameIndex:he,subframeIndex:qe}=G.cursor;if(Q===null)throw new Error("No active entry.");if(he===null)throw new Error("No active frame.");if(qe===null)return null;const rt=G.commonActions.getEntries()[Q].frames[he].frameData;if(rt.kind==="single")throw new Error("Active frame doesn't have subframes.");const k=rt.layers[qe];return{width:k.width,height:k.height,xOffset:k.xOffset,yOffset:k.yOffset,transparencyIndex:k.transparencyIndex,unknown2:k.unknown2,unknown3:k.unknown3}}))}e.useShallowActiveSubframeDataProps=ae;function pe(){return te(G=>G.commonActions.modifyActiveSubframeData)}e.useModifyActiveSubframeData=pe;function ge(){return te(G=>{var Q;return(Q=G.commonActions.getActiveEntry())==null?void 0:Q.frames.length})}e.useOptionalActiveEntryFramesLength=ge;function ce(){return te(G=>{const{entryIndex:Q,frameIndex:he}=G.cursor;if(Q===null)throw new Error("No active entry.");if(he===null)throw new Error("No active frame.");const Ee=G.commonActions.getEntries()[Q].frames[he];if(Ee.frameData.kind==="single")throw new Error("Active frame doesn't have subframes.");return Ee.frameData.layers.length})}e.useActiveFrameLayersLength=ce;function ye(){return te(G=>{const Q=G.commonActions.getActiveFrame();return Q&&Q.frameData.kind==="multi"?Q.frameData.layers.length:null})}e.useOptionalActiveFrameLayersLength=ye;function Ze(){return te(G=>G.commonActions.convertActiveFrameToMultiFrame)}e.useConvertActiveFrameToMultiFrame=Ze;function At(){return te(G=>G.commonActions.convertActiveFrameToSingleFrame)}e.useConvertActiveFrameToSingleFrame=At;function se(){return te(G=>G.commonActions.deleteActiveFrame)}e.useDeleteActiveFrame=se;function Ae(){return te(G=>G.commonActions.deleteActiveSubframe)}e.useDeleteActiveSubframe=Ae;function be(){return te(G=>G.commonActions.createEntry)}e.useCreateEntry=be;function ke(){return te(G=>G.commonActions.renameActiveEntry)}e.useRenameActiveEntry=ke;function Qt(){return te(G=>G.commonActions.deleteActiveEntry)}e.useDeleteActiveEntry=Qt;function Bt(){return te(G=>G.commonActions.addFramesToActiveEntry)}e.useAddFramesToActiveEntry=Bt;function oe(){return te(G=>G.commonActions.addSubframesToActiveFrame)}e.useAddSubframesToActiveFrame=oe;function yt(){return te(G=>{const Q=G.commonActions.getActiveFrame();return Q===null?null:Q.frameData.kind})}e.useOptionalActiveFrameDataKind=yt;function wt(){return te(G=>{const Q=G.abstractActions.getCurrentGaf();return Q.kind==="from-file-single"?Q.fileName:Q.kind==="from-file-pair"?Q.data1555.fileName+" + "+Q.data4444.fileName:null})}e.useCurrentGafFileName=wt})(Z||(Z={}));function dC({close:e}){const t=Z.useActiveFrame(),n=Z.useActiveFrameIndex(),r=Z.useConvertActiveFrameToMultiFrame();if(t===null)return l.jsx("div",{className:"p-4",children:"No frame selected."});if(t.frameData.kind==="multi")return l.jsx("div",{className:"p-4",children:"Frame is already Multi-layered."});const i=n+1;return l.jsxs("div",{className:"flex flex-col p-4",children:[l.jsxs("div",{className:"mb-1",children:["Do you want to convert the active frame (#",i,") into a Multi-layered frame?"]}),l.jsxs("div",{className:"flex items-center text-sm font-bold text-slate-500 mb-4",children:[l.jsx(ie.Info,{className:"mr-1",size:20}),"Its existing frame data will become the first subframe of the new Multi-layered frame."]}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx(ne,{color:"success",onClick:()=>{r(!1),e()},children:"Convert"}),l.jsx(ne,{color:"default",onClick:e,children:"Cancel"})]})]})}function pC({close:e}){const t=Z.useActiveFrame(),n=Z.useActiveFrameIndex(),r=Z.useConvertActiveFrameToSingleFrame();if(t===null)return l.jsx("div",{className:"p-4",children:"No frame selected."});if(t.frameData.kind==="single")return l.jsx("div",{className:"p-4",children:"Frame is already Single-layered."});if(t.frameData.layers.length!==1)return l.jsxs("div",{className:"p-4",children:["Frame must have exactly ",l.jsx("b",{children:"1"})," subframe to be converted into a Single-layered frame.",l.jsx("br",{}),"Currently, it has ",l.jsx("b",{children:t.frameData.layers.length})," subframes."]});const i=n+1;return l.jsxs("div",{className:"flex flex-col p-4",children:[l.jsxs("div",{className:"mb-1",children:["Do you want to convert the active frame (#",i,") into a Single-layered frame?"]}),l.jsxs("div",{className:"flex items-center text-sm font-bold text-slate-500 mb-4",children:[l.jsx(ie.Info,{className:"mr-1",size:20}),"The frame data of its first subframe will become the frame data of the new Single-layered frame."]}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx(ne,{color:"success",onClick:()=>{r(!1),e()},children:"Convert"}),l.jsx(ne,{color:"default",onClick:e,children:"Cancel"})]})]})}function mC({close:e}){const t=Z.useActiveFrame(),n=Z.useDeleteActiveFrame();return t===null?l.jsx("div",{className:"p-4",children:"No frame selected."}):l.jsxs("div",{className:"flex flex-col p-4",children:[l.jsx("div",{children:"Are you sure you want to delete this frame?"}),t.frameData.kind==="multi"&&l.jsxs("div",{className:"mt-1 text-sm font-bold text-slate-500",children:["All of its subframes (",t.frameData.layers.length,") will also be deleted."]}),l.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[l.jsx(ne,{color:"danger",onClick:()=>{n(),alert("Deleted."),e()},children:"Delete"}),l.jsx(ne,{color:"default",onClick:e,children:"Cancel"})]})]})}function hC({close:e}){const t=Z.useActiveSubframe(),n=Z.useDeleteActiveSubframe();return t===null?l.jsx("div",{className:"p-4",children:"No subframe selected."}):l.jsxs("div",{className:"flex flex-col p-4",children:[l.jsx("div",{children:"Are you sure you want to delete this subframe?"}),l.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[l.jsx(ne,{color:"danger",onClick:()=>{n(),alert("Deleted."),e()},children:"Delete"}),l.jsx(ne,{color:"default",onClick:e,children:"Cancel"})]})]})}function Ww({inputRef:e,type:t,defaultValue:n,autoFocus:r}){const i=t==="number"?"font-mono":"";return l.jsx("input",{ref:e,className:`${i} border border-gray-300 px-0.5 py-0`,type:t,defaultValue:n,autoFocus:r})}var hc;(e=>{e.ENTRY_NAME_MAX_LENGTH=31,e.ENTRY_NAME_REGEX=/^[a-zA-Z0-9_]+$/;function t(n){return n.length===0?{kind:"invalid",reason:"Value is empty."}:n.length>e.ENTRY_NAME_MAX_LENGTH?{kind:"invalid",reason:"Value exceeds character limit."}:e.ENTRY_NAME_REGEX.test(n)?{kind:"valid"}:{kind:"invalid",reason:"Value contains invalid character."}}e.validateEntryName=t})(hc||(hc={}));function Hw({defaultValue:e,existingEntryNames:t,onSubmit:n,close:r}){const[i,o]=F.useState(null),a=F.useRef(null),s=F.useCallback(()=>{const c=a.current;if(c===null)return;const u=c.value.trim();if(u===e)return;const f=t.indexOf(u);if(f!==-1){o(`A sequence with this name already exists. (Sequence #${f+1})`);return}const d=hc.validateEntryName(u);if(d.kind==="invalid"){o(d.reason);return}o(null),n(u)},[n,e,t]);return l.jsxs("div",{children:[l.jsx("div",{className:"mb-2",children:"Sequence name:"}),l.jsxs("div",{className:"flex space-x-2 mb-2",children:[l.jsx(Ww,{type:"text",inputRef:a,defaultValue:e}),l.jsx(ne,{color:"success",onClick:s,children:"Submit"}),l.jsx(ne,{color:"default",onClick:r,children:"Cancel"})]}),l.jsxs("div",{className:"text-xs text-slate-600 bg-slate-200 font-semibold px-2 py-1 rounded",children:[l.jsx("div",{children:"Name can only contain ASCII letters, numbers or underscores."}),l.jsx("div",{children:"Name may not exceed 31 characters."})]}),l.jsx("div",{className:`${i===null?"invisible":""}`,children:l.jsx("span",{className:"text-red-600 text-xs",children:i??"(No errors)"})})]})}function De({children:e}){return l.jsx("div",{className:"p-4",children:e})}function vC({close:e}){const t=Z.useCreateEntry(),n=Z.useEntries().map(i=>i.name),r=F.useCallback(i=>{t(i),e()},[t,e]);return l.jsx(De,{children:l.jsx(Hw,{existingEntryNames:n,onSubmit:r,close:e})})}function gC({close:e}){const[t,n]=F.useState(!0),r=Z.useActiveEntry(),i=Z.useDeleteActiveEntry();F.useEffect(()=>{setTimeout(()=>n(!1),450)},[]);const o=F.useCallback(()=>{i(),e()},[i,e]);return r===null?l.jsx(De,{children:"No active sequence."}):l.jsxs(De,{children:[l.jsxs("div",{className:"mb-2",children:["Are you sure you want to ",l.jsx("span",{className:"font-bold text-red-500",children:"delete"})," ","this Sequence and all of its ",l.jsx("b",{children:r.frames.length})," Frames?"]}),l.jsxs("div",{className:"flex justify-end space-x-2 mb-2",children:[l.jsx(ne,{color:"danger",onClick:o,disabled:t,children:"Delete"}),l.jsx(ne,{color:"default",onClick:e,children:"Cancel"})]})]})}function xC({close:e}){const t=Z.useActiveEntry(),n=Z.useRenameActiveEntry(),r=Z.useEntries().map(o=>o.name),i=F.useCallback(o=>{n(o),e()},[n,e]);return t===null?l.jsx(De,{children:"No active sequence."}):l.jsx(De,{children:l.jsx(Hw,{defaultValue:t.name,existingEntryNames:r,onSubmit:i,close:e})})}function yC({onNext:e,onAbort:t}){return l.jsxs(De,{children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx(ie.Warning,{className:"text-orange-600 mr-4",size:32}),l.jsxs("div",{children:["This software is experimental, please make sure to ",l.jsx("b",{children:"back up"})," your original files",l.jsx("br",{}),"before proceeding."]})]}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx(ne,{color:"success",onClick:e,children:"Export"}),l.jsx(ne,{color:"default",onClick:t,children:"Cancel"})]})]})}function Pe({label:e,onClick:t,disabled:n,title:r}){const i=n?"text-sky-600 opacity-50":"text-sky-600 hover:text-sky-500 active:text-sky-500";return l.jsxs("button",{className:`${i} inline`,onClick:()=>!n&&t(),disabled:n,title:r,children:["[",e,"]"]})}function wC({result:e,onDownload:t}){if(e.kind==="taf-pair")return l.jsxs("div",{className:"flex flex-col items-start space-y-2",children:[l.jsx(Pe,{label:"Click to download the TAF 1555 file",onClick:()=>t("1555")}),l.jsx(Pe,{label:"Click to download the TAF 4444 file",onClick:()=>t("4444")})]});let n;return e.kind==="gaf"?n="GAF":n=e.subFormat==="taf_1555"?"TAF 1555":"TAF 4444",l.jsx("div",{children:l.jsx(Pe,{label:`Click to download the ${n}`,onClick:()=>t("solo")})})}function Vw({path:e}){return l.jsx("div",{className:"flex flex-wrap items-start",children:e.map(({node:t,pos:n},r)=>l.jsxs(F.Fragment,{children:[l.jsxs("div",{className:"",children:[t,n!==void 0&&l.jsxs(l.Fragment,{children:[" ","#",n+1]})]}),r<e.length-1&&l.jsx("div",{className:"mx-2",children:""})]},r))})}const bC={low:"Low",med:"Medium",high:"High"},kC={low:"text-yellow-600",med:"text-orange-600",high:"text-red-600"},gf="px-1.5 py-1 text-left align-top",xf="px-1.5 py-2 align-top";function Kw({errors:e}){return e.length===0?null:l.jsxs("div",{className:"px-4 py-2 bg-orange-50 border border-orange-100 rounded",children:[l.jsxs("div",{className:"flex items-center text-amber-700 font-bold mb-0.5",children:[l.jsx(ie.Warning,{className:"mr-1.5",size:24}),"Warnings:"]}),l.jsxs("table",{className:"text-xs -mx-2",style:{maxWidth:600},children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:gf,children:"Severity"}),l.jsx("th",{className:gf,children:"Message"}),l.jsx("th",{className:gf,children:"Location"})]})}),l.jsx("tbody",{children:e.map((t,n)=>l.jsxs("tr",{children:[l.jsx("td",{className:xf,style:{width:"1%"},children:l.jsx("span",{className:`${kC[t.severity]} font-semibold`,children:bC[t.severity]})}),l.jsx("td",{className:xf,style:{width:"65%"},children:t.message}),l.jsx("td",{className:xf,style:{width:"35%"},children:l.jsx(Vw,{path:t.path})})]},n))})]})]})}function EC({exporterResult:e,onDownload:t}){const n=e.kind==="taf-pair";let r;return e.nonFatalErrors.length===0?r=n?"If the downloads doesn't start automatically, try the links below:":"If the download doesn't start automatically, try the link below:":r=`The ${n?"downloads":"download"} didn't start automatically because warnings were generated when exporting. Please review the warnings and then click the ${n?"download links":"download link"} below if you want to ignore them:`,l.jsxs("div",{className:"flex flex-col space-y-4",children:[e.nonFatalErrors.length>0&&l.jsxs("div",{className:"border-b border-slate-200 pb-4",children:[l.jsxs("div",{className:"mb-2",children:[l.jsx("div",{className:"text-xs font-bold mb-0.5",children:"Some non-fatal errors have occurred."}),l.jsx("div",{className:"text-sm",style:{maxWidth:600},children:"While you can still export your result, it's highly recommended to fix these warnings and try to export again (specially if there are high-severity warnings)."})]}),l.jsx(Kw,{errors:e.nonFatalErrors})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex items-center text-emerald-700",children:[l.jsx(ie.CircleCheck,{className:"mr-1.5"}),l.jsx("div",{className:"font-bold",children:"Your file is ready!"})]}),l.jsx("div",{className:"text-sm",style:{maxWidth:600},children:r})]}),l.jsx(wC,{result:e,onDownload:t})]})]})}function SC({error:e,onAbort:t}){return l.jsxs("div",{className:"flex flex-col space-y-4",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-center font-semibold mb-1",children:"A fatal error has occurred."}),l.jsxs("div",{className:"text-center text-sm text-slate-500 font-semibold",children:["You cannot export the result file when a fatal error occurs.",l.jsx("br",{}),"Please fix the problems and try to export again."]})]}),l.jsxs("div",{className:"px-4 py-2 bg-red-50 border border-red-100 rounded",children:[l.jsxs("div",{className:"flex items-center text-red-700 font-bold mb-0.5",children:[l.jsx(ie.Error,{className:"mr-1.5",size:24}),"Fatal error:"]}),l.jsxs("div",{children:[l.jsxs("span",{className:"text-slate-700 font-semibold",children:["Message:"," "]}),l.jsx("span",{className:"text-slate-700",children:e.message})]}),e.path!==void 0&&l.jsxs("div",{className:"flex items-center mt-1",children:[l.jsx("div",{className:"mr-2 text-base font-semibold",children:"Location:"}),l.jsx(Vw,{path:e.path})]})]}),e.nonFatalErrors.length>0&&l.jsx(Kw,{errors:e.nonFatalErrors}),l.jsx("div",{className:"flex justify-center space-x-2",children:l.jsx(ne,{color:"default",onClick:t,children:"Close"})})]})}var Aa;(e=>{function t(n,r,i){if(typeof n=="string")return n;if(r.kind==="gaf"){if(n===null)return"new.gaf";throw new Error("'gaf' kind cannot have a exportFileName of type pair")}if(r.kind==="taf-solo"){if(n===null)return"new"+(r.subFormat==="taf_1555"?"_1555.taf":"_4444.taf");throw new Error("'taf-solo' kind cannot have a exportFileName of type pair")}if(i===void 0)throw new Error("'taf-pair' kind should have an export target");return n===null?i==="1555"?"new_1555.taf":"new_4444.taf":n[i]}e.getFileNameFor=t})(Aa||(Aa={}));function Vt({children:e}){return l.jsx("div",{className:"flex flex-col space-y-4 bg-slate-200 p-4",children:e})}function vc({children:e}){return l.jsx("div",{className:"text-center text-sm text-slate-600 font-bold px-0.5 mb-0.5",children:e})}function _t({children:e,header:t}){return l.jsxs("div",{className:"flex flex-col bg-white px-4 py-2 shadow",children:[t&&l.jsx(vc,{children:t}),l.jsx("div",{className:"flex flex-col space-y-4 py-2",children:e})]})}var Co;(e=>{function t(o,a){let s;o instanceof Uint8Array?s=new Blob([o],{type:"application/octet-stream"}):s=o;const c=window.URL.createObjectURL(s);return{fileName:a,download:()=>r(c,a),revoke:()=>window.URL.revokeObjectURL(c)}}e.createDownloadable=t;function n(o,a){const s=t(o,a);s.download(),setTimeout(()=>s.revoke(),500)}e.downloadAndRevoke=n;function r(o,a){const s=document.createElement("a");s.href=o,s.download=a,document.body.appendChild(s),s.style.display="none",s.click(),s.remove()}function i(o,a){const s=document.createElement("canvas"),c=s.getContext("2d");if(!c){console.error("Canvas context not supported");return}s.width=o.width,s.height=o.height,c.putImageData(o,0,0);const u=s.toDataURL("image/png",1);if(!u){console.error("Failed to convert canvas to data URL");return}const f=document.createElement("a");f.href=u,f.download=a,document.body.appendChild(f),f.click(),document.body.removeChild(f)}e.saveImageDataAsPng=i})(Co||(Co={}));var _C=Object.defineProperty,jC=(e,t,n)=>t in e?_C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ei=(e,t,n)=>(jC(e,typeof t!="symbol"?t+"":t,n),n);const CC=[1,4,5,8];var rs;(e=>{function t(n,r){if(r===1)return n===0||n===1;if(r===4)return n>=0&&n<16;if(r===5)return n>=0&&n<32;if(r===8)return n>=0&&n<256;throw new Error(`Unknown Bit Depth: ${r}`)}e.validateInteger=t})(rs||(rs={}));const IC=["rgba8888","argb1555","argb4444"];var gc;(e=>{e.FORMAT_TO_BITS={rgba8888:32,argb1555:16,argb4444:16},e.FORMAT_TO_BYTES={rgba8888:e.FORMAT_TO_BITS.rgba8888/8,argb1555:e.FORMAT_TO_BITS.argb1555/8,argb4444:e.FORMAT_TO_BITS.argb4444/8}})(gc||(gc={}));var hp;(e=>{function t(n,r,i){const o=gc.FORMAT_TO_BYTES[n.format],a=r*i*o,s=n.bytes.length;return a===s}e.validateDimensions=t})(hp||(hp={}));const vp=1,gp=2,AC=65792,NC=0,FC=1,TC=0,RC=Object.freeze(Object.defineProperty({__proto__:null,REPEAT_MASK:gp,TRANSPARENCY_MASK:vp,USUAL_ENTRY_UNKNOWN1:FC,USUAL_ENTRY_UNKNOWN2:TC,USUAL_HEADER_ID_VERSION:AC,USUAL_HEADER_UNKNOWN1:NC},Symbol.toStringTag,{value:"Module"}));function zr(e,t,n){return r=>{if(!rs.validateInteger(r,e))throw new Error(`Input value "${r}" with bit depth "${e}" is out of bounds.`);const i=n(r);if(!rs.validateInteger(i,t))throw new Error(`Output value "${i}" with bit depth "${t}" is out of bounds.`);return i}}const PC=zr(4,8,e=>Math.round(e*255/15)),DC=zr(8,4,e=>Math.round(e*15/255)),MC=zr(5,8,e=>Math.round(e*255/31)),OC=zr(8,5,e=>Math.round(e*31/255)),LC=zr(1,8,e=>e===0?0:255),BC=zr(8,1,e=>e<128?0:1),$C=zr(8,1,e=>e===255?1:0),UC=zr(8,1,e=>e===0?0:1),ki={round4to8:PC,round8to4:DC,round5to8:MC,round8to5:OC,round1to8:LC,round8to1:BC,opaqueOrZero8to1:$C,transparentOrOne8to1:UC},zC=(e,t,n,r)=>{const i=new Uint8Array(t*n*4),o=r.depthConvert1to8??ki.round1to8,a=r.depthConvert5to8??ki.round5to8;for(let s=0;s<t*n;s++){const c=s*2,u=s*4,f=e.bytes[c+0],d=e.bytes[c+1]<<8|f,p=(d&32768)>>15,h=(d&31744)>>10,g=(d&992)>>5,w=(d&31)>>0,_=o(p),y=a(h),x=a(g),E=a(w);i[u+0]=y,i[u+1]=x,i[u+2]=E,i[u+3]=_}return{format:"rgba8888",bytes:i}},GC=(e,t,n,r)=>{const i=new Uint8Array(t*n*4),o=r.depthConvert4to8??ki.round4to8;for(let a=0;a<t*n;a++){const s=a*2,c=a*4,u=e.bytes[s+0],f=e.bytes[s+1]<<8|u,d=(f&61440)>>12,p=(f&3840)>>8,h=(f&240)>>4,g=(f&15)>>0,w=o(d),_=o(p),y=o(h),x=o(g);i[c+0]=_,i[c+1]=y,i[c+2]=x,i[c+3]=w}return{format:"rgba8888",bytes:i}},WC=(e,t,n,r)=>{const i=new Uint8Array(t*n*2),o=r.depthConvert8to5??ki.round8to5,a=r.depthConvert8to1??ki.transparentOrOne8to1;for(let s=0;s<t*n;s++){const c=s*4,u=s*2,f=e.bytes[c+0],d=e.bytes[c+1],p=e.bytes[c+2],h=e.bytes[c+3];let g=o(f),w=o(d),_=o(p);const y=a(h);y===0&&(g=0,w=0,_=0);const x=y<<15|g<<10|w<<5|_;i[u+0]=x&255,i[u+1]=x>>8&255}return{format:"argb1555",bytes:i}},HC=(e,t,n,r)=>{const i=new Uint8Array(t*n*2),o=r.depthConvert8to4??ki.round8to4;for(let a=0;a<t*n;a++){const s=a*4,c=a*2,u=e.bytes[s+0],f=e.bytes[s+1],d=e.bytes[s+2],p=e.bytes[s+3],h=o(u),g=o(f),w=o(d),_=o(p)<<12|h<<8|g<<4|w;i[c+0]=_&255,i[c+1]=_>>8&255}return{format:"argb4444",bytes:i}},VC=Object.freeze(Object.defineProperty({__proto__:null,DepthConverters:ki,convertARGB1555ToRGBA8888:zC,convertARGB4444ToRGBA8888:GC,convertRGBA8888ToARGB1555:WC,convertRGBA8888ToARGB4444:HC},Symbol.toStringTag,{value:"Module"}));var jt;(e=>{function t(f){return new DataView(f.buffer,f.byteOffset,f.byteLength)}e.createView=t;function n(f,d,p){return new DataView(f.buffer,f.byteOffset+d,p)}e.createViewSlice=n;function r(f,d,p){const h=f.buffer.slice(f.byteOffset+d,f.byteOffset+d+p);return new Uint8Array(h)}e.copyBytes=r;function i(f,d,p){return f.slice(f.byteOffset+d,f.byteOffset+d+p)}e.createSlice=i;const o=new TextDecoder("ascii");function a(f,d){const p=new DataView(f.buffer,f.byteOffset,f.byteLength);let h=0;for(let w=0;w<d&&(h=w,p.getUint8(w)!==0);w++);const g=new Uint8Array(p.buffer,p.byteOffset,h);return o.decode(g)}e.readString=a;const s=new TextEncoder;function c(f,d){const p=s.encode(f);if(p.length===d)return p[d-1]=0,p;if(p.length>d){const g=p.slice(0,d);return g[d-1]=0,console.warn("String is being cut off!"),console.warn(`Before: ${o.decode(p)}`),console.warn(`After: ${o.decode(g)}`),g}const h=new Uint8Array(d);return h.set(p,0),h[d-1]=0,h}e.writeString=c;function u(f,d){const p=Math.pow(256,d);if(f>=p||f<0)throw new Error(`Number ${f} cannot fit into ${d} bytes.`);const h=new Uint8Array(d);for(let g=0;g<d;g++)h[g]=f>>g*8&255;return h}e.intToBytesLE=u})(jt||(jt={}));const xc=40,th={read:(e,t)=>({frames:e.getUint16(t+0,!0),unknown1:e.getUint16(t+2,!0),unknown2:e.getUint32(t+4,!0),name:jt.copyBytes(e,t+8,32)}),write:(e,t,n)=>{e.setUint16(t+0,n.frames,!0),e.setUint16(t+2,n.unknown1,!0),e.setUint32(t+4,n.unknown2,!0);for(let r=0;r<32;r++)e.setUint8(t+8+r,n.name[r])}},nh=24,yc={read:(e,t)=>({width:e.getUint16(t+0,!0),height:e.getUint16(t+2,!0),xPos:e.getInt16(t+4,!0),yPos:e.getInt16(t+6,!0),transparencyIdx:e.getUint8(t+8),compressed:e.getUint8(t+9),framePointers:e.getUint16(t+10,!0),unknown2:e.getUint32(t+12,!0),ptrFrameData:e.getUint32(t+16,!0),unknown3:e.getUint32(t+20,!0)}),write:(e,t,n)=>{e.setUint16(t+0,n.width,!0),e.setUint16(t+2,n.height,!0),e.setInt16(t+4,n.xPos,!0),e.setInt16(t+6,n.yPos,!0),e.setUint8(t+8,n.transparencyIdx),e.setUint8(t+9,n.compressed),e.setUint16(t+10,n.framePointers,!0),e.setUint32(t+12,n.unknown2,!0),e.setUint32(t+16,n.ptrFrameData,!0),e.setUint32(t+20,n.unknown3,!0)}},wc=8,rh={read:(e,t)=>({ptrFrameData:e.getUint32(t+0,!0),duration:e.getUint32(t+4,!0)}),write:(e,t,n)=>{e.setUint32(t+0,n.ptrFrameData,!0),e.setUint32(t+4,n.duration,!0)}},Eu=12,ih={read:(e,t)=>({idVersion:e.getUint32(t+0,!0),entries:e.getUint32(t+4,!0),unknown1:e.getUint32(t+8,!0)}),write:(e,t,n)=>{e.setUint32(t+0,n.idVersion,!0),e.setUint32(t+4,n.entries,!0),e.setUint32(t+8,n.unknown1,!0)}},KC=Object.freeze(Object.defineProperty({__proto__:null,get BufferUtils(){return jt},ENTRY_STRUCT_IO:th,ENTRY_STRUCT_SIZE:xc,FRAME_DATA_STRUCT_IO:yc,FRAME_DATA_STRUCT_SIZE:nh,FRAME_STRUCT_IO:rh,FRAME_STRUCT_SIZE:wc,HEADER_STRUCT_IO:ih,HEADER_STRUCT_SIZE:Eu},Symbol.toStringTag,{value:"Module"})),ZC=e=>{let t=e;Array.isArray(t)&&(t=new Uint8Array(t));const n=jt.createView(t),r=[],i={data:n,map:r},o=qC(i),a={idVersion:o.idVersion,unknown1:o.unknown1};return{gaf:{entries:YC(i,Eu,o.entries),header:a},map:r}};function qC(e){const t=ih.read(e.data,0);return e.map.push({label:"header",content:t,offset:0,length:Eu}),t}function YC(e,t,n){const r=[];for(let i=0;i<n;i++){const o=t+i*4,a=e.data.getUint32(o,!0);e.map.push({label:"entry_pointer",content:a,offset:o,length:4});const s=XC(e,a);r.push(s)}return r}function XC(e,t){const n=th.read(e.data,t);e.map.push({label:"entry",content:n,offset:t,length:xc});const r=jt.readString(n.name,32),i=[],o=t+xc;for(let a=0;a<n.frames;a++){const s=o+a*wc,c=rh.read(e.data,s);e.map.push({label:"frame",content:c,offset:s,length:wc});const u=Zw(e,c.ptrFrameData);i.push({frameData:u,duration:c.duration})}return{frames:i,name:r,unknown1:n.unknown1,unknown2:n.unknown2}}const QC=65280;function Zw(e,t){const n=yc.read(e.data,t);e.map.push({label:"frame_data",content:n,offset:t,length:nh});const r={width:n.width,height:n.height,xOffset:n.xPos,yOffset:n.yPos,transparencyIndex:n.transparencyIdx,unknown2:n.unknown2,unknown3:n.unknown3};if(n.framePointers===0||n.framePointers===QC){const o=JC(e,n);return{...r,kind:"single",layerData:o}}const i=[];for(let o=0;o<n.framePointers;o++){const a=n.ptrFrameData+o*4,s=e.data.getUint32(a,!0);e.map.push({label:"sub_frame_data_pointer",content:s,offset:a,length:4});const c=Zw(e,s);if(c.kind==="multi")throw new Error("MultiLayer frame data cannot contain other MultiLayer frame data.");i.push(c)}return{...r,kind:"multi",layers:i}}function JC(e,t){const{compressed:n,ptrFrameData:r,width:i,height:o,transparencyIdx:a}=t;if(n===0)return eI(e,r,i,o);if(n===1)return tI(e,r,i,o,a);if(n===4)return cg(e,r,i,o,"argb4444");if(n===5)return cg(e,r,i,o,"argb1555");throw new Error(`Unknown compression flag: ${n}`)}function eI(e,t,n,r){const i=jt.copyBytes(e.data,t,n*r);return e.map.push({label:"uncompressed_palette_indices",content:Su,offset:t,length:n*r}),{kind:"palette-idx",decompressed:!1,indices:i}}function tI(e,t,n,r,i){const{data:o}=e,a=t;let s=-1;const c=p=>(s=Math.max(s,p+1),o.getUint16(p,!0)),u=p=>(s=Math.max(s,p),o.getUint8(p)),f=new Uint8Array(n*r);f.fill(i);const d=(p,h,g)=>{f[p+h*n]=g};for(let p=0;p<r;p++){const h=c(t);t+=2;let g=0,w=0;for(;g<h;){const _=u(t+g++);if((_&vp)===vp)w+=_>>1;else if((_&gp)===gp){let y=(_>>2)+1;for(;y--;)d(w++,p,u(t+g));g++}else{let y=(_>>2)+1;for(;y--;)d(w++,p,u(t+g++))}}t+=h}return s!==-1&&e.map.push({label:"compressed_palette_indices",content:Su,offset:a,length:s-a+1}),{kind:"palette-idx",decompressed:!0,indices:f}}function cg(e,t,n,r,i){const o=jt.copyBytes(e.data,t,n*r*2);return e.map.push({label:"raw_colors",content:Su,offset:t,length:n*r*2}),{kind:"raw-colors",colorData:{bytes:o,format:i}}}const Su=Symbol(),nI=Object.freeze(Object.defineProperty({__proto__:null,RawBytes:Su},Symbol.toStringTag,{value:"Module"})),rI=Object.freeze(Object.defineProperty({__proto__:null,Mapping:nI,readFromBuffer:ZC},Symbol.toStringTag,{value:"Module"}));function iI(e,t,n){const r=new qw;let i=0;for(;;){const o=e.subarray(i,i+t);if(i+=o.length,o.length===0)break;if(o.length!==t)throw new Error("Not enough bytes for next row.");const a=oI(o,n);r.writeUint16LE(a.length),r.writeBytes([...a])}return new Uint8Array(r.data)}function oI(e,t){const n=new qw;let r=[],i=ug(e);if(i.value===t&&i.cursor===e.length)return n.toUint8Array();for(;i.runLength>0;){if(i.value===t){if(yf(r,n),r=[],i.runLength=aI(i.runLength,n),i.runLength>0)continue}else if(r.length===0&&i.runLength===2||i.runLength>=3){if(yf(r,n),r=[],i.runLength=sI(i.value,i.runLength,n),i.runLength>0)continue}else for(let o=0;o<i.runLength;o++)r.push(i.value);i=ug(e,i.cursor)}return yf(r,n),n.toUint8Array()}function yf(e,t){for(let n=0;n<e.length;n+=64){const r=Math.min(64,e.length-n),i=oh(r-1<<2);t.writeByte(i);for(let o=0;o<r;o++)t.writeByte(e[n+o])}}function aI(e,t){const n=Math.min(e,127),r=oh(n<<1|1);return t.writeByte(r),e-n}function sI(e,t,n){const r=Math.min(t,64),i=oh(r-1<<2|2);return n.writeByte(i),n.writeByte(e),t-r}function ug(e,t=0){if(t===e.length)return{value:0,runLength:0,cursor:t};const n=e[t];t+=1;let r=1;for(t;t<e.length;t++){if(e[t]!==n)return{value:n,runLength:r,cursor:t};r++}return{value:n,runLength:r,cursor:t}}function oh(e){return e&255}function lI(e){if(e<0)throw new Error(`Invalid unsigned integer: "${e}".`);if(e>65535)throw new Error(`Number "${e}" doesn't fit into 16-bits (2 bytes). Your image is possibly too large?`)}class qw{constructor(t=[]){this._data=t}get data(){return this._data}writeByte(t){this._data.push(t)}writeUint16LE(t){lI(t),this._data.push(t&255),this._data.push(t>>8&255)}writeBytes(t){this._data.push(...t)}toUint8Array(){return new Uint8Array(this._data)}}class cI{constructor(){ei(this,"layerDataCache",{}),ei(this,"layerDataCacheKeys",[])}set(t,n,r){this.layerDataCacheKeys.includes(t)?console.warn(`ERROR: Overriding layerDataCache at position: ${t}`):this.layerDataCacheKeys.push(t),this.layerDataCache[t]={layerData:n,metadata:r}}get(t,n){for(const r of this.layerDataCacheKeys){const i=this.layerDataCache[r];if(i===void 0)throw new Error("Something went very wrong (in the code).");if(n===i.metadata&&this.compareLayerData(t,i.layerData))return{offset:r,layerData:i.layerData}}}compareLayerData(t,n){return t.kind==="palette-idx"?n.kind!=="palette-idx"?!1:this.compareBytes(t.indices,n.indices):n.kind!=="raw-colors"?!1:this.compareBytes(t.colorData.bytes,n.colorData.bytes)}compareBytes(t,n){if(t.length>n.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}}class uI{constructor(){ei(this,"segments",[]),ei(this,"totalSize",0),ei(this,"format"),ei(this,"rawColorsFormat"),ei(this,"layerDataCache",new cI)}pushSegment(t){this.segments.push(t),this.totalSize+=t.length}getCurrentSize(){return this.totalSize}createFinalBuffer(){const t=new Uint8Array(this.totalSize);let n=0;return this.segments.forEach(r=>{t.set(r,n),n+=r.length}),t}validateFormat(t){if(this.format===void 0){this.format=t;return}if(this.format!==t)throw new Error(`Current format doesn't match with the format of the existing context. 
Expected: "${this.format}"; Got: "${t}"`)}validateRawColorsFormat(t){if(this.rawColorsFormat===void 0){this.rawColorsFormat=t;return}if(this.rawColorsFormat!==t)throw new Error(`Current color format doesn't match with the color format of the existing context. 
Expected: "${this.format}"; Got: "${t}"`)}}const fI=e=>{const t=new uI;return dI(t,e),pI(t,e.entries),{buffer:t.createFinalBuffer()}};function dI(e,t){const n=new Uint8Array(Eu),r=jt.createView(n);ih.write(r,0,{idVersion:t.header.idVersion,unknown1:t.header.unknown1,entries:t.entries.length}),e.pushSegment(n)}function pI(e,t){const n=t.length*4,r=new Uint8Array(n);e.pushSegment(r);const i=jt.createView(r);for(let o=0;o<t.length;o++){const a=t[o],s=mI(e,a);i.setUint32(o*4,s,!0)}}function mI(e,t){const n=new Uint8Array(xc),r=jt.createView(n),i=jt.writeString(t.name,32);th.write(r,0,{frames:t.frames.length,unknown1:t.unknown1,unknown2:t.unknown2,name:i});const o=e.getCurrentSize();return e.pushSegment(n),hI(e,t),o}function hI(e,t){const n=[];for(let r=0;r<t.frames.length;r++){const i=new Uint8Array(wc);e.pushSegment(i),n.push(i)}for(let r=0;r<t.frames.length;r++){const i=t.frames[r],o=n[r],a=Yw(e,i.frameData),s=jt.createView(o);rh.write(s,0,{ptrFrameData:a,duration:i.duration})}}function Yw(e,t){const n=new Uint8Array(nh),r=jt.createView(n),i=e.getCurrentSize();e.pushSegment(n);const o={width:t.width,height:t.height,xPos:t.xOffset,yPos:t.yOffset,transparencyIdx:t.transparencyIndex,unknown2:t.unknown2,unknown3:t.unknown3};if(t.kind==="single"){const{ptrFrameData:d,compressionFlag:p}=vI(e,t),h={...o,compressed:p,framePointers:0,ptrFrameData:d};return yc.write(r,0,h),i}const a=e.getCurrentSize(),s={...o,compressed:0,framePointers:t.layers.length,ptrFrameData:a};yc.write(r,0,s);const c=t.layers.length*4,u=new Uint8Array(c);e.pushSegment(u);const f=jt.createView(u);for(let d=0;d<t.layers.length;d++){const p=t.layers[d],h=Yw(e,p);f.setUint32(d*4,h,!0)}return i}function vI(e,t){return t.layerData.kind==="palette-idx"?gI(e,t.layerData,t.width,t.transparencyIndex):xI(e,t.layerData)}function gI(e,t,n,r){e.validateFormat("palette-idx");const i=e.layerDataCache.get(t,n);if(i!==void 0&&i.layerData.kind==="palette-idx")return{ptrFrameData:i.offset,compressionFlag:i.layerData.decompressed?1:0};const o=e.getCurrentSize(),a=t.decompressed?1:0;if(a===1){const s=iI(t.indices,n,r);e.pushSegment(s)}else e.pushSegment(t.indices);return e.layerDataCache.set(o,t,n),{ptrFrameData:o,compressionFlag:a}}function xI(e,t){e.validateFormat("raw-colors"),e.validateRawColorsFormat(t.colorData.format);const n=t.colorData.format==="argb4444"?4:5,r=e.layerDataCache.get(t);if(r!==void 0)return{ptrFrameData:r.offset,compressionFlag:n};const i=e.getCurrentSize();return e.pushSegment(t.colorData.bytes),e.layerDataCache.set(i,t),{ptrFrameData:i,compressionFlag:n}}const yI=Object.freeze(Object.defineProperty({__proto__:null,writeToBuffer:fI},Symbol.toStringTag,{value:"Module"})),kt=Object.freeze(Object.defineProperty({__proto__:null,BIT_DEPTHS:CC,get BitDepth(){return rs},COLOR_DATA_FORMATS:IC,get ColorData(){return hp},get ColorDataFormat(){return gc},ColorUtils:VC,Constants:RC,Internals:KC,Reader:rI,Writer:yI},Symbol.toStringTag,{value:"Module"})),wI=e=>{try{return{kind:"ok",ok:{kind:"single",buffer:kt.Writer.writeToBuffer(e).buffer}}}catch(t){return{kind:"err",err:{errorMsg:t+""}}}},bI=(e,t)=>{try{return{kind:"ok",ok:{kind:"taf-pair",buffer1555:kt.Writer.writeToBuffer(e).buffer,buffer4444:kt.Writer.writeToBuffer(t).buffer}}}catch(n){return{kind:"err",err:{errorMsg:n+""}}}};var cn;(e=>{function t(r){return new Promise((i,o)=>{setTimeout(()=>{r().then(i).catch(o)},200)})}e.defer=t;function n(r,i){return t(()=>Promise.all(r.map(i)))}e.deferMap=n})(cn||(cn={}));function ah({exportFileName:e,virtualGaf:t,exporter:n,onAbort:r}){const[i,o]=F.useState(),[a,s]=F.useState(),[c,u]=F.useState(!1),[f,d]=F.useState({});F.useEffect(()=>()=>{const y=Object.values(f);console.log(`Revoking downloadables... (${y.length})`);for(const x of y)x.revoke()});const p=F.useCallback((y,x,E)=>{let b=f[E];b===void 0&&(console.log(`Caching downloadable now for: ${x}`),b=Co.createDownloadable(y,x),d(S=>({...S,[E]:b}))),b.download()},[f]),h=F.useCallback((y,x,E)=>{if(x.kind==="single"){if(E!==null&&E!=="solo")throw new Error("This should not be possible.");const{buffer:b}=x,S=Aa.getFileNameFor(e,y);p(b,S,"solo")}else{if(E==="solo")throw new Error("This should not be possible.");if(E==="1555"||E===null){const b=x.buffer1555,S=Aa.getFileNameFor(e,y,"1555");p(b,S,"1555")}if(E==="4444"||E===null){const b=x.buffer4444,S=Aa.getFileNameFor(e,y,"4444");p(b,S,"4444")}}},[p,e]),g=F.useCallback(y=>{if(i===void 0||i.kind==="err")throw console.error(i==null?void 0:i.err),new Error("Cannot download.");if(a===void 0||a.kind==="err")throw console.error(a==null?void 0:a.err),new Error("Cannot download.");h(i.ok,a.ok,y)},[i,a,h]),w=F.useCallback(y=>{cn.defer(async()=>{if(y.kind==="taf-pair"){const{taf1555:b,taf4444:S}=y;return bI(b,S)}const E=y.kind==="gaf"?y.gaf:y.taf;return wI(E)}).then(E=>{if(E.kind==="err"){s(E);return}const b=E.ok;s({kind:"ok",ok:b}),y.nonFatalErrors.length===0&&h(y,b,null)}).catch(E=>{alert("Unexpected error."),console.error(E),r()})},[r,h]),_=F.useCallback(()=>{c||(u(!0),cn.defer(async()=>n.export(t)).then(y=>{u(!1),o(y),y.kind==="ok"&&w(y.ok)}).catch(y=>{alert("Unexpected error."),console.error(y),r()}))},[c,t,n,r,w]);return i===void 0?l.jsx(yC,{onNext:_,onAbort:r}):c?l.jsx(De,{children:"Exporting..."}):i.kind==="err"?l.jsx(Vt,{children:l.jsx(_t,{children:l.jsx(SC,{error:i.err,onAbort:r})})}):a===void 0?l.jsx(De,{children:"Writing buffer with LibGaf..."}):a.kind==="err"?l.jsxs(De,{children:[l.jsx("div",{className:"mb-1",children:"An error occured while writing the file(s) buffer(s) using LibGaf."}),l.jsx("div",{className:"text-xs font-mono",children:a.err.errorMsg})]}):l.jsx(Vt,{children:l.jsx(_t,{children:l.jsx(EC,{exporterResult:i.ok,onDownload:g})})})}var on;(e=>{e.MIN_I16=-32768,e.MAX_I16=32767,e.MAX_U16=65535,e.MIN_I32=-2147483648,e.MAX_I32=2147483647,e.MAX_U32=4294967295,e.INT_TYPES=["u8","i8","u16","i16","u32","i32"],e.INT_TYPE_TO_SIZE={u8:8,i8:8,u16:16,i16:16,u32:32,i32:32},e.INT_TYPE_TO_SIGNEDNESS={u8:!1,i8:!0,u16:!1,i16:!0,u32:!1,i32:!0};function t(n,r){let i,o;switch(r){case"u8":i=0,o=255;break;case"i8":i=-128,o=127;break;case"u16":i=0,o=e.MAX_U16;break;case"i16":i=e.MIN_I16,o=e.MAX_I16;break;case"u32":i=0,o=e.MAX_U32;break;case"i32":i=e.MIN_I32,o=e.MAX_I32;break;default:throw new Error("Invalid integer type.")}return n>=i&&n<=o}e.validateInt=t})(on||(on={}));var en;(e=>{function t(i,o){const a=i.toString(16).padStart(o/4,"0").toUpperCase();return`${i} (0x${a})`}e.printInt=t;function n(i,o,a,s,c,u){if(o!==a){const f=on.INT_TYPE_TO_SIZE[s],d=on.INT_TYPE_TO_SIGNEDNESS[s]?"signed":"unsigned";u.push({path:c,message:`${i} should normally be: ${t(a,f)}`,severity:"med"}),on.validateInt(o,s)||u.push({path:c,message:`${i} field won't fit into a ${d} ${f}-bit integer.`,severity:"high"})}}e.validateIntValueAndSize=n;function r(i,o,a,s,c){const u=on.INT_TYPE_TO_SIZE[a],f=on.INT_TYPE_TO_SIGNEDNESS[a]?"signed":"unsigned";on.validateInt(o,a)||c.push({path:s,message:`${i} field won't fit into a ${f} ${u}-bit integer.`,severity:"high"})}e.validateIntSize=r})(en||(en={}));const Js=kt.Constants;class Xw{build(t,n){const r=[],i=[],o=this.buildEntries(t.entries,r,i);return o.kind==="err"?o:{kind:"ok",ok:{actualResult:{header:n??{idVersion:Js.USUAL_HEADER_ID_VERSION,unknown1:Js.USUAL_HEADER_UNKNOWN1},entries:o.ok},errors:i}}}buildEntries(t,n,r){if(t.length===0)return{kind:"err",err:{path:n,message:"List of sequence is empty.",nonFatalErrors:r}};const i=[];for(let o=0;o<t.length;o++){const a=t[o],s=[...n,{node:"Entry",pos:o}],c=hc.validateEntryName(a.name);c.kind==="invalid"&&r.push({path:n,message:`Name is invalid. Reason: ${c.reason}`,severity:"med"}),en.validateIntValueAndSize("Unknown1",a.unknown1,Js.USUAL_ENTRY_UNKNOWN1,"u16",n,r),en.validateIntValueAndSize("Unknown2",a.unknown2,Js.USUAL_ENTRY_UNKNOWN2,"u32",n,r);const u=this.buildFrames(a.frames,s,r);if(u.kind==="err")return u;i.push({name:a.name,unknown1:a.unknown1,unknown2:a.unknown2,frames:u.ok})}return{kind:"ok",ok:i}}buildFrames(t,n,r){if(t.length===0)return{kind:"err",err:{path:n,message:"List of frames is empty.",nonFatalErrors:r}};const i=[];for(let o=0;o<t.length;o++){const a=t[o],s=[...n,{node:"Frame",pos:o}];en.validateIntSize("Duration",a.duration,"u32",n,r);const c=this.buildFrameData(a.frameData,s,r);if(c.kind==="err")return c;i.push({duration:a.duration,frameData:c.ok})}return{kind:"ok",ok:i}}buildFrameData(t,n,r){const i=[...n,{node:"Frame Data"}];return t.kind==="single"?this.buildFrameDataSingleLayer(t,i,r):this.buildFrameDataMultiLayer(t,i,r)}buildFrameDataSingleLayer(t,n,r){const i=this.buildBaseFrameData(t,n,r);if(i.kind==="err")return i;const o=this.buildLayerData(t,n,r);return o.kind==="err"?o:{kind:"ok",ok:{...i.ok,kind:"single",layerData:o.ok}}}buildFrameDataMultiLayer(t,n,r){const i=this.buildBaseFrameData(t,n,r);if(i.kind==="err")return i;if(t.layers.length===0)return{kind:"err",err:{path:n,message:"Multi-layered frame cannot have an empty list of subframes.",nonFatalErrors:r}};const o=[];for(let a=0;a<t.layers.length;a++){const s=t.layers[a],c=[...n,{node:"Subframe",pos:a}],u=this.buildFrameDataSingleLayer(s,c,r);if(u.kind==="err")return u;o.push(u.ok)}return{kind:"ok",ok:{...i.ok,kind:"multi",layers:o}}}buildBaseFrameData(t,n,r){const{width:i,height:o,xOffset:a,yOffset:s,transparencyIndex:c,unknown2:u,unknown3:f}=t;return en.validateIntSize("Width",i,"u16",n,r),en.validateIntSize("Height",o,"u16",n,r),en.validateIntSize("X offset",a,"i16",n,r),en.validateIntSize("Y offset",s,"i16",n,r),en.validateIntSize("Transparency index",c,"u8",n,r),en.validateIntSize("Unknown2",u,"u32",n,r),en.validateIntSize("Unknown3",f,"u32",n,r),{kind:"ok",ok:{width:i,height:o,xOffset:a,yOffset:s,transparencyIndex:c,unknown2:u,unknown3:f}}}}class kI extends Xw{buildLayerData(t,n,r){const i=t.layerData.imageResource.paletteIndices,o=t.width*t.height;if(i.length!==o){const a=`Number of palette indices (${i.length}) doesn't match with the frame dimensions (${t.width} x ${t.height}).`;return{kind:"err",err:{path:n,message:a,nonFatalErrors:r}}}for(let a=0;a<i.length;a++){const s=i[a];if(s<0||s>255)return{kind:"err",err:{path:n,message:`Invalid byte "${s}" at index ${a} of the palette.`,nonFatalErrors:r}}}return{kind:"ok",ok:{kind:"palette-idx",decompressed:t.layerData.compress,indices:i}}}}class EI{export(t,n){const i=new kI().build(t,n);return i.kind==="err"?i:{kind:"ok",ok:{kind:"gaf",gaf:i.ok.actualResult,nonFatalErrors:i.ok.errors}}}}function SI({exportFileName:e,virtualGaf:t,onAbort:n,onEnded:r}){const i=new EI;return l.jsx(ah,{exportFileName:e,virtualGaf:t,exporter:i,onAbort:n})}class Qw extends Xw{exportLayerDataForFormat(t,n,r,i,o,a){const s=i.colorData,c=t==="taf_1555"?"argb1555":"argb4444";if(s.format!==c){const d=`Wrong image color data format. Expected: ${c}; Got: ${s.format}`;return{kind:"err",err:{path:o,message:d,nonFatalErrors:a}}}const u=s.bytes.length,f=n*r;if(u!==f*2){const d=`Number of image pixels (${u*2}) doesn't match with the frame dimensions (${n} x ${r}).`;return{kind:"err",err:{path:o,message:d,nonFatalErrors:a}}}return{kind:"ok",ok:{kind:"raw-colors",colorData:s}}}}class _I extends Qw{buildLayerData(t,n,r){const i=this.exportLayerDataForFormat("taf_1555",t.width,t.height,t.layerData.imageResource1555,[...n,{node:"1555"}],r),o=this.exportLayerDataForFormat("taf_4444",t.width,t.height,t.layerData.imageResource4444,[...n,{node:"4444"}],r);return i.kind==="err"?i:o.kind==="err"?o:{kind:"ok",ok:{data1555:i.ok,data4444:o.ok}}}}class jI{export(t,n){const i=new _I().build(t,n);if(i.kind==="err")return i;const{taf1555:o,taf4444:a}=CI(i.ok.actualResult),s=i.ok.errors;return{kind:"ok",ok:{kind:"taf-pair",taf1555:o,taf4444:a,nonFatalErrors:s}}}}function CI(e){const t=[],n=[];for(const o of e.entries){const a=[],s=[];for(const c of o.frames){const{frameData1555:u,frameData4444:f}=II(c.frameData);a.push({...c,frameData:u}),s.push({...c,frameData:f})}t.push({...o,frames:a}),n.push({...o,frames:s})}const r={entries:t,header:e.header},i={entries:n,header:e.header};return{taf1555:r,taf4444:i}}function II(e){if(e.kind==="single")return fg(e);const t=e.layers.map(n=>fg(n));return{frameData1555:{...e,layers:t.map(n=>n.frameData1555)},frameData4444:{...e,layers:t.map(n=>n.frameData4444)}}}function fg(e){const t={...e,layerData:e.layerData.data1555},n={...e,layerData:e.layerData.data4444};return{frameData1555:t,frameData4444:n}}function AI({exportFileName:e,virtualGaf:t,onAbort:n,onEnded:r}){const i=new jI;return l.jsx(ah,{exportFileName:e,virtualGaf:t,exporter:i,onAbort:n})}class NI extends Qw{constructor(t){super(),this.subFormat=t}buildLayerData(t,n,r){return this.exportLayerDataForFormat(this.subFormat,t.width,t.height,t.layerData.imageResource,n,r)}}class FI{constructor(t){this.subFormat=t}export(t,n){const i=new NI(this.subFormat).build(t,n);return i.kind==="err"?i:{kind:"ok",ok:{kind:"taf-solo",subFormat:this.subFormat,taf:i.ok.actualResult,nonFatalErrors:i.ok.errors}}}}var Io;(e=>{function t(){return lg(r=>r.currentTaf)}e.useCurrentTaf=t;function n(){return lg(r=>r.subFormat)}e.useSubFormat=n})(Io||(Io={}));function TI({exportFileName:e,virtualGaf:t,onAbort:n,onEnded:r}){const i=Io.useSubFormat(),o=new FI(i);return l.jsx(ah,{exportFileName:e,virtualGaf:t,exporter:o,onAbort:n})}function RI({onAbort:e,onEnded:t}){const n=Z.useCurrentGaf(),r=Z.useFormat();let i;return n.kind==="blank"?i=null:n.kind==="from-file-single"?i=n.fileName:i={1555:n.data1555.fileName,4444:n.data4444.fileName},r==="gaf"?l.jsx(SI,{virtualGaf:n.virtualGaf,exportFileName:i,onAbort:e,onEnded:t}):r==="taf-solo"?l.jsx(TI,{virtualGaf:n.virtualGaf,exportFileName:i,onAbort:e,onEnded:t}):l.jsx(AI,{virtualGaf:n.virtualGaf,exportFileName:i,onAbort:e,onEnded:t})}function PI({close:e}){return l.jsx("div",{style:{minWidth:600},children:l.jsx(RI,{onAbort:e,onEnded:e})})}var bc;(e=>{function t({prefix:n,suffix:r,ext:i,entryNameOrIndex:o,frameIndex:a,subframeIndex:s}){n??(n=""),r??(r="");const c=typeof o=="number"?(o+1).toString().padStart(3,"0"):o,u=(a+1).toString().padStart(3,"0");if(s===void 0)return`${n}${c}.${u}${r}.${i}`;{const f=(s+1).toString().padStart(3,"0");return`${n}${c}.${u}.${f}${r}.${i}`}}e.nameFrameOrSubframe=t})(bc||(bc={}));var io;(e=>{function t(r){const i=r.lastIndexOf(".");return i===-1?r:r.substring(0,i)}e.fileNameWithoutExtension=t;function n(r,i){const o=Math.min(r.length,i.length);for(let a=0;a<o;a++)if(r[a]!==i[a])return r.substring(0,a);return r.substring(0,o)}e.commonPrefix=n})(io||(io={}));"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(e,t,n){const r=Number(0xffffffffn&t),i=Number(t>>32n);this.setUint32(e+(n?0:4),r,n),this.setUint32(e+(n?4:0),i,n)}});var Ao=e=>new DataView(new ArrayBuffer(e)),rr=e=>new Uint8Array(e.buffer||e),oo=e=>new TextEncoder().encode(String(e)),ui=e=>Math.min(4294967295,Number(e)),dg=e=>Math.min(65535,Number(e));function DI(e,t){if(t===void 0||t instanceof Date||(t=new Date(t)),e instanceof File)return{isFile:1,t:t||new Date(e.lastModified),i:e.stream()};if(e instanceof Response)return{isFile:1,t:t||new Date(e.headers.get("Last-Modified")||Date.now()),i:e.body};if(t===void 0)t=new Date;else if(isNaN(t))throw new Error("Invalid modification date.");if(e===void 0)return{isFile:0,t};if(typeof e=="string")return{isFile:1,t,i:oo(e)};if(e instanceof Blob)return{isFile:1,t,i:e.stream()};if(e instanceof Uint8Array||e instanceof ReadableStream)return{isFile:1,t,i:e};if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return{isFile:1,t,i:rr(e)};if(Symbol.asyncIterator in e)return{isFile:1,t,i:Jw(e[Symbol.asyncIterator]())};throw new TypeError("Unsupported input format.")}function Jw(e,t=e){return new ReadableStream({async pull(n){let r=0;for(;n.desiredSize>r;){const i=await e.next();if(!i.value){n.close();break}{const o=MI(i.value);n.enqueue(o),r+=o.byteLength}}},cancel(n){var r;(r=t.throw)==null||r.call(t,n)}})}function MI(e){return typeof e=="string"?oo(e):e instanceof Uint8Array?e:rr(e)}function eb(e,t,n){let[r,i]=function(o){return o?o instanceof Uint8Array?[o,1]:ArrayBuffer.isView(o)||o instanceof ArrayBuffer?[rr(o),1]:[oo(o),0]:[void 0,0]}(t);if(e instanceof File)return{o:wf(r||oo(e.name)),u:BigInt(e.size),l:i};if(e instanceof Response){const o=e.headers.get("content-disposition"),a=o&&o.match(/;\s*filename\*?=["']?(.*?)["']?$/i),s=a&&a[1]||e.url&&new URL(e.url).pathname.split("/").findLast(Boolean),c=s&&decodeURIComponent(s),u=n||+e.headers.get("content-length");return{o:wf(r||oo(c)),u:BigInt(u),l:i}}return r=wf(r,e!==void 0||n!==void 0),typeof e=="string"?{o:r,u:BigInt(oo(e).length),l:i}:e instanceof Blob?{o:r,u:BigInt(e.size),l:i}:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?{o:r,u:BigInt(e.byteLength),l:i}:{o:r,u:OI(e,n),l:i}}function OI(e,t){return t>-1?BigInt(t):e?void 0:0n}function wf(e,t=1){if(!e||e.every(n=>n===47))throw new Error("The file must have a name.");if(t)for(;e[e.length-1]===47;)e=e.subarray(0,-1);else e[e.length-1]!==47&&(e=new Uint8Array([...e,47]));return e}var tb=new Uint32Array(256);for(let e=0;e<256;++e){let t=e;for(let n=0;n<8;++n)t=t>>>1^(1&t&&3988292384);tb[e]=t}function pg(e,t=0){t^=-1;for(var n=0,r=e.length;n<r;n++)t=t>>>8^tb[255&t^e[n]];return(-1^t)>>>0}function nb(e,t,n=0){const r=e.getSeconds()>>1|e.getMinutes()<<5|e.getHours()<<11,i=e.getDate()|e.getMonth()+1<<5|e.getFullYear()-1980<<9;t.setUint16(n,r,1),t.setUint16(n+2,i,1)}function LI({o:e,l:t},n){return 8*(!t||(n??function(r){try{BI.decode(r)}catch{return 0}return 1}(e)))}var BI=new TextDecoder("utf8",{fatal:1});function $I(e,t=0){const n=Ao(30);return n.setUint32(0,1347093252),n.setUint32(4,754976768|t),nb(e.t,n,10),n.setUint16(26,e.o.length,1),rr(n)}async function*UI(e){let{i:t}=e;if("then"in t&&(t=await t),t instanceof Uint8Array)yield t,e.m=pg(t,0),e.u=BigInt(t.length);else{e.u=0n;const n=t.getReader();for(;;){const{value:r,done:i}=await n.read();if(i)break;e.m=pg(r,e.m),e.u+=BigInt(r.length),yield r}}}function zI(e,t){const n=Ao(16+(t?8:0));return n.setUint32(0,1347094280),n.setUint32(4,e.isFile?e.m:0,1),t?(n.setBigUint64(8,e.u,1),n.setBigUint64(16,e.u,1)):(n.setUint32(8,ui(e.u),1),n.setUint32(12,ui(e.u),1)),rr(n)}function GI(e,t,n=0,r=0){const i=Ao(46);return i.setUint32(0,1347092738),i.setUint32(4,755182848),i.setUint16(8,2048|n),nb(e.t,i,12),i.setUint32(16,e.isFile?e.m:0,1),i.setUint32(20,ui(e.u),1),i.setUint32(24,ui(e.u),1),i.setUint16(28,e.o.length,1),i.setUint16(30,r,1),i.setUint16(40,e.isFile?33204:16893,1),i.setUint32(42,ui(t),1),rr(i)}function WI(e,t,n){const r=Ao(n);return r.setUint16(0,1,1),r.setUint16(2,n-4,1),16&n&&(r.setBigUint64(4,e.u,1),r.setBigUint64(12,e.u,1)),r.setBigUint64(n-8,t,1),rr(r)}function rb(e){return e instanceof File||e instanceof Response?[[e],[e]]:[[e.input,e.name,e.size],[e.input,e.lastModified]]}var HI=e=>function(t){let n=BigInt(22),r=0n,i=0;for(const o of t){if(!o.o)throw new Error("Every file must have a non-empty name.");if(o.u===void 0)throw new Error(`Missing size for file "${new TextDecoder().decode(o.o)}".`);const a=o.u>=0xffffffffn,s=r>=0xffffffffn;r+=BigInt(46+o.o.length+(a&&8))+o.u,n+=BigInt(o.o.length+46+(12*s|28*a)),i||(i=a)}return(i||r>=0xffffffffn)&&(n+=BigInt(76)),n+r}(function*(t){for(const n of t)yield eb(...rb(n)[0])}(e));function mg(e,t={}){const n={"Content-Type":"application/zip","Content-Disposition":"attachment"};return(typeof t.length=="bigint"||Number.isInteger(t.length))&&t.length>0&&(n["Content-Length"]=String(t.length)),t.metadata&&(n["Content-Length"]=String(HI(t.metadata))),new Response(VI(e,t),{headers:n})}function VI(e,t={}){const n=function(r){var o;const i=r[Symbol.iterator in r?Symbol.iterator:Symbol.asyncIterator]();return{async next(){const a=await i.next();if(a.done)return a;const[s,c]=rb(a.value);return{done:0,value:Object.assign(DI(...c),eb(...s))}},throw:(o=i.throw)==null?void 0:o.bind(i),[Symbol.asyncIterator](){return this}}}(e);return Jw(async function*(r,i){const o=[];let a=0n,s=0n,c=0;for await(const d of r){const p=LI(d,i.buffersAreUTF8);yield $I(d,p),yield d.o,d.isFile&&(yield*UI(d));const h=d.u>=0xffffffffn,g=12*(a>=0xffffffffn)|28*h;yield zI(d,h),o.push(GI(d,a,p,g)),o.push(d.o),g&&o.push(WI(d,a,g)),h&&(a+=8n),s++,a+=BigInt(46+d.o.length)+d.u,c||(c=h)}let u=0n;for(const d of o)yield d,u+=BigInt(d.length);if(c||a>=0xffffffffn){const d=Ao(76);d.setUint32(0,1347094022),d.setBigUint64(4,BigInt(44),1),d.setUint32(12,755182848),d.setBigUint64(24,s,1),d.setBigUint64(32,s,1),d.setBigUint64(40,u,1),d.setBigUint64(48,a,1),d.setUint32(56,1347094023),d.setBigUint64(64,a+u,1),d.setUint32(72,1,1),yield rr(d)}const f=Ao(22);f.setUint32(0,1347093766),f.setUint16(8,dg(s),1),f.setUint16(10,dg(s),1),f.setUint32(12,ui(u),1),f.setUint32(16,ui(a),1),yield rr(f)}(n,t),n)}var Yn;(e=>{function t(g){if(g.format==="gaf"||g.format==="taf-solo"){const x=g.currentGaf.kind==="from-file-single"?io.fileNameWithoutExtension(g.currentGaf.fileName):"everything";return{kind:"single",tree:n({entries:g.currentGaf.virtualGaf.entries,format:g.format,activePairSubFormat:g.activePairSubFormat}),baseFileName:x}}let w,_,y;if(g.currentGaf.kind==="from-file-pair"){_=io.fileNameWithoutExtension(g.currentGaf.data1555.fileName),y=io.fileNameWithoutExtension(g.currentGaf.data4444.fileName);let x=io.commonPrefix(_,y);x.endsWith("_")&&(x=x.substring(0,x.length-1)),w=x===""?"everything":x}else w="everything",_="_1555",y="_4444";return{kind:"taf-pair",baseFileName:w,taf_1555:{tree:n({entries:g.currentGaf.virtualGaf.entries,format:g.format,activePairSubFormat:"taf_1555"}),dirName:_},taf_4444:{tree:n({entries:g.currentGaf.virtualGaf.entries,format:g.format,activePairSubFormat:"taf_4444"}),dirName:y}}}e.currentGafToItemTreeWrapper=t;function n(g){const w={},_=g.entries.length.toString().length,y=g.entries.map((x,E)=>{const b=(E+1).toString().padStart(_,"0");return{...x,__indexedName:`(${b}) ${x.name}`}});for(const x of y)w[x.__indexedName]=i({entryName:x.name,frames:x.frames,format:g.format,activePairSubFormat:g.activePairSubFormat});return w}e.entriesToItemTree=n;function r(g){return Object.values(g).every(w=>w.length===0)}e.isTreeEmpty=r;function i({entryName:g,frames:w,frameIndex:_,format:y,activePairSubFormat:x}){const E=[];if(_===void 0)w.forEach((b,S)=>{const A=a({entryName:g,frame:b,frameIndex:S,format:y,activePairSubFormat:x});Array.isArray(A)?E.push(...A):E.push(A)});else{const b=w[_];if(b.frameData.kind==="single")throw new Error("Active frame lacks subframes!");const S=o({entryName:g,frameData:b.frameData,frameIndex:_,format:y,activePairSubFormat:x});E.push(...S)}return E}e.framesToItems=i;function o({entryName:g,frameData:w,frameIndex:_,format:y,activePairSubFormat:x}){const E=[];return w.layers.forEach((b,S)=>{const A={entryName:g,frameIndex:_,subframeIndex:S},R=s(b.layerData,y,x);E.push({...A,image:R})}),E}e.subframesToItems=o;function a({frame:g,entryName:w,frameIndex:_,format:y,activePairSubFormat:x}){const E={entryName:w,frameIndex:_};let b,S;if(g.frameData.kind==="single")S=g.frameData;else return o({frameData:g.frameData,entryName:w,frameIndex:_,format:y,activePairSubFormat:x});const A=s(S.layerData,y,x);return{...E,image:A,subframeIndex:b}}e.frameToItem=a;function s(g,w,_){return w==="taf-pair"?g[_==="taf_1555"?"imageResource1555":"imageResource4444"].compiledImage:g.imageResource.compiledImage}async function c(g){const w=new Date,_=[];if(g.kind==="single")await u(g.tree,w,_,null);else{const x=g.taf_1555.dirName,E=g.taf_4444.dirName;_.push({name:x,lastModified:w}),_.push({name:E,lastModified:w}),await u(g.taf_1555.tree,w,_,x),await u(g.taf_4444.tree,w,_,E)}const y=await mg(_).blob();return Co.createDownloadable(y,g.baseFileName+".zip")}e.exportItemTreeWrapperAsDownloadableZip=c;async function u(g,w,_,y){for(const[x,E]of Object.entries(g)){const b=y===null?x:`${y}/${x}`,S=E;_.push({name:b+"/",lastModified:w});const R=(await Promise.all(S.map(async C=>({item:C,blob:await h(C.image)})))).map(C=>p(b,C,w));_.push(...R)}}async function f(g,w){const _=await Promise.all(g.map(async b=>({item:b,blob:await h(b.image)}))),y=new Date,x=_.map(b=>p(null,b,y)),E=await mg(x).blob();return Co.createDownloadable(E,w+".zip")}e.exportItemsAsDownloadableZip=f;const d=new Uint8Array([]);function p(g,w,_){const y=bc.nameFrameOrSubframe({suffix:w.blob===null?" (error)":void 0,ext:"png",entryNameOrIndex:w.item.entryName,frameIndex:w.item.frameIndex,subframeIndex:w.item.subframeIndex});return{name:g===null?y:`${g}/${y}`,lastModified:_,input:w.blob??d,size:w.blob===null?0:void 0}}function h(g){const w=document.createElement("canvas"),_=w.getContext("2d");if(!_)throw new Error("Canvas context not supported");return w.width=g.width,w.height=g.height,_.putImageData(g,0,0),new Promise((y,x)=>{w.toBlob(y,"image/png",1)})}e.convertImageDataToBlob=h})(Yn||(Yn={}));function KI({itemTreeWrapper:e,onAbort:t}){const[n,r]=F.useState(!1),[i,o]=F.useState();F.useEffect(()=>()=>{i!==void 0&&(console.log("Revoking downloadable..."),i.revoke())});const a=F.useCallback(c=>{c.download()},[]),s=F.useCallback(()=>{r(!0),cn.defer(()=>Yn.exportItemTreeWrapperAsDownloadableZip(e)).then(c=>{o(c),a(c),r(!1)}).catch(c=>{alert("Unexpected error."),console.error(c),t()})},[e,t,a]);return n?l.jsxs(De,{children:["Processing...",l.jsx("div",{className:"text-sm text-slate-600",children:"This can take a few seconds depending on the number of images."})]}):i===void 0?l.jsxs(De,{children:[l.jsx("div",{className:"mb-4",children:"Export all sequences as images?"}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx(ne,{color:"success",onClick:()=>s(),children:"Export"}),l.jsx(ne,{onClick:()=>t(),children:"Cancel"})]})]}):l.jsxs(De,{children:[l.jsxs("div",{className:"flex items-center text-emerald-700 mb-4",children:[l.jsx(ie.CircleCheck,{className:"mr-1.5"}),l.jsx("div",{className:"font-bold",children:"Your file is ready!"})]}),l.jsx("div",{className:"text-sm",children:"If the download doesn't start automatically, try the link below:"}),l.jsx(Pe,{label:"Click to download the images",onClick:()=>a(i)})]})}const He=Gw()(e=>({frameListMode:"thumbs",subframeListMode:"thumbs",importerWorkspaceOptionsCollapsed:!1,showMultiFrameFrameData:!1,activePairSubFormat:"taf_4444",enableUnknownEditing:!1,actions:{setFrameListMode:t=>e({frameListMode:t}),setSubframeListMode:t=>e({subframeListMode:t}),setImporterWorkspaceOptionsCollapsed:t=>e({importerWorkspaceOptionsCollapsed:t}),setShowMultiFrameFrameData:t=>e({showMultiFrameFrameData:t}),setActivePairSubFormat:t=>e({activePairSubFormat:t}),setEnableUnknownEditing:t=>e({enableUnknownEditing:t})}}));function ZI({onAbort:e}){const t=Z.useFormat(),n=Z.useCurrentGaf(),r=He(a=>a.activePairSubFormat);let i;try{i=Yn.currentGafToItemTreeWrapper({currentGaf:n,format:t,activePairSubFormat:r})}catch(a){return l.jsxs(De,{children:[l.jsx("div",{className:"font-semibold text-red-600 mb-1",children:"Fatal error:"}),l.jsx("div",{className:"mb-4",children:a+""}),l.jsx("div",{className:"flex justify-end",children:l.jsx(ne,{onClick:e,children:"Close"})})]})}let o;if(i.kind==="taf-pair"){const{taf_1555:a,taf_4444:s}=i;o=Yn.isTreeEmpty(a.tree)&&Yn.isTreeEmpty(s.tree)}else o=Yn.isTreeEmpty(i.tree);return o?l.jsxs(De,{children:[l.jsx("div",{className:"mb-4",children:"Nothing to export."}),l.jsx("div",{className:"flex justify-end",children:l.jsx(ne,{onClick:e,children:"Close"})})]}):l.jsx(KI,{itemTreeWrapper:i,onAbort:e})}function qI({mode:e,items:t,onAbort:n}){const[r,i]=F.useState(!1),[o,a]=F.useState();F.useEffect(()=>()=>{o!==void 0&&(console.log("Revoking downloadable..."),o.revoke())});const s=F.useCallback(u=>{u.download()},[]),c=F.useCallback(()=>{i(!0),cn.defer(()=>Yn.exportItemsAsDownloadableZip(t,e)).then(u=>{a(u),s(u),i(!1)}).catch(u=>{alert("Unexpected error."),console.error(u),n()})},[t,e,n,s]);return r?l.jsxs(De,{children:["Processing...",l.jsx("div",{className:"text-sm text-slate-600",children:"This can take a few seconds depending on the number of images."})]}):o===void 0?l.jsxs(De,{children:[l.jsxs("div",{className:"mb-4",children:["Export all ",e," as images?"]}),l.jsxs("div",{className:"flex justify-end space-x-2",children:[l.jsx(ne,{color:"success",onClick:()=>c(),children:"Export"}),l.jsx(ne,{onClick:()=>n(),children:"Cancel"})]})]}):l.jsxs(De,{children:[l.jsxs("div",{className:"flex items-center text-emerald-700 mb-4",children:[l.jsx(ie.CircleCheck,{className:"mr-1.5"}),l.jsx("div",{className:"font-bold",children:"Your file is ready!"})]}),l.jsx("div",{className:"text-sm",children:"If the download doesn't start automatically, try the link below:"}),l.jsx(Pe,{label:"Click to download the images",onClick:()=>s(o)})]})}function YI({frameIndex:e,onAbort:t}){const n=Z.useFormat(),r=Z.useActiveEntry(),i=He(a=>a.activePairSubFormat);if(r===null){t();return}let o;try{o=Yn.framesToItems({entryName:r.name,frames:r.frames,frameIndex:e,format:n,activePairSubFormat:i})}catch(a){return l.jsxs(De,{children:[l.jsx("div",{className:"font-semibold text-red-600 mb-1",children:"Fatal error:"}),l.jsx("div",{className:"mb-4",children:a+""}),l.jsx("div",{className:"flex justify-end",children:l.jsx(ne,{onClick:t,children:"Close"})})]})}return o.length===0?l.jsxs(De,{children:[l.jsx("div",{className:"mb-4",children:"Nothing to export."}),l.jsx("div",{className:"flex justify-end",children:l.jsx(ne,{onClick:t,children:"Close"})})]}):l.jsx(qI,{mode:e===void 0?"frames":"subframes",items:o,onAbort:t})}const XI="flex justify-center items-center bg-blue-50 text-slate-600 border-2 border-dashed border-gray-400 cursor-pointer hover:text-sky-600 hover:bg-blue-100 hover:border-sky-400 transition-colors text-center min-h-44 p-4";function xp({currentFile:e,label:t,multi:n,onChoose:r,className:i,accept:o,disabled:a}){t??(t=`(Click here or drag'n'drop ${n?"files":"a file"})`);const s=F.useRef(null),c=F.useRef(null),u=h=>{if(a)return;const g=h.target.files;if(g===null||g.length===0)return;const w=[...g];r(n?w:w[0])},f=h=>{h.preventDefault(),a||(h.dataTransfer.dropEffect="copy")},d=h=>{if(h.preventDefault(),!a){const g=h.dataTransfer.files;if(g.length>0){const w=Array.from(g);r(n?w:w[0])}}},p=F.useMemo(()=>i?i({hasFile:e!==void 0,disabled:a??!1}):XI,[i,e,a]);return l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:s,onClick:h=>{h.preventDefault(),!a&&c.current!==null&&c.current.click()},onDragOver:f,onDrop:d,className:p,children:e?e.name:t}),l.jsx("input",{ref:c,type:"file",multiple:n===!0,style:{display:"none"},accept:o,onChange:u})]})}function ib({onFinish:e,onAbort:t,acceptFiles:n,isReplacing:r}){return l.jsxs(Vt,{children:[l.jsx(_t,{children:r?l.jsx(xp,{defaultStyling:!0,multi:!1,onChoose:i=>e([i]),accept:n}):l.jsx(xp,{defaultStyling:!0,multi:!0,onChoose:e,accept:n})}),l.jsx("div",{className:"flex",children:l.jsx(ne,{onClick:t,children:"Cancel"})})]})}function va({children:e,onClick:t,disabled:n,className:r,title:i}){const o=n?"":"hover:bg-slate-200",a=n?"text-slate-400":"text-slate-600";return l.jsx("button",{className:`px-1 py-0.5 rounded ${o} ${a} ${r}`,onClick:()=>!n&&t(),disabled:n,title:i,children:e})}const sr=F.createContext(void 0),ks=F.createContext(void 0),ob={"application/prs.cww":["cww"],"application/prs.xsf+xml":["xsf"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["*xfdf"],"application/vnd.age":["age"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["*fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["*mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.pwg-xhtml-print+xml":["xhtm"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml","uo"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["*prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["*sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["*aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif","btf"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.cld":["cld"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.pytha.pyox":["pyo","pyox"],"model/vnd.sap.vds":["vds"],"model/vnd.usda":["usda"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.familysearch.gedcom":["ged"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]};Object.freeze(ob);const ab={"application/andrew-inset":["ez"],"application/appinstaller":["appinstaller"],"application/applixware":["aw"],"application/appx":["appx"],"application/appxbundle":["appxbundle"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/automationml-aml+xml":["aml"],"application/automationml-amlx+zip":["amlx"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cpl+xml":["cpl"],"application/cu-seeme":["cu"],"application/cwl":["cwl"],"application/dash+xml":["mpd"],"application/dash-patch+xml":["mpp"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdf":["fdf"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["*js"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/media-policy-dataset+xml":["mpf"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["*mp4","*mpg4","mp4s","m4p"],"application/msix":["msix"],"application/msixbundle":["msixbundle"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-keys":["asc"],"application/pgp-signature":["sig","*asc"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/sql":["sql"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/watcherinfo+xml":["wif"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xfdf":["xfdf"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/aac":["adts","aac"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avci":["avci"],"image/avcs":["avcs"],"image/avif":["avif"],"image/bmp":["bmp","dib"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/dpx":["dpx"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm","jpgm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/jt":["jt"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/prc":["prc"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/u3d":["u3d"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js","mjs"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["md","markdown"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/wgsl":["wgsl"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","*jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]};Object.freeze(ab);var Jt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Wi,ga,Qr;let QI=class{constructor(...t){Wi.set(this,new Map),ga.set(this,new Map),Qr.set(this,new Map);for(const n of t)this.define(n)}define(t,n=!1){for(let[r,i]of Object.entries(t)){r=r.toLowerCase(),i=i.map(s=>s.toLowerCase()),Jt(this,Qr,"f").has(r)||Jt(this,Qr,"f").set(r,new Set);const o=Jt(this,Qr,"f").get(r);let a=!0;for(let s of i){const c=s.startsWith("*");if(s=c?s.slice(1):s,o==null||o.add(s),a&&Jt(this,ga,"f").set(r,s),a=!1,c)continue;const u=Jt(this,Wi,"f").get(s);if(u&&u!=r&&!n)throw new Error(`"${r} -> ${s}" conflicts with "${u} -> ${s}". Pass \`force=true\` to override this definition.`);Jt(this,Wi,"f").set(s,r)}}return this}getType(t){if(typeof t!="string")return null;const n=t.replace(/^.*[/\\]/,"").toLowerCase(),r=n.replace(/^.*\./,"").toLowerCase(),i=n.length<t.length;return!(r.length<n.length-1)&&i?null:Jt(this,Wi,"f").get(r)??null}getExtension(t){var n;return typeof t!="string"?null:(t=(n=t==null?void 0:t.split)==null?void 0:n.call(t,";")[0],(t&&Jt(this,ga,"f").get(t.trim().toLowerCase()))??null)}getAllExtensions(t){return typeof t!="string"?null:Jt(this,Qr,"f").get(t.toLowerCase())??null}_freeze(){this.define=()=>{throw new Error("define() not allowed for built-in Mime objects. See https://github.com/broofa/mime/blob/main/README.md#custom-mime-instances")},Object.freeze(this);for(const t of Jt(this,Qr,"f").values())Object.freeze(t);return this}_getTestState(){return{types:Jt(this,Wi,"f"),extensions:Jt(this,ga,"f")}}};Wi=new WeakMap,ga=new WeakMap,Qr=new WeakMap;const No=new QI(ab,ob)._freeze(),hg="px-2 py-1 text-sm overflow-hidden";function sb({items:e,setItems:t,selectedIndex:n,setSelectedIndex:r}){if(e.length===0)throw new Error("No items.");const i=n===void 0,o=n!==void 0&&n===0,a=n!==void 0&&n===e.length-1,s=n!==void 0&&e[n].disabled,c=F.useContext(sr),u=F.useCallback(d=>{if(n===void 0)return;const p=n+d;if(p<0||p>=e.length)throw new Error("Out of bounds");const h=[...e];[h[n],h[p]]=[h[p],h[n]],t(h),r(p)},[n,e,t,r]),f=F.useCallback(d=>{if(n===void 0)return;const p={...e[n]};if(p.error!==void 0){c.pushModal({title:"This file is unsupported by the selected Image Importer",body:l.jsx(De,{children:p.error})});return}const h=[...e];h[n]={...p,disabled:!d},t(h)},[n,e,t,c]);return l.jsxs("div",{className:"flex flex-col",children:[l.jsx("div",{className:"border border-slate-400 overflow-auto",style:{height:250},children:l.jsx("table",{children:l.jsx("tbody",{children:e.map((d,p)=>{const h=n===p,g=d.error!==void 0,w=h?"bg-sky-200":d.disabled?"":"group-hover:bg-sky-50",_=d.disabled?"opacity-50 line-through":g?"text-red-600":"text-slate-600",y=No.getType(d.fileName),x=y?No.getExtension(y):null;return l.jsxs("tr",{className:"group cursor-pointer",onClick:E=>{E.preventDefault(),r(p)},children:[l.jsx("td",{className:`${hg} ${w} ${_} w-full font-medium`,style:{maxWidth:1},children:l.jsx("div",{className:"truncate",children:d.fileName})}),l.jsx("td",{className:`${hg} ${w} ${_} font-medium`,children:(x==null?void 0:x.toUpperCase())??"??"})]},p)})})})}),l.jsx("div",{className:"flex justify-center border border-t-0 border-slate-400",children:l.jsxs("div",{className:"flex px-1 py-0.5 space-x-1",children:[l.jsx(va,{onClick:()=>u(1),disabled:i||a,title:"Move Down",children:l.jsx(ie.CircleCaretDown,{})}),l.jsx(va,{onClick:()=>u(-1),disabled:i||o,title:"Move Up",children:l.jsx(ie.CircleCaretUp,{})}),l.jsx(va,{onClick:()=>f(!1),disabled:i||s,title:"Disable",children:l.jsx(ie.CircleX,{})}),l.jsx(va,{onClick:()=>f(!0),disabled:i||!s,title:"Enable",children:l.jsx(ie.CircleCheck,{})})]})})]})}function sh({image:e,width:t,height:n,contain:r,smoothing:i,scaleX:o,scaleY:a,style:s}){const c=F.useRef(null),u=o??1,f=a??1;F.useEffect(()=>{const w=c.current;if(w===null)return;const _=w.getContext("2d");_.imageSmoothingEnabled=i,_.putImageData(e,0,0)},[e,i]);let d;(u!==1||f!==1)&&(d=`${u} ${f}`);const h={imageRendering:i?"auto":"pixelated"},g=r?{...s,...h,width:"auto",height:"auto",maxWidth:"100%",maxHeight:"100%"}:{...s,...h,width:t,height:n,maxWidth:t,maxHeight:n,scale:d};return l.jsx("canvas",{ref:c,width:t,height:n,style:g})}const _u={version:"0.1.0",baseUrl:"/gaf-studio-web"},kc=["white","black","green","#FF00FF","var(--color-gray-100)","#303030",'url("images/bg/paintnet-bg.png")','url("images/bg/firefox-bg-noise.png")','url("images/bg/868a8222.JPG")','url("images/bg/6e68fae8.jpg")','url("images/bg/9A5C5436.JPG")','url("images/bg/9bb50b09.JPG")','url("images/bg/9e1ac834.JPG")','url("images/bg/18c8f89c.JPG")'],JI=()=>{kc.forEach(e=>{if(e.startsWith('url("')&&e.endsWith('")')){const t=e.slice(5,-2),n=`${_u.baseUrl}/${t}`,r=new Image;r.src=n}})},ht=Gw()(e=>({background:kc[4],importBackground:kc[6],mainCanvasLayerOrder:new Set(["GRID","IMAGE","CROSS","BOUNDS","O_BOUNDS"]),mainCanvasLayerVisibility:{GRID:!0,IMAGE:!0,CROSS:!0,BOUNDS:!0,O_BOUNDS:!0},gridSpacing:16,gridStyle:"#0000000A",crossStyle:"#FF0000FF",boundsStyle:"#FF00FFEE",originBoundsStyle:"#0000FFEE",actions:{setBackground:t=>e({background:t}),setImportBackground:t=>e({importBackground:t}),setMainCanvasLayerVisibility:t=>e({mainCanvasLayerVisibility:t}),setMainCanvasLayerOrder:t=>e({mainCanvasLayerOrder:t}),setGridSpacing:t=>e({gridSpacing:t}),setGridStyle:t=>e({gridStyle:t}),setCrossStyle:t=>e({crossStyle:t}),setBoundsStyle:t=>e({boundsStyle:t}),setOriginBoundsStyle:t=>e({originBoundsStyle:t})}}));function Qn({imageData:e,imageWidth:t,imageHeight:n,wrapperWidth:r,wrapperHeight:i}){r??(r=250),i??(i=300);const o=ht(s=>s.importBackground),a=l.jsx(sh,{image:e,width:t,height:n,contain:!0,smoothing:!1,style:{background:o,border:"1px solid var(--color-gray-300)"}});return l.jsx("div",{className:"relative",style:{width:Math.min(r,t),height:Math.min(i,n)},children:l.jsx("div",{className:"absolute inset-0 flex justify-center items-center bg-slate-100",children:a})})}function lb(e){return e.error===void 0}function e4({decodedUserFiles:e,onFinish:t,onAbort:n}){if(e.length===0)throw new Error("No files.");const[r,i]=F.useState(e.map(f=>{const d=f.error;return{content:f,fileName:f.file.name,disabled:d!==void 0,error:d}})),[o,a]=F.useState(),s=F.useCallback(()=>{const d=r.filter(p=>!p.disabled).map(p=>p.content).filter(lb).map(({file:p,decodedUserImage:h,selectedImporter:g})=>({file:p,decodedUserImage:h,selectedImporter:g}));t(d)},[r,t]),c=o!==void 0?r[o]:void 0,u=r.every(f=>f.disabled);return l.jsxs(Vt,{children:[l.jsx(_t,{children:l.jsxs("div",{className:"flex space-x-4 mb-4",children:[l.jsxs("div",{className:"flex-1 overflow-hidden",children:[l.jsxs("div",{className:"text-center text-xs font-bold text-slate-500 mb-0.5",children:["Reorder Files (",r.length,")"]}),l.jsx(sb,{items:r,setItems:i,selectedIndex:o,setSelectedIndex:a})]}),l.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[l.jsx("div",{className:"text-center text-xs font-bold text-slate-500 mb-0.5",children:"Image Preview"}),l.jsx(t4,{selectedItem:c})]})]})}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(ne,{color:"default",onClick:n,children:"Cancel"}),l.jsx(ne,{color:"success",onClick:s,disabled:u,children:"Import"})]})]})}function t4({selectedItem:e}){if(e===void 0)return l.jsx("div",{className:"flex justify-center items-center text-gray-400 text-center p-2",children:"(No file selected)"});const t=e.content;if(!lb(t))return l.jsx("button",{className:"flex justify-center items-center text-red-600 text-center p-2 hover:underline",onClick:()=>{console.log(t.error),alert(t.error)},children:"(Couldn't decode file)"});const n=l.jsx(Qn,{imageData:t.decodedUserImage.image,imageWidth:t.decodedUserImage.metadata.width,imageHeight:t.decodedUserImage.metadata.height});return e.disabled?l.jsxs("div",{className:"relative",children:[l.jsx("div",{style:{opacity:"30%"},children:n}),l.jsx("div",{className:"absolute inset-0 flex justify-center items-center text-center",children:l.jsx("span",{className:"text-gray-500 font-bold",children:"(Disabled)"})})]}):n}var fi;(e=>{async function t(r,i,o){const a=No.getType(r.name);if(a===null)return{file:r,error:`Couldn't detect mimeType for file name: ${r.name}.`};const s=No.getExtension(a);if(s===null)return{file:r,error:`Unsupported mimeType: ${a}`};for(const c of o){if(!c.supportedFileExts.includes(s))continue;const f=await c.createUserImage(r);return"error"in f?{file:r,error:f.error}:{file:r,selectedImporter:{importer:c,config:c.makeDefaultConfig({palette:i})},decodedUserImage:f}}return{file:r,error:`No decoder available for file extension: ${s}`}}e.decodeImage=t;async function n(r){const{decodedUserImage:i,selectedImporter:o}=r,{importer:a,config:s}=o,c=await a.createResource(i,s);return{file:r.file,selectedImporter:o,decodedUserImage:i,importerResult:c}}e.importImage=n})(fi||(fi={}));function cb({total:e,current:t,onPrev:n,onNext:r,onFinish:i}){const o=t===0,a=t===e-1;return l.jsxs("div",{className:"flex flex-col",children:[e>1&&l.jsxs("div",{className:"flex justify-between mb-2",children:[l.jsxs(ne,{color:"default",onClick:n,disabled:o,children:[l.jsx(ie.Prev,{size:18}),l.jsx("span",{className:"text-sm",children:"Prev"})]}),l.jsx("div",{className:"self-center",children:l.jsxs("span",{className:"font-mono",children:[t+1,"/",e]})}),l.jsxs(ne,{color:"default",onClick:r,disabled:a,children:[l.jsx("span",{className:"text-sm",children:"Next"}),l.jsx(ie.Next,{size:18})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx(ne,{color:"success",onClick:i,children:l.jsx("span",{className:"text-sm",children:"Finish"})})})]})}function ub({href:e,children:t,newTab:n}){return l.jsx("a",{href:e,className:"text-sky-600 hover:text-sky-500 underline",target:n?"_blank":void 0,children:t})}class Wo{compileImage(t,n,r){if(r.bytes.length!==t*n*4)throw new Error("Dimension doesn't match with expected byte length.");const i=new Uint8ClampedArray(r.bytes.buffer,r.bytes.byteOffset,r.bytes.byteLength);return new ImageData(i,t,n)}}const bf=256*3;var Ot;(e=>{const t=new Wo;async function n(s){const c=await s.arrayBuffer(),u=new Uint8Array(c);return r(u)}e.loadFromPcxFile=n;function r(s){if(s.length<bf)throw new Error("File is too small. Are you sure this is a .pcx file?");const c=s.length-bf;return{rgbData:new Uint8Array(s.buffer,s.byteOffset+c,bf)}}e.loadFromPcxFileData=r;function i(s,c,u,f,d){if(f.length!==s*c)throw new Error("indices.length !== width * height");const p=new Uint8Array(s*c*4);for(let h=0;h<f.length;h++){const g=f[h],w=h*4;if(g===u){p[w+0]=0,p[w+1]=0,p[w+2]=0,p[w+3]=0;continue}const _=d.rgbData,y=g*3,x=_[y+0],E=_[y+1],b=_[y+2];p[w+0]=x,p[w+1]=E,p[w+2]=b,p[w+3]=255}return{format:"rgba8888",bytes:p}}e.createColorData=i;function o(s){const c=new Uint8Array(1024);for(let u=0;u<256;u++)c[u*4+0]=s.rgbData[u*3+0],c[u*4+1]=s.rgbData[u*3+1],c[u*4+2]=s.rgbData[u*3+2],c[u*4+3]=255;return c}e.paletteToRgbaBytes=o;function a(s,c){c??(c=t);const u=o(s);return{width:16,height:16,image:c.compileImage(16,16,{format:"rgba8888",bytes:u})}}e.compilePreviewImage=a})(Ot||(Ot={}));function n4({currentPalette:e,setCurrentPalette:t}){const[n,r]=F.useState(!1),i=F.useRef(null),o=F.useCallback(async d=>{if(!n){r(!0);try{const p=await Ot.loadFromPcxFile(d),h=Ot.compilePreviewImage(p);t({kind:"custom-file",palette:p,originFile:d,previewImage:h})}catch{}finally{r(!1)}}},[n,r,t]),a=F.useCallback(()=>{i.current!==null&&i.current.click()},[]);let s,c,u;switch(e.kind){case"raw":s="(None)",c=null,u=e.customName??"(Raw bytes)";break;case"custom-file":s=e.originFile.name,c="TODO",u="(Custom file)";break;case"world":s=e.fileName,c="TODO",u=e.world;break;default:throw new Error("")}const f=l.jsxs(l.Fragment,{children:[l.jsx(Pe,{label:"Change palette",onClick:a}),l.jsx("input",{ref:i,style:{display:"none"},type:"file",onChange:d=>{d.preventDefault();const p=d.target.files;p&&p.length===1&&o(p[0])},accept:".pcx"})]});return l.jsxs("div",{className:"flex flex-col space-y-1.5 text-xs",children:[l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"font-bold",children:"File:"}),l.jsx("div",{children:c===null?l.jsx("span",{children:s}):l.jsx(ub,{href:c,newTab:!0,children:s})})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"font-bold",children:"Name:"}),l.jsx("div",{className:"truncate",children:u})]})]}),l.jsx("div",{className:"flex",children:l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"font-bold",children:"Options:"}),l.jsx("div",{children:f})]})})]})}function r4({currentPalette:e,scaleX:t,scaleY:n}){const{width:r,height:i,image:o}=e.previewImage;return l.jsx("div",{className:"flex justify-center items-center",style:{width:r*t,height:i*n},children:l.jsx(sh,{image:o,width:r,height:i,contain:!1,smoothing:!1,scaleX:t,scaleY:n})})}function fb({currentPalette:e}){return l.jsxs("div",{className:"flex flex-col",children:[l.jsx("div",{className:"flex justify-center mb-1",children:l.jsx("span",{className:"font-bold text-xs",children:"Preview"})}),l.jsx("div",{className:"flex justify-center",children:l.jsx(r4,{currentPalette:e,scaleX:2,scaleY:2})})]})}function i4({currentPalette:e,setCurrentPalette:t}){return l.jsx("div",{className:"flex justify-center",children:l.jsxs("div",{className:"flex flex-col bg-gray-100 rounded px-2 py-0.5",children:[l.jsx("div",{className:"text-center text-gray-500 font-bold text-xs mb-0.5",children:"Current Palette:"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(n4,{currentPalette:e,setCurrentPalette:t}),l.jsx(fb,{currentPalette:e})]})]})})}function o4({currentPalette:e,setCurrentPalette:t}){const n=He(i=>i.importerWorkspaceOptionsCollapsed),r=He(i=>i.actions.setImporterWorkspaceOptionsCollapsed);return l.jsxs("div",{children:[l.jsxs(vc,{children:["Workspace Options",l.jsx("span",{className:"ml-1 font-normal",children:l.jsx(Pe,{label:n?"Expand":"Collapse",onClick:()=>r(!n)})})]}),!n&&l.jsx(i4,{currentPalette:e,setCurrentPalette:t})]})}function a4({importedFile:e,currentConfig:t,setCurrentConfig:n,onClickApplyAll:r}){const{numberPrompt:i}=F.useContext(ks),o=F.useCallback(async()=>{const d=await i({title:"Override Transparency Index",label:"Enter a Transparency Index value:",min:0,max:255,defaultValue:t.options.transparencyIndex});d===null||d<0||d>255||n({...t,options:{...t.options,transparencyIndex:d}})},[t,n,i]),a=F.useCallback(()=>{if(e.importerResult.kind==="error"){alert("Can't use value from the Importer because the importer errored out.");return}n({...t,options:{...t.options,transparencyIndex:e.importerResult.result.transparencyIndex}})},[e,n,t]),s=l.jsxs("label",{className:"flex items-center space-x-1.5",children:[l.jsx("input",{type:"checkbox",checked:t.options.center,onChange:d=>{const p=d.target.checked;n({...t,options:{...t.options,center:p}})}}),l.jsx("span",{children:"Auto center image"})]}),c=l.jsxs("label",{className:"flex items-center space-x-1.5",children:[l.jsx("input",{type:"checkbox",checked:t.options.compress,onChange:d=>{const p=d.target.checked;n({...t,options:{...t.options,compress:p}})}}),l.jsx("span",{children:"Compress image"})]}),u=e.importerResult.kind!=="error"&&t.options.transparencyIndex!==e.importerResult.result.transparencyIndex,f=l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("div",{className:"flex items-center space-x-1.5",children:[l.jsx("span",{children:"Transparency Index:"}),l.jsx("span",{className:`font-mono ${u?"text-red-600 italic underline":""}`,title:u?s4:void 0,children:t.options.transparencyIndex})]}),l.jsxs("div",{className:"flex flex-wrap space-x-2 text-xs",children:[l.jsx(Pe,{label:"Override",onClick:o,title:"Override the value assigned by the Importer with a fixed value"}),u&&l.jsx(Pe,{label:"Reset",onClick:a,title:"Resets the overridden value to the value assigned by the Importer",disabled:!u})]})]});return l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-1 flex flex-col items-start",children:l.jsxs("div",{className:"flex flex-col items-start space-y-2",children:[s,c,r&&l.jsx("div",{className:"self-center mt-2 text-center text-xs",children:l.jsx(Pe,{label:"Apply to all images",onClick:r})})]})}),l.jsx("div",{className:"mx-4 border-l border-slate-200"}),l.jsx("div",{className:"flex-1 flex flex-col items-start space-y-2",children:f})]})}const s4="This value differs from the value that was assigned by the Importer. Only use this if you really know what you're doing. Click [Reset] if you don't.";function db({color:e,size:t}){const{r:n,g:r,b:i}=e,o="a"in e?e.a:void 0,a=o!==void 0?o/255:void 0,s=a===void 0?`rgb(${n},${r},${i})`:`rgba(${n},${r},${i},${a})`;return l.jsx("div",{className:"inline-block",style:{width:t??32,height:t??32,background:s}})}const Ec=7,vg=3,gg=20,Es=132,lh=Es,ch=34,ju=36,l4=40,yp=20;function pb({value:e,setValue:t,min:n,max:r,allowUnsafeIntegers:i}){i||(n??(n=Number.MIN_SAFE_INTEGER),r??(r=Number.MAX_SAFE_INTEGER));const o=F.useCallback(s=>{if(s.preventDefault(),t===void 0)return;let c=parseInt(s.target.value);Number.isNaN(c)||(n!==void 0&&(c=Math.max(c,n)),r!==void 0&&(c=Math.min(c,r)),t(c))},[n,r,t]),a=t?"border-gray-300":"border-transparent";return l.jsx("input",{type:"number",className:`hide-spin-button w-auto font-mono border ${a} px-0.5 py-0`,style:{width:l4,height:yp},value:e??"",onChange:o})}function Ei({icon:e,onClick:t}){const n=t?"hover:bg-slate-100":"";return l.jsx("button",{className:`flex justify-center items-center p-0.5 bg-slate-200 ${n} border border-slate-300 font-mono`,style:{width:yp,height:yp},onClick:t,children:e})}function c4({value:e,setValue:t,promptMessage:n,min:r,max:i}){const{numberPrompt:o}=F.useContext(ks),a=F.useCallback(async()=>{if(t===void 0)return;const s=await o({title:"Number prompt",label:n??"Enter a number:",min:r,max:i});s!==null&&t(s)},[t,n,r,i,o]);return l.jsxs("div",{className:"inline-flex items-center space-x-0.5",children:[l.jsx(pb,{value:e,setValue:t,min:r,max:i}),l.jsx(Ei,{icon:l.jsx(ie.Edit,{size:14}),onClick:t?a:void 0})]})}function Cu({htmlId:e,name:t,options:n,required:r,disabled:i,frozenValue:o,value:a,onChange:s,defaultValue:c,className:u}){o&&(a=o,s=()=>{},c=void 0);const f=!i&&o===void 0?"bg-main-700":"bg-main-800",d=i?"opacity-50":"";return l.jsx("select",{className:`w-full px-2 py-1 border border-main-800 ${f} ${d} ${u??""}`,name:t,id:e,required:r,disabled:i,value:a,onChange:s?p=>s(p.target.value):void 0,defaultValue:c,children:n.map(p=>l.jsx("option",{value:p.id,children:p.label},p.id))})}function u4({transpIndexStrategy:e,setTranspIndexStrategy:t,palette:n}){const r=l.jsx(Cu,{options:[{id:"auto-assign",label:"None (auto-assign)"},{id:"fixed-index",label:"Manual value"}],value:e.kind,onChange:s=>{let c;s==="auto-assign"?c={kind:"auto-assign"}:c={kind:"fixed-index",fixedIndex:9},t(c)}});if(e.kind==="auto-assign")return r;const i=e.fixedIndex,o={r:n.rgbData[i*3+0],g:n.rgbData[i*3+1],b:n.rgbData[i*3+2]},a=l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"Index:"}),l.jsx(c4,{min:0,max:255,promptMessage:"Palette index:",value:i,setValue:s=>{t({kind:"fixed-index",fixedIndex:s})}})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"Color:"}),l.jsx(db,{color:o,size:16})]})]});return l.jsxs("div",{children:[l.jsx("div",{className:"mb-1",children:r}),a]})}function f4({transparencyStrategy:e,setTransparencyStrategy:t}){const{colorPrompt:n}=F.useContext(ks),r=F.useCallback(async s=>{const c="a"in s?{...s}:{...s,a:255},u=await n({title:"Source transparency",label:"Select a color",defaultColor:c,enableAlpha:!1});u!==null&&t({kind:"custom-color",color:u})},[n,t]),i=l.jsx(Cu,{options:[{id:"auto-alpha",label:"Auto (alpha)"},{id:"custom-color",label:"Custom color"}],value:e.kind,onChange:s=>{let c;s==="auto-alpha"?c={kind:"auto-alpha"}:c={kind:"custom-color",color:{r:255,g:0,b:255}},t(c)}});if(e.kind==="auto-alpha")return i;const{color:o}=e,a=l.jsxs("div",{className:"flex items-center hover:bg-gray-200 cursor-pointer px-1.5 py-0.5 rounded",onClick:()=>r(o),title:"Click to select a color",children:[l.jsx("div",{className:"mr-4",children:l.jsx(db,{color:o,size:16})}),l.jsx("div",{className:"grow flex flex-col",children:l.jsxs("div",{className:"flex justify-between text-sm font-mono mb-0.5 space-x-2",children:[l.jsxs("div",{className:"text-red-700",children:["R: ",o.r]}),l.jsxs("div",{className:"text-green-700",children:["G: ",o.g]}),l.jsxs("div",{className:"text-blue-700",children:["B: ",o.b]})]})})]});return l.jsxs("div",{children:[l.jsx("div",{className:"mb-1",children:i}),a]})}function d4({config:e,setConfig:t}){return l.jsxs("div",{className:"flex",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-center text-xs text-gray-500 font-bold mb-0.5",children:"Source Transparency"}),l.jsx(f4,{transparencyStrategy:e.transparencyStrategy,setTransparencyStrategy:n=>{t({...e,transparencyStrategy:n})}})]}),l.jsx("div",{className:"border-r border-gray-300 pl-2 mr-2"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-center text-xs text-gray-500 font-bold mb-0.5",children:"Reserved Transparency Index"}),l.jsx(u4,{transpIndexStrategy:e.transpIndexStrategy,setTranspIndexStrategy:n=>{t({...e,transpIndexStrategy:n})},palette:e.palette})]})]})}var ir;(e=>{function t(n,r){if(n!==r)throw new Error(`Expected ${n} === ${r}`)}e.assertEq=t})(ir||(ir={}));var wp;(function(e){e[e.BITMAP_INFO_HEADER=40]="BITMAP_INFO_HEADER",e[e.BITMAP_V2_INFO_HEADER=52]="BITMAP_V2_INFO_HEADER",e[e.BITMAP_V3_INFO_HEADER=56]="BITMAP_V3_INFO_HEADER",e[e.BITMAP_V4_HEADER=108]="BITMAP_V4_HEADER",e[e.BITMAP_V5_HEADER=124]="BITMAP_V5_HEADER"})(wp||(wp={}));const Cn=wp;function p4(e,t,n,r){const i=~e+1&e,o=~t+1&t,a=~n+1&n,s=~r+1&r,c=e/i+1,u=t/o+1,f=n/a+1,d=r/s+1;return{shiftRed:p=>(p&e)/i*256/c,shiftGreen:p=>(p&t)/o*256/u,shiftBlue:p=>(p&n)/a*256/f,shiftAlpha:r!==0?p=>(p&r)/s*256/d:()=>255}}class m4{constructor(t,{toRGBA:n}={toRGBA:!1}){if(this.buffer=t,this.toRGBA=!!n,this.pos=0,this.bottomUp=!0,this.flag=this.buffer.toString("utf-8",0,this.pos+=2),this.flag!=="BM")throw new Error("Invalid BMP File");this.locRed=this.toRGBA?0:3,this.locGreen=this.toRGBA?1:2,this.locBlue=this.toRGBA?2:1,this.locAlpha=this.toRGBA?3:0,this.parseHeader(),this.parseRGBA()}parseHeader(){if(this.fileSize=this.readUInt32LE(),this.reserved1=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.reserved2=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.offset=this.readUInt32LE(),this.headerSize=this.readUInt32LE(),!(this.headerSize in Cn))throw new Error(`Unsupported BMP header size ${this.headerSize}`);if(this.width=this.readUInt32LE(),this.height=this.readUInt32LE(),this.planes=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.bitPP=this.buffer.readUInt16LE(this.pos),this.pos+=2,this.compression=this.readUInt32LE(),this.rawSize=this.readUInt32LE(),this.hr=this.readUInt32LE(),this.vr=this.readUInt32LE(),this.colors=this.readUInt32LE(),this.importantColors=this.readUInt32LE(),this.bitPP===32?(this.maskAlpha=0,this.maskRed=16711680,this.maskGreen=65280,this.maskBlue=255):this.bitPP===16&&(this.maskAlpha=0,this.maskRed=31744,this.maskGreen=992,this.maskBlue=31),(this.headerSize>Cn.BITMAP_INFO_HEADER||this.compression===3||this.compression===6)&&(this.maskRed=this.readUInt32LE(),this.maskGreen=this.readUInt32LE(),this.maskBlue=this.readUInt32LE()),(this.headerSize>Cn.BITMAP_V2_INFO_HEADER||this.compression===6)&&(this.maskAlpha=this.readUInt32LE()),this.headerSize>Cn.BITMAP_V3_INFO_HEADER&&(this.pos+=Cn.BITMAP_V4_HEADER-Cn.BITMAP_V3_INFO_HEADER),this.headerSize>Cn.BITMAP_V4_HEADER&&(this.pos+=Cn.BITMAP_V5_HEADER-Cn.BITMAP_V4_HEADER),this.bitPP<=8||this.colors>0){const n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(let r=0;r<n;r++){const i=this.buffer.readUInt8(this.pos++),o=this.buffer.readUInt8(this.pos++),a=this.buffer.readUInt8(this.pos++),s=this.buffer.readUInt8(this.pos++);this.palette[r]={red:a,green:o,blue:i,quad:s}}}this.height<0&&(this.height*=-1,this.bottomUp=!1);const t=p4(this.maskRed,this.maskGreen,this.maskBlue,this.maskAlpha);this.shiftRed=t.shiftRed,this.shiftGreen=t.shiftGreen,this.shiftBlue=t.shiftBlue,this.shiftAlpha=t.shiftAlpha}parseRGBA(){switch(this.data=Buffer.alloc(this.width*this.height*4),this.bitPP){case 1:this.bit1();break;case 4:this.bit4();break;case 8:this.bit8();break;case 16:this.bit16();break;case 24:this.bit24();break;default:this.bit32()}}bit1(){const t=Math.ceil(this.width/8),n=t%4,r=n!==0?4-n:0;this.scanImage(r,t,(i,o)=>{const a=this.buffer.readUInt8(this.pos++),s=o*this.width*4+i*8*4;for(let c=0;c<8&&i*8+c<this.width;c++){const u=this.palette[a>>7-c&1];this.data[s+c*this.locAlpha]=0,this.data[s+c*4+this.locBlue]=u.blue,this.data[s+c*4+this.locGreen]=u.green,this.data[s+c*4+this.locRed]=u.red}})}bit4(){if(this.compression===2){this.data.fill(0);let t=!1,n=this.bottomUp?this.height-1:0,r=0;for(;r<this.data.length;){const i=this.buffer.readUInt8(this.pos++),o=this.buffer.readUInt8(this.pos++);if(i===0){if(o===0){n+=this.bottomUp?-1:1,r=n*this.width*4,t=!1;continue}if(o===1)break;if(o===2){const a=this.buffer.readUInt8(this.pos++),s=this.buffer.readUInt8(this.pos++);n+=this.bottomUp?-s:s,r+=s*this.width*4+a*4}else{let a=this.buffer.readUInt8(this.pos++);for(let s=0;s<o;s++)r=this.setPixelData(r,t?a&15:(a&240)>>4),s&1&&s+1<o&&(a=this.buffer.readUInt8(this.pos++)),t=!t;(o+1>>1&1)===1&&this.pos++}}else for(let a=0;a<i;a++)r=this.setPixelData(r,t?o&15:(o&240)>>4),t=!t}}else{const t=Math.ceil(this.width/2),n=t%4,r=n!==0?4-n:0;this.scanImage(r,t,(i,o)=>{const a=this.buffer.readUInt8(this.pos++),s=o*this.width*4+i*2*4,c=a>>4;let u=this.palette[c];if(this.data[s]=0,this.data[s+1]=u.blue,this.data[s+2]=u.green,this.data[s+3]=u.red,i*2+1>=this.width)return!1;const f=a&15;u=this.palette[f],this.data[s+4]=0,this.data[s+4+1]=u.blue,this.data[s+4+2]=u.green,this.data[s+4+3]=u.red})}}bit8(){if(this.compression===1){this.data.fill(0);let t=this.bottomUp?this.height-1:0,n=0;for(;n<this.data.length;){const r=this.buffer.readUInt8(this.pos++),i=this.buffer.readUInt8(this.pos++);if(r===0){if(i===0){t+=this.bottomUp?-1:1,n=t*this.width*4;continue}if(i===1)break;if(i===2){const o=this.buffer.readUInt8(this.pos++),a=this.buffer.readUInt8(this.pos++);t+=this.bottomUp?-a:a,n+=a*this.width*4+o*4}else{for(let a=0;a<i;a++){const s=this.buffer.readUInt8(this.pos++);n=this.setPixelData(n,s)}i&!0&&this.pos++}}else for(let o=0;o<r;o++)n=this.setPixelData(n,i)}}else{const t=this.width%4,n=t!==0?4-t:0;this.scanImage(n,this.width,(r,i)=>{const o=this.buffer.readUInt8(this.pos++),a=i*this.width*4+r*4;if(o<this.palette.length){const s=this.palette[o];this.data[a]=0,this.data[a+1]=s.blue,this.data[a+2]=s.green,this.data[a+3]=s.red}else this.data[a]=0,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255})}}bit16(){const t=this.width%2*2;this.scanImage(t,this.width,(n,r)=>{const i=r*this.width*4+n*4,o=this.buffer.readUInt16LE(this.pos);this.pos+=2,this.data[i+this.locRed]=this.shiftRed(o),this.data[i+this.locGreen]=this.shiftGreen(o),this.data[i+this.locBlue]=this.shiftBlue(o),this.data[i+this.locAlpha]=this.shiftAlpha(o)})}bit24(){const t=this.width%4;this.scanImage(t,this.width,(n,r)=>{const i=r*this.width*4+n*4,o=this.buffer.readUInt8(this.pos++),a=this.buffer.readUInt8(this.pos++),s=this.buffer.readUInt8(this.pos++);this.data[i+this.locRed]=s,this.data[i+this.locGreen]=a,this.data[i+this.locBlue]=o,this.data[i+this.locAlpha]=0})}bit32(){this.scanImage(0,this.width,(t,n)=>{const r=n*this.width*4+t*4,i=this.readUInt32LE();this.data[r+this.locRed]=this.shiftRed(i),this.data[r+this.locGreen]=this.shiftGreen(i),this.data[r+this.locBlue]=this.shiftBlue(i),this.data[r+this.locAlpha]=this.shiftAlpha(i)})}scanImage(t=0,n=this.width,r){for(let i=this.height-1;i>=0;i--){const o=this.bottomUp?i:this.height-1-i;for(let a=0;a<n;a++)if(r.call(this,a,o)===!1)return;this.pos+=t}}readUInt32LE(){const t=this.buffer.readUInt32LE(this.pos);return this.pos+=4,t}setPixelData(t,n){const{blue:r,green:i,red:o}=this.palette[n];return this.data[t+this.locAlpha]=0,this.data[t+1+this.locBlue]=r,this.data[t+2+this.locGreen]=i,this.data[t+3+this.locRed]=o,t+4}}function xg(e){return e.reduce((t,n)=>t<<1|n,0)}function kf(e){return e.quad<<24|e.red<<16|e.green<<8|e.blue}class h4{constructor(t){switch(this.buffer=t.data,this.width=t.width,this.height=t.height,this.headerSize=Cn.BITMAP_INFO_HEADER,this.flag="BM",this.bitPP=t.bitPP,this.offset=54,this.reserved1=t.reserved1||0,this.reserved2=t.reserved2||0,this.planes=1,this.compress=0,this.hr=t.hr||0,this.vr=t.vr||0,this.importantColors=t.importantColors||0,this.colors=Math.min(2**(this.bitPP-1||1),t.colors||1/0),this.palette=t.palette||[],this.colors&&this.bitPP<16?this.offset+=this.colors*4:this.colors=0,this.bitPP){case 32:this.bytesInColor=4;break;case 16:this.bytesInColor=2;break;case 8:this.bytesInColor=1;break;case 4:this.bytesInColor=1/2;break;case 1:this.bytesInColor=1/8;break;default:this.bytesInColor=3,this.bitPP=24}const n=this.width*this.bitPP/32,r=Math.ceil(n);this.extraBytes=(r-n)*4,this.rawSize=this.height*r*4+2,this.fileSize=this.rawSize+this.offset,this.data=Buffer.alloc(this.fileSize,1),this.pos=0,this.encode()}encode(){switch(this.pos=0,this.writeHeader(),this.bitPP){case 32:this.bit32();break;case 16:this.bit16();break;case 8:this.bit8();break;case 4:this.bit4();break;case 1:this.bit1();break;default:this.bit24()}}writeHeader(){this.data.write(this.flag,this.pos,2),this.pos+=2,this.writeUInt32LE(this.fileSize),this.writeUInt32LE(this.reserved1<<16|this.reserved2),this.writeUInt32LE(this.offset),this.writeUInt32LE(this.headerSize),this.writeUInt32LE(this.width),this.writeUInt32LE(this.height),this.data.writeUInt16LE(this.planes,this.pos),this.pos+=2,this.data.writeUInt16LE(this.bitPP,this.pos),this.pos+=2,this.writeUInt32LE(this.compress),this.writeUInt32LE(this.rawSize),this.writeUInt32LE(this.hr),this.writeUInt32LE(this.vr),this.writeUInt32LE(this.colors),this.writeUInt32LE(this.importantColors)}bit1(){this.palette.length&&this.colors===2?this.initColors(1):(this.writeUInt32LE(16777215),this.writeUInt32LE(0)),this.pos+=1;let t=[];this.writeImage((n,r,i)=>{let o=r;o++;const a=this.buffer[o++],s=this.buffer[o++],u=this.buffer[o++]*.2126+s*.7152+a*.0722;return t.push(u>127?0:1),(i+1)%8===0?(this.data[n-1]=xg(t),t=[]):i===this.width-1&&t.length>0&&(this.data[n-1]=xg(t)<<4,t=[]),o})}bit4(){const t=this.initColors(4);let n=[];this.writeImage((r,i,o)=>{let a=i;const s=kf({quad:this.buffer[a++],blue:this.buffer[a++],green:this.buffer[a++],red:this.buffer[a++]}),c=t.findIndex(u=>u===s);return c!==-1?n.push(c):n.push(0),(o+1)%2===0&&(this.data[r]=n[0]<<4|n[1],n=[]),a})}bit8(){const t=this.initColors(8);this.writeImage((n,r)=>{let i=r;const o=kf({quad:this.buffer[i++],blue:this.buffer[i++],green:this.buffer[i++],red:this.buffer[i++]}),a=t.findIndex(s=>s===o);return a!==-1?this.data[n]=a:this.data[n]=0,i})}bit16(){this.writeImage((t,n)=>{let r=n+1;const i=this.buffer[r++]/8,o=this.buffer[r++]/8,s=this.buffer[r++]/8<<10|o<<5|i;return this.data[t]=s&255,this.data[t+1]=(s&65280)>>8,r})}bit24(){this.writeImage((t,n)=>{let r=n+1;return this.data[t]=this.buffer[r++],this.data[t+1]=this.buffer[r++],this.data[t+2]=this.buffer[r++],r})}bit32(){this.writeImage((t,n)=>{let r=n;return this.data[t+3]=this.buffer[r++],this.data[t]=this.buffer[r++],this.data[t+1]=this.buffer[r++],this.data[t+2]=this.buffer[r++],r})}writeImage(t){const n=this.extraBytes+this.width*this.bytesInColor;let r=0;for(let i=0;i<this.height;i++)for(let o=0;o<this.width;o++){const a=Math.floor(this.pos+(this.height-1-i)*n+o*this.bytesInColor);r=t.call(this,a,r,o,i)}}initColors(t){const n=[];if(this.palette.length)for(let r=0;r<this.colors;r++){const i=kf(this.palette[r]);this.writeUInt32LE(i),n.push(i)}else throw new Error(`To encode ${t}-bit BMPs a pallette is needed. Please choose up to ${this.colors} colors. Colors must be 32-bit integers.`);return n}writeUInt32LE(t){this.data.writeUInt32LE(t,this.pos),this.pos+=4}}const v4={decode:(e,t)=>new m4(e,t),encode:e=>new h4(e)},mb={supportedFileExts:["bmp"],decodeFile:async e=>{try{const t=await e.arrayBuffer(),n=Buffer.from(t),r=v4.decode(n,{toRGBA:!1}),i=r.bitPP===32&&"maskAlpha"in r,{data:o,width:a,height:s}=r;ir.assertEq(a*s*4,o.length);const c=new Uint8Array(o.length);for(let d=0;d<a*s;d++)c[d*4+0]=o[d*4+3],c[d*4+1]=o[d*4+2],c[d*4+2]=o[d*4+1],c[d*4+3]=i?o[d*4+0]:255;const u=new Uint8ClampedArray(c.buffer,c.byteOffset,c.byteLength),f=new ImageData(u,a,s);return{colorData:{format:"rgba8888",bytes:c},image:f,metadata:{width:a,height:s,diagnostics:"TODO"}}}catch(t){return{error:"Unknown error: "+t}}}},g4=Symbol("common"),x4=new Wo;function hb(e){return{format:"gaf",subKind:e.subKind,supportedFileExts:e.decoder.supportedFileExts,title:e.title,makeDefaultConfig:t=>({compatibilityKey:g4,palette:t.palette,transparencyStrategy:{kind:"auto-alpha"},transpIndexStrategy:{kind:"auto-assign"}}),createUserImage:e.decoder.decodeFile,createResource:async(t,n)=>{const{width:r,height:i}=t.metadata,{palette:o,transparencyStrategy:a,transpIndexStrategy:s}=n,c=t.colorData.bytes;ir.assertEq(r*i*4,c.length);let u=0,f=0,d=s.kind==="fixed-index"?s.fixedIndex:void 0;const p=a.kind==="custom-color"?a.color:void 0,h=[];for(let S=0;S<r*i;S++){const A=c[S*4+0],R=c[S*4+1],C=c[S*4+2],T=c[S*4+3];if(p!==void 0){const{r:L,g:$,b:O}=p,P="a"in p?p.a:void 0;if(A===L&&R===$&&C===O&&(P===void 0||T===P)){h[S]=null;continue}}if(T!==255){T!==0&&f++,h[S]=null;continue}const N=y4(A,R,C,o,d);if(N!==!1){h[S]=N;continue}u++,h[S]=w4(A,R,C,o,d)}const g=new Uint8Array(r*i);ir.assertEq(h.length,g.length);let w;if(s.kind==="auto-assign"){const S=k4(h);if(S===null)return{kind:"error",error:"Failed to auto-assign a transparency index. Please manually select an index from the palette (preferable) or reduce the number of colors used in the source image so that less than 255 unique colors are used.",resource:null};w=S}else w=s.fixedIndex;for(let S=0;S<h.length;S++){const A=h[S];g[S]=A===null?w:A}const _=Ot.createColorData(r,i,w,g,o),y=x4.compileImage(r,i,_),E={resource:{kind:"paletted",userImage:t.image,compiledImage:y,paletteIndices:g},lossyColorMatches:u,lossyAlphaMatches:f,transparencyIndex:w},b=[];return u>0&&b.push("Lossy conversion. Not every color in the source image exists in the selected palette file."),f>0&&b.push("Lossy conversion. Not every pixel was fully transparent or fully opaque. In other words, some of the pixels had a semi-transparent color (which isn't supported by the GAF format)."),b.length>0?{kind:"warning",warning:b.join("; "),result:E}:{kind:"success",result:E}}}}function y4(e,t,n,r,i){for(let o=0;o<256;o++){if(o===i)continue;const a=r.rgbData[o*3+0],s=r.rgbData[o*3+1],c=r.rgbData[o*3+2];if(e===a&&t===s&&n===c)return o}return!1}function w4(e,t,n,r,i){let o=i??null,a=1/0;for(let s=0;s<256;s++){if(s===i)continue;const c=r.rgbData[s*3+0],u=r.rgbData[s*3+1],f=r.rgbData[s*3+2],d=Math.sqrt(Math.pow(e-c,2)+Math.pow(t-u,2)+Math.pow(n-f,2));d<a&&(o=s,a=d)}return o}const b4=9;function k4(e){const t=b4;if(!e.includes(t))return t;for(let n=0;n<256;n++)if(!e.includes(n))return n;return null}const E4=Symbol("bmp"),vb=hb({subKind:E4,title:"BMP Importer",decoder:mb});/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const S4=4,yg=0,wg=1,_4=2;function Ho(e){let t=e.length;for(;--t>=0;)e[t]=0}const j4=0,gb=1,C4=2,I4=3,A4=258,uh=29,Ss=256,is=Ss+1+uh,ho=30,fh=19,xb=2*is+1,oi=15,Ef=16,N4=7,dh=256,yb=16,wb=17,bb=18,bp=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Tl=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),F4=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),kb=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T4=512,Vn=new Array((is+2)*2);Ho(Vn);const Na=new Array(ho*2);Ho(Na);const os=new Array(T4);Ho(os);const as=new Array(A4-I4+1);Ho(as);const ph=new Array(uh);Ho(ph);const Sc=new Array(ho);Ho(Sc);function Sf(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let Eb,Sb,_b;function _f(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const jb=e=>e<256?os[e]:os[256+(e>>>7)],ss=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Rt=(e,t,n)=>{e.bi_valid>Ef-n?(e.bi_buf|=t<<e.bi_valid&65535,ss(e,e.bi_buf),e.bi_buf=t>>Ef-e.bi_valid,e.bi_valid+=n-Ef):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Fn=(e,t,n)=>{Rt(e,n[t*2],n[t*2+1])},Cb=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},R4=e=>{e.bi_valid===16?(ss(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},P4=(e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,c=t.stat_desc.max_length;let u,f,d,p,h,g,w=0;for(p=0;p<=oi;p++)e.bl_count[p]=0;for(n[e.heap[e.heap_max]*2+1]=0,u=e.heap_max+1;u<xb;u++)f=e.heap[u],p=n[n[f*2+1]*2+1]+1,p>c&&(p=c,w++),n[f*2+1]=p,!(f>r)&&(e.bl_count[p]++,h=0,f>=s&&(h=a[f-s]),g=n[f*2],e.opt_len+=g*(p+h),o&&(e.static_len+=g*(i[f*2+1]+h)));if(w!==0){do{for(p=c-1;e.bl_count[p]===0;)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[c]--,w-=2}while(w>0);for(p=c;p!==0;p--)for(f=e.bl_count[p];f!==0;)d=e.heap[--u],!(d>r)&&(n[d*2+1]!==p&&(e.opt_len+=(p-n[d*2+1])*n[d*2],n[d*2+1]=p),f--)}},Ib=(e,t,n)=>{const r=new Array(oi+1);let i=0,o,a;for(o=1;o<=oi;o++)i=i+n[o-1]<<1,r[o]=i;for(a=0;a<=t;a++){let s=e[a*2+1];s!==0&&(e[a*2]=Cb(r[s]++,s))}},D4=()=>{let e,t,n,r,i;const o=new Array(oi+1);for(n=0,r=0;r<uh-1;r++)for(ph[r]=n,e=0;e<1<<bp[r];e++)as[n++]=r;for(as[n-1]=r,i=0,r=0;r<16;r++)for(Sc[r]=i,e=0;e<1<<Tl[r];e++)os[i++]=r;for(i>>=7;r<ho;r++)for(Sc[r]=i<<7,e=0;e<1<<Tl[r]-7;e++)os[256+i++]=r;for(t=0;t<=oi;t++)o[t]=0;for(e=0;e<=143;)Vn[e*2+1]=8,e++,o[8]++;for(;e<=255;)Vn[e*2+1]=9,e++,o[9]++;for(;e<=279;)Vn[e*2+1]=7,e++,o[7]++;for(;e<=287;)Vn[e*2+1]=8,e++,o[8]++;for(Ib(Vn,is+1,o),e=0;e<ho;e++)Na[e*2+1]=5,Na[e*2]=Cb(e,5);Eb=new Sf(Vn,bp,Ss+1,is,oi),Sb=new Sf(Na,Tl,0,ho,oi),_b=new Sf(new Array(0),F4,0,fh,N4)},Ab=e=>{let t;for(t=0;t<is;t++)e.dyn_ltree[t*2]=0;for(t=0;t<ho;t++)e.dyn_dtree[t*2]=0;for(t=0;t<fh;t++)e.bl_tree[t*2]=0;e.dyn_ltree[dh*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Nb=e=>{e.bi_valid>8?ss(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},bg=(e,t,n,r)=>{const i=t*2,o=n*2;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]},jf=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&bg(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!bg(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},kg=(e,t,n)=>{let r,i,o=0,a,s;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+o++]&255,r+=(e.pending_buf[e.sym_buf+o++]&255)<<8,i=e.pending_buf[e.sym_buf+o++],r===0?Fn(e,i,t):(a=as[i],Fn(e,a+Ss+1,t),s=bp[a],s!==0&&(i-=ph[a],Rt(e,i,s)),r--,a=jb(r),Fn(e,a,n),s=Tl[a],s!==0&&(r-=Sc[a],Rt(e,r,s)));while(o<e.sym_next);Fn(e,dh,t)},kp=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let a,s,c=-1,u;for(e.heap_len=0,e.heap_max=xb,a=0;a<o;a++)n[a*2]!==0?(e.heap[++e.heap_len]=c=a,e.depth[a]=0):n[a*2+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=c<2?++c:0,n[u*2]=1,e.depth[u]=0,e.opt_len--,i&&(e.static_len-=r[u*2+1]);for(t.max_code=c,a=e.heap_len>>1;a>=1;a--)jf(e,n,a);u=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],jf(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,n[u*2]=n[a*2]+n[s*2],e.depth[u]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,n[a*2+1]=n[s*2+1]=u,e.heap[1]=u++,jf(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],P4(e,t),Ib(n,c,e.bl_count)},Eg=(e,t,n)=>{let r,i=-1,o,a=t[0*2+1],s=0,c=7,u=4;for(a===0&&(c=138,u=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)o=a,a=t[(r+1)*2+1],!(++s<c&&o===a)&&(s<u?e.bl_tree[o*2]+=s:o!==0?(o!==i&&e.bl_tree[o*2]++,e.bl_tree[yb*2]++):s<=10?e.bl_tree[wb*2]++:e.bl_tree[bb*2]++,s=0,i=o,a===0?(c=138,u=3):o===a?(c=6,u=3):(c=7,u=4))},Sg=(e,t,n)=>{let r,i=-1,o,a=t[0*2+1],s=0,c=7,u=4;for(a===0&&(c=138,u=3),r=0;r<=n;r++)if(o=a,a=t[(r+1)*2+1],!(++s<c&&o===a)){if(s<u)do Fn(e,o,e.bl_tree);while(--s!==0);else o!==0?(o!==i&&(Fn(e,o,e.bl_tree),s--),Fn(e,yb,e.bl_tree),Rt(e,s-3,2)):s<=10?(Fn(e,wb,e.bl_tree),Rt(e,s-3,3)):(Fn(e,bb,e.bl_tree),Rt(e,s-11,7));s=0,i=o,a===0?(c=138,u=3):o===a?(c=6,u=3):(c=7,u=4)}},M4=e=>{let t;for(Eg(e,e.dyn_ltree,e.l_desc.max_code),Eg(e,e.dyn_dtree,e.d_desc.max_code),kp(e,e.bl_desc),t=fh-1;t>=3&&e.bl_tree[kb[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},O4=(e,t,n,r)=>{let i;for(Rt(e,t-257,5),Rt(e,n-1,5),Rt(e,r-4,4),i=0;i<r;i++)Rt(e,e.bl_tree[kb[i]*2+1],3);Sg(e,e.dyn_ltree,t-1),Sg(e,e.dyn_dtree,n-1)},L4=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return yg;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return wg;for(n=32;n<Ss;n++)if(e.dyn_ltree[n*2]!==0)return wg;return yg};let _g=!1;const B4=e=>{_g||(D4(),_g=!0),e.l_desc=new _f(e.dyn_ltree,Eb),e.d_desc=new _f(e.dyn_dtree,Sb),e.bl_desc=new _f(e.bl_tree,_b),e.bi_buf=0,e.bi_valid=0,Ab(e)},Fb=(e,t,n,r)=>{Rt(e,(j4<<1)+(r?1:0),3),Nb(e),ss(e,n),ss(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},$4=e=>{Rt(e,gb<<1,3),Fn(e,dh,Vn),R4(e)},U4=(e,t,n,r)=>{let i,o,a=0;e.level>0?(e.strm.data_type===_4&&(e.strm.data_type=L4(e)),kp(e,e.l_desc),kp(e,e.d_desc),a=M4(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&t!==-1?Fb(e,t,n,r):e.strategy===S4||o===i?(Rt(e,(gb<<1)+(r?1:0),3),kg(e,Vn,Na)):(Rt(e,(C4<<1)+(r?1:0),3),O4(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),kg(e,e.dyn_ltree,e.dyn_dtree)),Ab(e),r&&Nb(e)},z4=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(as[n]+Ss+1)*2]++,e.dyn_dtree[jb(t)*2]++),e.sym_next===e.sym_end);var G4=B4,W4=Fb,H4=U4,V4=z4,K4=$4,Z4={_tr_init:G4,_tr_stored_block:W4,_tr_flush_block:H4,_tr_tally:V4,_tr_align:K4};const q4=(e,t,n,r)=>{let i=e&65535|0,o=e>>>16&65535|0,a=0;for(;n!==0;){a=n>2e3?2e3:n,n-=a;do i=i+t[r++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0};var ls=q4;const Y4=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},X4=new Uint32Array(Y4()),Q4=(e,t,n,r)=>{const i=X4,o=r+n;e^=-1;for(let a=r;a<o;a++)e=e>>>8^i[(e^t[a])&255];return e^-1};var Qe=Q4,Fo={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},_s={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:J4,_tr_stored_block:Ep,_tr_flush_block:eA,_tr_tally:Nr,_tr_align:tA}=Z4,{Z_NO_FLUSH:Fr,Z_PARTIAL_FLUSH:nA,Z_FULL_FLUSH:rA,Z_FINISH:an,Z_BLOCK:jg,Z_OK:at,Z_STREAM_END:Cg,Z_STREAM_ERROR:Mn,Z_DATA_ERROR:iA,Z_BUF_ERROR:Cf,Z_DEFAULT_COMPRESSION:oA,Z_FILTERED:aA,Z_HUFFMAN_ONLY:el,Z_RLE:sA,Z_FIXED:lA,Z_DEFAULT_STRATEGY:cA,Z_UNKNOWN:uA,Z_DEFLATED:Iu}=_s,fA=9,dA=15,pA=8,mA=29,hA=256,Sp=hA+1+mA,vA=30,gA=19,xA=2*Sp+1,yA=15,me=3,wr=258,On=wr+me+1,wA=32,To=42,mh=57,_p=69,jp=73,Cp=91,Ip=103,ai=113,xa=666,Et=1,Vo=2,Si=3,Ko=4,bA=3,si=(e,t)=>(e.msg=Fo[t],t),Ig=e=>e*2-(e>4?9:0),vr=e=>{let t=e.length;for(;--t>=0;)e[t]=0},kA=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=i?n-i:0;while(--t);t=i,r=t;do n=e.prev[--r],e.prev[r]=n>=i?n-i:0;while(--t)};let EA=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,Tr=EA;const $t=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Wt=(e,t)=>{eA(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,$t(e.strm)},xe=(e,t)=>{e.pending_buf[e.pending++]=t},aa=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},Ap=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=ls(e.adler,t,i,n):e.state.wrap===2&&(e.adler=Qe(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Tb=(e,t)=>{let n=e.max_chain_length,r=e.strstart,i,o,a=e.prev_length,s=e.nice_match;const c=e.strstart>e.w_size-On?e.strstart-(e.w_size-On):0,u=e.window,f=e.w_mask,d=e.prev,p=e.strstart+wr;let h=u[r+a-1],g=u[r+a];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do if(i=t,!(u[i+a]!==g||u[i+a-1]!==h||u[i]!==u[r]||u[++i]!==u[r+1])){r+=2,i++;do;while(u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&u[++r]===u[++i]&&r<p);if(o=wr-(p-r),r=p-wr,o>a){if(e.match_start=t,a=o,o>=s)break;h=u[r+a-1],g=u[r+a]}}while((t=d[t&f])>c&&--n!==0);return a<=e.lookahead?a:e.lookahead},Ro=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-On)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),kA(e),r+=t),e.strm.avail_in===0)break;if(n=Ap(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=me)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Tr(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Tr(e,e.ins_h,e.window[i+me-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<me)););}while(e.lookahead<On&&e.strm.avail_in!==0)},Rb=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,i,o,a=0,s=e.strm.avail_in;do{if(r=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o||(o=e.strm.avail_out-o,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>o&&(r=o),r<n&&(r===0&&t!==an||t===Fr||r!==i+e.strm.avail_in)))break;a=t===an&&r===i+e.strm.avail_in?1:0,Ep(e,0,0,a),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,$t(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(Ap(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(a===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?Ko:t!==Fr&&t!==an&&e.strm.avail_in===0&&e.strstart===e.block_start?Vo:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(Ap(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,n=o>e.w_size?e.w_size:o,i=e.strstart-e.block_start,(i>=n||(i||t===an)&&t!==Fr&&e.strm.avail_in===0&&i<=o)&&(r=i>o?o:i,a=t===an&&e.strm.avail_in===0&&r===i?1:0,Ep(e,e.block_start,r,a),e.block_start+=r,$t(e.strm)),a?Si:Et)},If=(e,t)=>{let n,r;for(;;){if(e.lookahead<On){if(Ro(e),e.lookahead<On&&t===Fr)return Et;if(e.lookahead===0)break}if(n=0,e.lookahead>=me&&(e.ins_h=Tr(e,e.ins_h,e.window[e.strstart+me-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-On&&(e.match_length=Tb(e,n)),e.match_length>=me)if(r=Nr(e,e.strstart-e.match_start,e.match_length-me),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=me){e.match_length--;do e.strstart++,e.ins_h=Tr(e,e.ins_h,e.window[e.strstart+me-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Tr(e,e.ins_h,e.window[e.strstart+1]);else r=Nr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Wt(e,!1),e.strm.avail_out===0))return Et}return e.insert=e.strstart<me-1?e.strstart:me-1,t===an?(Wt(e,!0),e.strm.avail_out===0?Si:Ko):e.sym_next&&(Wt(e,!1),e.strm.avail_out===0)?Et:Vo},Mi=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<On){if(Ro(e),e.lookahead<On&&t===Fr)return Et;if(e.lookahead===0)break}if(n=0,e.lookahead>=me&&(e.ins_h=Tr(e,e.ins_h,e.window[e.strstart+me-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=me-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-On&&(e.match_length=Tb(e,n),e.match_length<=5&&(e.strategy===aA||e.match_length===me&&e.strstart-e.match_start>4096)&&(e.match_length=me-1)),e.prev_length>=me&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-me,r=Nr(e,e.strstart-1-e.prev_match,e.prev_length-me),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=Tr(e,e.ins_h,e.window[e.strstart+me-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=me-1,e.strstart++,r&&(Wt(e,!1),e.strm.avail_out===0))return Et}else if(e.match_available){if(r=Nr(e,0,e.window[e.strstart-1]),r&&Wt(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Et}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Nr(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<me-1?e.strstart:me-1,t===an?(Wt(e,!0),e.strm.avail_out===0?Si:Ko):e.sym_next&&(Wt(e,!1),e.strm.avail_out===0)?Et:Vo},SA=(e,t)=>{let n,r,i,o;const a=e.window;for(;;){if(e.lookahead<=wr){if(Ro(e),e.lookahead<=wr&&t===Fr)return Et;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=me&&e.strstart>0&&(i=e.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){o=e.strstart+wr;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=wr-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=me?(n=Nr(e,1,e.match_length-me),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Nr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Wt(e,!1),e.strm.avail_out===0))return Et}return e.insert=0,t===an?(Wt(e,!0),e.strm.avail_out===0?Si:Ko):e.sym_next&&(Wt(e,!1),e.strm.avail_out===0)?Et:Vo},_A=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(Ro(e),e.lookahead===0)){if(t===Fr)return Et;break}if(e.match_length=0,n=Nr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Wt(e,!1),e.strm.avail_out===0))return Et}return e.insert=0,t===an?(Wt(e,!0),e.strm.avail_out===0?Si:Ko):e.sym_next&&(Wt(e,!1),e.strm.avail_out===0)?Et:Vo};function jn(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const ya=[new jn(0,0,0,0,Rb),new jn(4,4,8,4,If),new jn(4,5,16,8,If),new jn(4,6,32,32,If),new jn(4,4,16,16,Mi),new jn(8,16,32,32,Mi),new jn(8,16,128,128,Mi),new jn(8,32,128,256,Mi),new jn(32,128,258,1024,Mi),new jn(32,258,258,4096,Mi)],jA=e=>{e.window_size=2*e.w_size,vr(e.head),e.max_lazy_match=ya[e.level].max_lazy,e.good_match=ya[e.level].good_length,e.nice_match=ya[e.level].nice_length,e.max_chain_length=ya[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=me-1,e.match_available=0,e.ins_h=0};function CA(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Iu,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(xA*2),this.dyn_dtree=new Uint16Array((2*vA+1)*2),this.bl_tree=new Uint16Array((2*gA+1)*2),vr(this.dyn_ltree),vr(this.dyn_dtree),vr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(yA+1),this.heap=new Uint16Array(2*Sp+1),vr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Sp+1),vr(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const js=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==To&&t.status!==mh&&t.status!==_p&&t.status!==jp&&t.status!==Cp&&t.status!==Ip&&t.status!==ai&&t.status!==xa?1:0},Pb=e=>{if(js(e))return si(e,Mn);e.total_in=e.total_out=0,e.data_type=uA;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?mh:t.wrap?To:ai,e.adler=t.wrap===2?0:1,t.last_flush=-2,J4(t),at},Db=e=>{const t=Pb(e);return t===at&&jA(e.state),t},IA=(e,t)=>js(e)||e.state.wrap!==2?Mn:(e.state.gzhead=t,at),Mb=(e,t,n,r,i,o)=>{if(!e)return Mn;let a=1;if(t===oA&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>fA||n!==Iu||r<8||r>15||t<0||t>9||o<0||o>lA||r===8&&a!==1)return si(e,Mn);r===8&&(r=9);const s=new CA;return e.state=s,s.strm=e,s.status=To,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+me-1)/me),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=o,s.method=n,Db(e)},AA=(e,t)=>Mb(e,t,Iu,dA,pA,cA),NA=(e,t)=>{if(js(e)||t>jg||t<0)return e?si(e,Mn):Mn;const n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===xa&&t!==an)return si(e,e.avail_out===0?Cf:Mn);const r=n.last_flush;if(n.last_flush=t,n.pending!==0){if($t(e),e.avail_out===0)return n.last_flush=-1,at}else if(e.avail_in===0&&Ig(t)<=Ig(r)&&t!==an)return si(e,Cf);if(n.status===xa&&e.avail_in!==0)return si(e,Cf);if(n.status===To&&n.wrap===0&&(n.status=ai),n.status===To){let i=Iu+(n.w_bits-8<<4)<<8,o=-1;if(n.strategy>=el||n.level<2?o=0:n.level<6?o=1:n.level===6?o=2:o=3,i|=o<<6,n.strstart!==0&&(i|=wA),i+=31-i%31,aa(n,i),n.strstart!==0&&(aa(n,e.adler>>>16),aa(n,e.adler&65535)),e.adler=1,n.status=ai,$t(e),n.pending!==0)return n.last_flush=-1,at}if(n.status===mh){if(e.adler=0,xe(n,31),xe(n,139),xe(n,8),n.gzhead)xe(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),xe(n,n.gzhead.time&255),xe(n,n.gzhead.time>>8&255),xe(n,n.gzhead.time>>16&255),xe(n,n.gzhead.time>>24&255),xe(n,n.level===9?2:n.strategy>=el||n.level<2?4:0),xe(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(xe(n,n.gzhead.extra.length&255),xe(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Qe(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=_p;else if(xe(n,0),xe(n,0),xe(n,0),xe(n,0),xe(n,0),xe(n,n.level===9?2:n.strategy>=el||n.level<2?4:0),xe(n,bA),n.status=ai,$t(e),n.pending!==0)return n.last_flush=-1,at}if(n.status===_p){if(n.gzhead.extra){let i=n.pending,o=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+o>n.pending_buf_size;){let s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(e.adler=Qe(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=s,$t(e),n.pending!==0)return n.last_flush=-1,at;i=0,o-=s}let a=new Uint8Array(n.gzhead.extra);n.pending_buf.set(a.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending+=o,n.gzhead.hcrc&&n.pending>i&&(e.adler=Qe(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=jp}if(n.status===jp){if(n.gzhead.name){let i=n.pending,o;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Qe(e.adler,n.pending_buf,n.pending-i,i)),$t(e),n.pending!==0)return n.last_flush=-1,at;i=0}n.gzindex<n.gzhead.name.length?o=n.gzhead.name.charCodeAt(n.gzindex++)&255:o=0,xe(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=Qe(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=Cp}if(n.status===Cp){if(n.gzhead.comment){let i=n.pending,o;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=Qe(e.adler,n.pending_buf,n.pending-i,i)),$t(e),n.pending!==0)return n.last_flush=-1,at;i=0}n.gzindex<n.gzhead.comment.length?o=n.gzhead.comment.charCodeAt(n.gzindex++)&255:o=0,xe(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=Qe(e.adler,n.pending_buf,n.pending-i,i))}n.status=Ip}if(n.status===Ip){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&($t(e),n.pending!==0))return n.last_flush=-1,at;xe(n,e.adler&255),xe(n,e.adler>>8&255),e.adler=0}if(n.status=ai,$t(e),n.pending!==0)return n.last_flush=-1,at}if(e.avail_in!==0||n.lookahead!==0||t!==Fr&&n.status!==xa){let i=n.level===0?Rb(n,t):n.strategy===el?_A(n,t):n.strategy===sA?SA(n,t):ya[n.level].func(n,t);if((i===Si||i===Ko)&&(n.status=xa),i===Et||i===Si)return e.avail_out===0&&(n.last_flush=-1),at;if(i===Vo&&(t===nA?tA(n):t!==jg&&(Ep(n,0,0,!1),t===rA&&(vr(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),$t(e),e.avail_out===0))return n.last_flush=-1,at}return t!==an?at:n.wrap<=0?Cg:(n.wrap===2?(xe(n,e.adler&255),xe(n,e.adler>>8&255),xe(n,e.adler>>16&255),xe(n,e.adler>>24&255),xe(n,e.total_in&255),xe(n,e.total_in>>8&255),xe(n,e.total_in>>16&255),xe(n,e.total_in>>24&255)):(aa(n,e.adler>>>16),aa(n,e.adler&65535)),$t(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?at:Cg)},FA=e=>{if(js(e))return Mn;const t=e.state.status;return e.state=null,t===ai?si(e,iA):at},TA=(e,t)=>{let n=t.length;if(js(e))return Mn;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==To||r.lookahead)return Mn;if(i===1&&(e.adler=ls(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(vr(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(t.subarray(n-r.w_size,n),0),t=c,n=r.w_size}const o=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Ro(r);r.lookahead>=me;){let c=r.strstart,u=r.lookahead-(me-1);do r.ins_h=Tr(r,r.ins_h,r.window[c+me-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--u);r.strstart=c,r.lookahead=me-1,Ro(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=me-1,r.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,r.wrap=i,at};var RA=AA,PA=Mb,DA=Db,MA=Pb,OA=IA,LA=NA,BA=FA,$A=TA,UA="pako deflate (from Nodeca project)",Fa={deflateInit:RA,deflateInit2:PA,deflateReset:DA,deflateResetKeep:MA,deflateSetHeader:OA,deflate:LA,deflateEnd:BA,deflateSetDictionary:$A,deflateInfo:UA};const zA=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var GA=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)zA(n,r)&&(e[r]=n[r])}}return e},WA=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,o=e.length;r<o;r++){let a=e[r];n.set(a,i),i+=a.length}return n},Au={assign:GA,flattenChunks:WA};let Ob=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ob=!1}const cs=new Uint8Array(256);for(let e=0;e<256;e++)cs[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;cs[254]=cs[254]=1;var HA=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<a&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|n&63):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|n&63):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|n&63);return t};const VA=(e,t)=>{if(t<65534&&e.subarray&&Ob)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var KA=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i;const o=new Array(n*2);for(i=0,r=0;r<n;){let a=e[r++];if(a<128){o[i++]=a;continue}let s=cs[a];if(s>4){o[i++]=65533,r+=s-1;continue}for(a&=s===2?31:s===3?15:7;s>1&&r<n;)a=a<<6|e[r++]&63,s--;if(s>1){o[i++]=65533;continue}a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|a&1023)}return VA(o,i)},ZA=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+cs[e[n]]>t?n:t},us={string2buf:HA,buf2string:KA,utf8border:ZA};function qA(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Lb=qA;const Bb=Object.prototype.toString,{Z_NO_FLUSH:YA,Z_SYNC_FLUSH:XA,Z_FULL_FLUSH:QA,Z_FINISH:JA,Z_OK:_c,Z_STREAM_END:eN,Z_DEFAULT_COMPRESSION:tN,Z_DEFAULT_STRATEGY:nN,Z_DEFLATED:rN}=_s;function hh(e){this.options=Au.assign({level:tN,method:rN,chunkSize:16384,windowBits:15,memLevel:8,strategy:nN},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Lb,this.strm.avail_out=0;let n=Fa.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==_c)throw new Error(Fo[n]);if(t.header&&Fa.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=us.string2buf(t.dictionary):Bb.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=Fa.deflateSetDictionary(this.strm,r),n!==_c)throw new Error(Fo[n]);this._dict_set=!0}}hh.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,o;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?JA:YA,typeof e=="string"?n.input=us.string2buf(e):Bb.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(o===XA||o===QA)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=Fa.deflate(n,o),i===eN)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Fa.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===_c;if(n.avail_out===0){this.onData(n.output);continue}if(o>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};hh.prototype.onData=function(e){this.chunks.push(e)};hh.prototype.onEnd=function(e){e===_c&&(this.result=Au.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const tl=16209,iN=16191;var oN=function(t,n){let r,i,o,a,s,c,u,f,d,p,h,g,w,_,y,x,E,b,S,A,R,C,T,N;const L=t.state;r=t.next_in,T=t.input,i=r+(t.avail_in-5),o=t.next_out,N=t.output,a=o-(n-t.avail_out),s=o+(t.avail_out-257),c=L.dmax,u=L.wsize,f=L.whave,d=L.wnext,p=L.window,h=L.hold,g=L.bits,w=L.lencode,_=L.distcode,y=(1<<L.lenbits)-1,x=(1<<L.distbits)-1;e:do{g<15&&(h+=T[r++]<<g,g+=8,h+=T[r++]<<g,g+=8),E=w[h&y];t:for(;;){if(b=E>>>24,h>>>=b,g-=b,b=E>>>16&255,b===0)N[o++]=E&65535;else if(b&16){S=E&65535,b&=15,b&&(g<b&&(h+=T[r++]<<g,g+=8),S+=h&(1<<b)-1,h>>>=b,g-=b),g<15&&(h+=T[r++]<<g,g+=8,h+=T[r++]<<g,g+=8),E=_[h&x];n:for(;;){if(b=E>>>24,h>>>=b,g-=b,b=E>>>16&255,b&16){if(A=E&65535,b&=15,g<b&&(h+=T[r++]<<g,g+=8,g<b&&(h+=T[r++]<<g,g+=8)),A+=h&(1<<b)-1,A>c){t.msg="invalid distance too far back",L.mode=tl;break e}if(h>>>=b,g-=b,b=o-a,A>b){if(b=A-b,b>f&&L.sane){t.msg="invalid distance too far back",L.mode=tl;break e}if(R=0,C=p,d===0){if(R+=u-b,b<S){S-=b;do N[o++]=p[R++];while(--b);R=o-A,C=N}}else if(d<b){if(R+=u+d-b,b-=d,b<S){S-=b;do N[o++]=p[R++];while(--b);if(R=0,d<S){b=d,S-=b;do N[o++]=p[R++];while(--b);R=o-A,C=N}}}else if(R+=d-b,b<S){S-=b;do N[o++]=p[R++];while(--b);R=o-A,C=N}for(;S>2;)N[o++]=C[R++],N[o++]=C[R++],N[o++]=C[R++],S-=3;S&&(N[o++]=C[R++],S>1&&(N[o++]=C[R++]))}else{R=o-A;do N[o++]=N[R++],N[o++]=N[R++],N[o++]=N[R++],S-=3;while(S>2);S&&(N[o++]=N[R++],S>1&&(N[o++]=N[R++]))}}else if(b&64){t.msg="invalid distance code",L.mode=tl;break e}else{E=_[(E&65535)+(h&(1<<b)-1)];continue n}break}}else if(b&64)if(b&32){L.mode=iN;break e}else{t.msg="invalid literal/length code",L.mode=tl;break e}else{E=w[(E&65535)+(h&(1<<b)-1)];continue t}break}}while(r<i&&o<s);S=g>>3,r-=S,g-=S<<3,h&=(1<<g)-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=o<s?257+(s-o):257-(o-s),L.hold=h,L.bits=g};const Oi=15,Ag=852,Ng=592,Fg=0,Af=1,Tg=2,aN=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),sN=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),lN=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),cN=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),uN=(e,t,n,r,i,o,a,s)=>{const c=s.bits;let u=0,f=0,d=0,p=0,h=0,g=0,w=0,_=0,y=0,x=0,E,b,S,A,R,C=null,T;const N=new Uint16Array(Oi+1),L=new Uint16Array(Oi+1);let $=null,O,P,M;for(u=0;u<=Oi;u++)N[u]=0;for(f=0;f<r;f++)N[t[n+f]]++;for(h=c,p=Oi;p>=1&&N[p]===0;p--);if(h>p&&(h=p),p===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,s.bits=1,0;for(d=1;d<p&&N[d]===0;d++);for(h<d&&(h=d),_=1,u=1;u<=Oi;u++)if(_<<=1,_-=N[u],_<0)return-1;if(_>0&&(e===Fg||p!==1))return-1;for(L[1]=0,u=1;u<Oi;u++)L[u+1]=L[u]+N[u];for(f=0;f<r;f++)t[n+f]!==0&&(a[L[t[n+f]]++]=f);if(e===Fg?(C=$=a,T=20):e===Af?(C=aN,$=sN,T=257):(C=lN,$=cN,T=0),x=0,f=0,u=d,R=o,g=h,w=0,S=-1,y=1<<h,A=y-1,e===Af&&y>Ag||e===Tg&&y>Ng)return 1;for(;;){O=u-w,a[f]+1<T?(P=0,M=a[f]):a[f]>=T?(P=$[a[f]-T],M=C[a[f]-T]):(P=96,M=0),E=1<<u-w,b=1<<g,d=b;do b-=E,i[R+(x>>w)+b]=O<<24|P<<16|M|0;while(b!==0);for(E=1<<u-1;x&E;)E>>=1;if(E!==0?(x&=E-1,x+=E):x=0,f++,--N[u]===0){if(u===p)break;u=t[n+a[f]]}if(u>h&&(x&A)!==S){for(w===0&&(w=h),R+=d,g=u-w,_=1<<g;g+w<p&&(_-=N[g+w],!(_<=0));)g++,_<<=1;if(y+=1<<g,e===Af&&y>Ag||e===Tg&&y>Ng)return 1;S=x&A,i[S]=h<<24|g<<16|R-o|0}}return x!==0&&(i[R+x]=u-w<<24|64<<16|0),s.bits=h,0};var Ta=uN;const fN=0,$b=1,Ub=2,{Z_FINISH:Rg,Z_BLOCK:dN,Z_TREES:nl,Z_OK:_i,Z_STREAM_END:pN,Z_NEED_DICT:mN,Z_STREAM_ERROR:dn,Z_DATA_ERROR:zb,Z_MEM_ERROR:Gb,Z_BUF_ERROR:hN,Z_DEFLATED:Pg}=_s,Nu=16180,Dg=16181,Mg=16182,Og=16183,Lg=16184,Bg=16185,$g=16186,Ug=16187,zg=16188,Gg=16189,jc=16190,Un=16191,Nf=16192,Wg=16193,Ff=16194,Hg=16195,Vg=16196,Kg=16197,Zg=16198,rl=16199,il=16200,qg=16201,Yg=16202,Xg=16203,Qg=16204,Jg=16205,Tf=16206,e0=16207,t0=16208,Fe=16209,Wb=16210,Hb=16211,vN=852,gN=592,xN=15,yN=xN,n0=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function wN(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ti=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Nu||t.mode>Hb?1:0},Vb=e=>{if(Ti(e))return dn;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Nu,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(vN),t.distcode=t.distdyn=new Int32Array(gN),t.sane=1,t.back=-1,_i},Kb=e=>{if(Ti(e))return dn;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Vb(e)},Zb=(e,t)=>{let n;if(Ti(e))return dn;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?dn:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Kb(e))},qb=(e,t)=>{if(!e)return dn;const n=new wN;e.state=n,n.strm=e,n.window=null,n.mode=Nu;const r=Zb(e,t);return r!==_i&&(e.state=null),r},bN=e=>qb(e,yN);let r0=!0,Rf,Pf;const kN=e=>{if(r0){Rf=new Int32Array(512),Pf=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Ta($b,e.lens,0,288,Rf,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Ta(Ub,e.lens,0,32,Pf,0,e.work,{bits:5}),r0=!1}e.lencode=Rf,e.lenbits=9,e.distcode=Pf,e.distbits=5},Yb=(e,t,n,r)=>{let i;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(t.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(t.subarray(n-r,n-r+i),o.wnext),r-=i,r?(o.window.set(t.subarray(n-r,n),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},EN=(e,t)=>{let n,r,i,o,a,s,c,u,f,d,p,h,g,w,_=0,y,x,E,b,S,A,R,C;const T=new Uint8Array(4);let N,L;const $=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ti(e)||!e.output||!e.input&&e.avail_in!==0)return dn;n=e.state,n.mode===Un&&(n.mode=Nf),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,u=n.hold,f=n.bits,d=s,p=c,C=_i;e:for(;;)switch(n.mode){case Nu:if(n.wrap===0){n.mode=Nf;break}for(;f<16;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}if(n.wrap&2&&u===35615){n.wbits===0&&(n.wbits=15),n.check=0,T[0]=u&255,T[1]=u>>>8&255,n.check=Qe(n.check,T,2,0),u=0,f=0,n.mode=Dg;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=Fe;break}if((u&15)!==Pg){e.msg="unknown compression method",n.mode=Fe;break}if(u>>>=4,f-=4,R=(u&15)+8,n.wbits===0&&(n.wbits=R),R>15||R>n.wbits){e.msg="invalid window size",n.mode=Fe;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=u&512?Gg:Un,u=0,f=0;break;case Dg:for(;f<16;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}if(n.flags=u,(n.flags&255)!==Pg){e.msg="unknown compression method",n.mode=Fe;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Fe;break}n.head&&(n.head.text=u>>8&1),n.flags&512&&n.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,n.check=Qe(n.check,T,2,0)),u=0,f=0,n.mode=Mg;case Mg:for(;f<32;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}n.head&&(n.head.time=u),n.flags&512&&n.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,T[2]=u>>>16&255,T[3]=u>>>24&255,n.check=Qe(n.check,T,4,0)),u=0,f=0,n.mode=Og;case Og:for(;f<16;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}n.head&&(n.head.xflags=u&255,n.head.os=u>>8),n.flags&512&&n.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,n.check=Qe(n.check,T,2,0)),u=0,f=0,n.mode=Lg;case Lg:if(n.flags&1024){for(;f<16;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}n.length=u,n.head&&(n.head.extra_len=u),n.flags&512&&n.wrap&4&&(T[0]=u&255,T[1]=u>>>8&255,n.check=Qe(n.check,T,2,0)),u=0,f=0}else n.head&&(n.head.extra=null);n.mode=Bg;case Bg:if(n.flags&1024&&(h=n.length,h>s&&(h=s),h&&(n.head&&(R=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(o,o+h),R)),n.flags&512&&n.wrap&4&&(n.check=Qe(n.check,r,h,o)),s-=h,o+=h,n.length-=h),n.length))break e;n.length=0,n.mode=$g;case $g:if(n.flags&2048){if(s===0)break e;h=0;do R=r[o+h++],n.head&&R&&n.length<65536&&(n.head.name+=String.fromCharCode(R));while(R&&h<s);if(n.flags&512&&n.wrap&4&&(n.check=Qe(n.check,r,h,o)),s-=h,o+=h,R)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Ug;case Ug:if(n.flags&4096){if(s===0)break e;h=0;do R=r[o+h++],n.head&&R&&n.length<65536&&(n.head.comment+=String.fromCharCode(R));while(R&&h<s);if(n.flags&512&&n.wrap&4&&(n.check=Qe(n.check,r,h,o)),s-=h,o+=h,R)break e}else n.head&&(n.head.comment=null);n.mode=zg;case zg:if(n.flags&512){for(;f<16;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}if(n.wrap&4&&u!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Fe;break}u=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Un;break;case Gg:for(;f<32;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}e.adler=n.check=n0(u),u=0,f=0,n.mode=jc;case jc:if(n.havedict===0)return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=f,mN;e.adler=n.check=1,n.mode=Un;case Un:if(t===dN||t===nl)break e;case Nf:if(n.last){u>>>=f&7,f-=f&7,n.mode=Tf;break}for(;f<3;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}switch(n.last=u&1,u>>>=1,f-=1,u&3){case 0:n.mode=Wg;break;case 1:if(kN(n),n.mode=rl,t===nl){u>>>=2,f-=2;break e}break;case 2:n.mode=Vg;break;case 3:e.msg="invalid block type",n.mode=Fe}u>>>=2,f-=2;break;case Wg:for(u>>>=f&7,f-=f&7;f<32;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Fe;break}if(n.length=u&65535,u=0,f=0,n.mode=Ff,t===nl)break e;case Ff:n.mode=Hg;case Hg:if(h=n.length,h){if(h>s&&(h=s),h>c&&(h=c),h===0)break e;i.set(r.subarray(o,o+h),a),s-=h,o+=h,c-=h,a+=h,n.length-=h;break}n.mode=Un;break;case Vg:for(;f<14;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}if(n.nlen=(u&31)+257,u>>>=5,f-=5,n.ndist=(u&31)+1,u>>>=5,f-=5,n.ncode=(u&15)+4,u>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Fe;break}n.have=0,n.mode=Kg;case Kg:for(;n.have<n.ncode;){for(;f<3;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}n.lens[$[n.have++]]=u&7,u>>>=3,f-=3}for(;n.have<19;)n.lens[$[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,N={bits:n.lenbits},C=Ta(fN,n.lens,0,19,n.lencode,0,n.work,N),n.lenbits=N.bits,C){e.msg="invalid code lengths set",n.mode=Fe;break}n.have=0,n.mode=Zg;case Zg:for(;n.have<n.nlen+n.ndist;){for(;_=n.lencode[u&(1<<n.lenbits)-1],y=_>>>24,x=_>>>16&255,E=_&65535,!(y<=f);){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}if(E<16)u>>>=y,f-=y,n.lens[n.have++]=E;else{if(E===16){for(L=y+2;f<L;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}if(u>>>=y,f-=y,n.have===0){e.msg="invalid bit length repeat",n.mode=Fe;break}R=n.lens[n.have-1],h=3+(u&3),u>>>=2,f-=2}else if(E===17){for(L=y+3;f<L;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}u>>>=y,f-=y,R=0,h=3+(u&7),u>>>=3,f-=3}else{for(L=y+7;f<L;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}u>>>=y,f-=y,R=0,h=11+(u&127),u>>>=7,f-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Fe;break}for(;h--;)n.lens[n.have++]=R}}if(n.mode===Fe)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Fe;break}if(n.lenbits=9,N={bits:n.lenbits},C=Ta($b,n.lens,0,n.nlen,n.lencode,0,n.work,N),n.lenbits=N.bits,C){e.msg="invalid literal/lengths set",n.mode=Fe;break}if(n.distbits=6,n.distcode=n.distdyn,N={bits:n.distbits},C=Ta(Ub,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N),n.distbits=N.bits,C){e.msg="invalid distances set",n.mode=Fe;break}if(n.mode=rl,t===nl)break e;case rl:n.mode=il;case il:if(s>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=f,oN(e,p),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,u=n.hold,f=n.bits,n.mode===Un&&(n.back=-1);break}for(n.back=0;_=n.lencode[u&(1<<n.lenbits)-1],y=_>>>24,x=_>>>16&255,E=_&65535,!(y<=f);){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}if(x&&!(x&240)){for(b=y,S=x,A=E;_=n.lencode[A+((u&(1<<b+S)-1)>>b)],y=_>>>24,x=_>>>16&255,E=_&65535,!(b+y<=f);){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}u>>>=b,f-=b,n.back+=b}if(u>>>=y,f-=y,n.back+=y,n.length=E,x===0){n.mode=Jg;break}if(x&32){n.back=-1,n.mode=Un;break}if(x&64){e.msg="invalid literal/length code",n.mode=Fe;break}n.extra=x&15,n.mode=qg;case qg:if(n.extra){for(L=n.extra;f<L;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Yg;case Yg:for(;_=n.distcode[u&(1<<n.distbits)-1],y=_>>>24,x=_>>>16&255,E=_&65535,!(y<=f);){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}if(!(x&240)){for(b=y,S=x,A=E;_=n.distcode[A+((u&(1<<b+S)-1)>>b)],y=_>>>24,x=_>>>16&255,E=_&65535,!(b+y<=f);){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}u>>>=b,f-=b,n.back+=b}if(u>>>=y,f-=y,n.back+=y,x&64){e.msg="invalid distance code",n.mode=Fe;break}n.offset=E,n.extra=x&15,n.mode=Xg;case Xg:if(n.extra){for(L=n.extra;f<L;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Fe;break}n.mode=Qg;case Qg:if(c===0)break e;if(h=p-c,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Fe;break}h>n.wnext?(h-=n.wnext,g=n.wsize-h):g=n.wnext-h,h>n.length&&(h=n.length),w=n.window}else w=i,g=a-n.offset,h=n.length;h>c&&(h=c),c-=h,n.length-=h;do i[a++]=w[g++];while(--h);n.length===0&&(n.mode=il);break;case Jg:if(c===0)break e;i[a++]=n.length,c--,n.mode=il;break;case Tf:if(n.wrap){for(;f<32;){if(s===0)break e;s--,u|=r[o++]<<f,f+=8}if(p-=c,e.total_out+=p,n.total+=p,n.wrap&4&&p&&(e.adler=n.check=n.flags?Qe(n.check,i,p,a-p):ls(n.check,i,p,a-p)),p=c,n.wrap&4&&(n.flags?u:n0(u))!==n.check){e.msg="incorrect data check",n.mode=Fe;break}u=0,f=0}n.mode=e0;case e0:if(n.wrap&&n.flags){for(;f<32;){if(s===0)break e;s--,u+=r[o++]<<f,f+=8}if(n.wrap&4&&u!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Fe;break}u=0,f=0}n.mode=t0;case t0:C=pN;break e;case Fe:C=zb;break e;case Wb:return Gb;case Hb:default:return dn}return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=f,(n.wsize||p!==e.avail_out&&n.mode<Fe&&(n.mode<Tf||t!==Rg))&&Yb(e,e.output,e.next_out,p-e.avail_out),d-=e.avail_in,p-=e.avail_out,e.total_in+=d,e.total_out+=p,n.total+=p,n.wrap&4&&p&&(e.adler=n.check=n.flags?Qe(n.check,i,p,e.next_out-p):ls(n.check,i,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Un?128:0)+(n.mode===rl||n.mode===Ff?256:0),(d===0&&p===0||t===Rg)&&C===_i&&(C=hN),C},SN=e=>{if(Ti(e))return dn;let t=e.state;return t.window&&(t.window=null),e.state=null,_i},_N=(e,t)=>{if(Ti(e))return dn;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,_i):dn},jN=(e,t)=>{const n=t.length;let r,i,o;return Ti(e)||(r=e.state,r.wrap!==0&&r.mode!==jc)?dn:r.mode===jc&&(i=1,i=ls(i,t,n,0),i!==r.check)?zb:(o=Yb(e,t,n,n),o?(r.mode=Wb,Gb):(r.havedict=1,_i))};var CN=Kb,IN=Zb,AN=Vb,NN=bN,FN=qb,TN=EN,RN=SN,PN=_N,DN=jN,MN="pako inflate (from Nodeca project)",Kn={inflateReset:CN,inflateReset2:IN,inflateResetKeep:AN,inflateInit:NN,inflateInit2:FN,inflate:TN,inflateEnd:RN,inflateGetHeader:PN,inflateSetDictionary:DN,inflateInfo:MN};function ON(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var LN=ON;const Xb=Object.prototype.toString,{Z_NO_FLUSH:BN,Z_FINISH:$N,Z_OK:fs,Z_STREAM_END:Df,Z_NEED_DICT:Mf,Z_STREAM_ERROR:UN,Z_DATA_ERROR:i0,Z_MEM_ERROR:zN}=_s;function Cs(e){this.options=Au.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Lb,this.strm.avail_out=0;let n=Kn.inflateInit2(this.strm,t.windowBits);if(n!==fs)throw new Error(Fo[n]);if(this.header=new LN,Kn.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=us.string2buf(t.dictionary):Xb.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Kn.inflateSetDictionary(this.strm,t.dictionary),n!==fs)))throw new Error(Fo[n])}Cs.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,a,s;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?$N:BN,Xb.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),o=Kn.inflate(n,a),o===Mf&&i&&(o=Kn.inflateSetDictionary(n,i),o===fs?o=Kn.inflate(n,a):o===i0&&(o=Mf));n.avail_in>0&&o===Df&&n.state.wrap>0&&e[n.next_in]!==0;)Kn.inflateReset(n),o=Kn.inflate(n,a);switch(o){case UN:case i0:case Mf:case zN:return this.onEnd(o),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||o===Df))if(this.options.to==="string"){let c=us.utf8border(n.output,n.next_out),u=n.next_out-c,f=us.buf2string(n.output,c);n.next_out=u,n.avail_out=r-u,u&&n.output.set(n.output.subarray(c,c+u),0),this.onData(f)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(o===fs&&s===0)){if(o===Df)return o=Kn.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Cs.prototype.onData=function(e){this.chunks.push(e)};Cs.prototype.onEnd=function(e){e===fs&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Au.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function vh(e,t){const n=new Cs(t);if(n.push(e),n.err)throw n.msg||Fo[n.err];return n.result}function GN(e,t){return t=t||{},t.raw=!0,vh(e,t)}var WN=Cs,HN=vh,VN=GN,KN=vh,ZN=_s,qN={Inflate:WN,inflate:HN,inflateRaw:VN,ungzip:KN,constants:ZN};const{Inflate:LO,inflate:YN,inflateRaw:BO,ungzip:$O}=qN;var Qb=YN;const Jb=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;Jb[e]=t}function XN(e){let t=-1;for(let n=0;n<e.length;n++)t=Jb[(t^e[n])&255]^t>>>8;return t^-1}var Te;(function(e){e[e.GRAYSCALE=0]="GRAYSCALE",e[e.TRUE_COLOR=2]="TRUE_COLOR",e[e.PALETTE=3]="PALETTE",e[e.GRAYSCALE_WITH_ALPHA=4]="GRAYSCALE_WITH_ALPHA",e[e.TRUE_COLOR_WITH_ALPHA=6]="TRUE_COLOR_WITH_ALPHA"})(Te||(Te={}));const QN={[Te.GRAYSCALE]:1,[Te.TRUE_COLOR]:3,[Te.PALETTE]:1,[Te.GRAYSCALE_WITH_ALPHA]:2,[Te.TRUE_COLOR_WITH_ALPHA]:4},JN=1;var zt;(function(e){e[e.NONE=0]="NONE",e[e.SUB=1]="SUB",e[e.UP=2]="UP",e[e.AVERAGE=3]="AVERAGE",e[e.PAETH=4]="PAETH"})(zt||(zt={}));const eF={[zt.NONE](e){return e},[zt.SUB](e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++){const i=n[r-t]||0;n[r]=e[r]+i}return n},[zt.UP](e,t,n){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++){const o=n[i]||0;r[i]=o+e[i]}return r},[zt.AVERAGE](e,t,n){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++){const o=r[i-t]||0,a=n[i]||0,s=o+a>>1;r[i]=e[i]+s}return r},[zt.PAETH](e,t,n){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++){const o=r[i-t]||0,a=n[i],s=n[i-t]||0,c=ek(o,a,s);r[i]=e[i]+c}return r}};zt.NONE+"",zt.SUB+"",zt.UP+"",zt.AVERAGE+"",zt.PAETH+"";function ek(e,t,n){const r=e+t-n,i=Math.abs(r-e),o=Math.abs(r-t),a=Math.abs(r-n);return i<=o&&i<=a?e:o<=a?t:n}function Je(e,t,n){if(t===n)return e;const r=2**t-1,i=2**n-1;return Math.round(e*i/r)}function tF(e,t){const n=[];let r=0;for(;r<e.length;)if(t===1){const i=e[r++];n.push(i>>7&1,i>>6&1,i>>5&1,i>>4&1,i>>3&1,i>>2&1,i>>1&1,i&1)}else if(t===2){const i=e[r++];n.push(i>>6&3,i>>4&3,i>>2&3,i&3)}else if(t===4){const i=e[r++];n.push(i>>4&15,i&15)}else if(t===8){const i=e[r++];n.push(i)}else if(t===16)n.push(e[r++]<<8|e[r++]);else throw new Error("Unsupported depth: "+t);return n}const tk=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];function nF(e,t,n){if(!e)return[{passWidth:t,passHeight:n,passIndex:0}];const r=[];return tk.forEach(function({x:i,y:o},a){const s=t%8,c=n%8,u=t-s>>3,f=n-c>>3;let d=u*i.length;for(let h=0;h<i.length&&i[h]<s;h++)d++;let p=f*o.length;for(let h=0;h<o.length&&o[h]<c;h++)p++;d&&p&&r.push({passWidth:d,passHeight:p,passIndex:a})}),r}function rF(e,t,n,r,i){if(!e)return t*i+r<<2;const o=tk[n],a=r%o.x.length,s=i%o.y.length,c=(r-a)/o.x.length,u=(i-s)/o.y.length,f=o.x[a],d=o.y[s];return t*((u<<3)+d)+(c<<3)+f<<2}function iF(e,t,n,r,i,o,a,s){let c=[];const u=Qb(e),f=nF(t,r,i),p=QN[n]*o,h=p>>3||1;let g=0,w=new Uint8Array;for(let y=0;y<f.length;y++){const{passWidth:x,passHeight:E,passIndex:b}=f[y];for(let S=0;S<E;S++){let $=function(){if(n===Te.GRAYSCALE){const O=Je(L[N++],o,8);return[O,O,O,255]}if(n===Te.TRUE_COLOR)return[Je(L[N++],o,8),Je(L[N++],o,8),Je(L[N++],o,8),255];if(n===Te.PALETTE){const O=L[N++];if(!a)throw new Error("Mising chunk: PLTE");return a[O]}if(n===Te.GRAYSCALE_WITH_ALPHA){const O=Je(L[N++],o,8);return[O,O,O,Je(L[N++],o,8)]}if(n===Te.TRUE_COLOR_WITH_ALPHA)return[Je(L[N++],o,8),Je(L[N++],o,8),Je(L[N++],o,8),Je(L[N++],o,8)];throw new Error("Unsupported color type: "+n)};var _=$;const A=(x*p+7>>3)+JN,R=u[g];if(!(R in zt))throw new Error("Unsupported filter type: "+R);const C=eF[R],T=C(u.slice(g+1,g+A),h,w);w=T;let N=0;const L=tF(T,o);for(let O=0;O<x;O++){const P=$();s&&P[0]===s[0]&&P[1]===s[1]&&P[2]===s[2]&&(P[3]=0);const M=rF(t,r,b,O,S);for(let V=0;V<P.length;V++)c[M+V]=P[V]}g+=A}}return c}const Of=[137,80,78,71,13,10,26,10],oF=1e5;function Lf(e){let t=0,n="";for(;t<e.length;){let r=e[t++];if(r>127)if(r>191&&r<224){if(t>=e.length)throw new Error("UTF-8 decode: incomplete 2-byte sequence");r=(r&31)<<6|e[t++]&63}else if(r>223&&r<240){if(t+1>=e.length)throw new Error("UTF-8 decode: incomplete 3-byte sequence");r=(r&15)<<12|(e[t++]&63)<<6|e[t++]&63}else if(r>239&&r<248){if(t+2>=e.length)throw new Error("UTF-8 decode: incomplete 4-byte sequence");r=(r&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63}else throw new Error("UTF-8 decode: unknown multibyte start 0x"+r.toString(16)+" at index "+(t-1));if(r<=65535)n+=String.fromCharCode(r);else if(r<=1114111)r-=65536,n+=String.fromCharCode(r>>10|55296),n+=String.fromCharCode(r&1023|56320);else throw new Error("UTF-8 decode: code point 0x"+r.toString(16)+" exceeds UTF-16 reach")}return n}function aF(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}const ur=1e5;function sF(e){const t=new Uint8Array(e);let n=new Uint8Array;const r={width:0,height:0,depth:0,colorType:0,compression:0,interlace:0,filter:0,data:[]};let i=0;function o(){return t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++]}function a(){return t[i++]<<8|t[i++]}function s(){return t[i++]}function c(){const I=[];let U=0;for(;(U=t[i++])!==0;)I.push(U);return new Uint8Array(I)}function u(I){const U=i+I;let H="";for(;i<U;){const q=s();if(q===0)break;H+=String.fromCharCode(q)}return H}function f(I){let U="";for(;i<I;){const H=s();U+=String.fromCharCode(H)}return U}function d(I){const U=t.slice(i,I);return i=I,Qb(U)}function p(){let I="";for(const U=i+4;i<U;i++)I+=String.fromCharCode(t[i]);return I}for(;i<Of.length;i++)if(t[i]!==Of[i])throw new Error(`Invalid file signature, at position ${i}: ${t[i]} !== ${Of[i]}`);const h={IHDR:g,PLTE:w,IDAT:_,IEND:y,tRNS:x,cHRM:E,gAMA:b,iCCP:S,sBIT:A,sRGB:R,tEXt:C,zTXt:T,iTXt:N,bKGD:L,hIST:$,pHYs:O,sPLT:P,tIME:M};function g(){r.width=o(),r.height=o(),r.depth=s();const I=s();if(!(I in Te))throw new Error("Unsupported color type: "+I);r.colorType=I,r.compression=s(),r.filter=s(),r.interlace=s()}function w(I){const U=[];for(let H=0;H<I;H+=3)U.push([t[i++],t[i++],t[i++],255]);r.palette=U}function _(I){n=aF(n,t.slice(i,i+I)),i+=I}function y(I){i+=I}function x(I){if(r.colorType===Te.GRAYSCALE){const U=Je(t[i++]<<8|t[i++],r.depth,8);r.transparent=[U,U,U,255]}else if(r.colorType===Te.TRUE_COLOR)r.transparent=[Je(t[i++]<<8|t[i++],r.depth,8),Je(t[i++]<<8|t[i++],r.depth,8),Je(t[i++]<<8|t[i++],r.depth,8),255];else if(r.colorType===Te.PALETTE){if(!r.palette)throw new Error("Missing chunk: PLTE");for(let U=0;U<I;U++)r.palette[U][3]=t[i++]}}function E(){r.chromaticities={white:{x:o()/ur,y:o()/ur},red:{x:o()/ur,y:o()/ur},green:{x:o()/ur,y:o()/ur},blue:{x:o()/ur,y:o()/ur}}}function b(){r.gamma=o()/oF}function S(I){const U=i+I,H=u(80);s();const q=d(U);r.icc={name:H,profile:Array.from(q)}}function A(){if(r.colorType===Te.GRAYSCALE){const I=s();r.significantBits=[I,I,I,r.depth]}else if(r.colorType===Te.TRUE_COLOR||r.colorType===Te.PALETTE)r.significantBits=[s(),s(),s(),r.depth];else if(r.colorType===Te.GRAYSCALE_WITH_ALPHA){const I=s();r.significantBits=[I,I,I,s()]}else r.colorType===Te.TRUE_COLOR_WITH_ALPHA&&(r.significantBits=[s(),s(),s(),s()])}function R(){r.sRGB=s()}function C(I){const U=i+I,H=u(80),q=f(U);r.text||(r.text={}),r.text[H]=q}function T(I){const U=i+I,H=u(80);s();const q=d(U);let Y="";for(let ee=0;ee<q.length;ee++)Y+=String.fromCharCode(q[ee]);r.compressedText||(r.compressedText={}),r.compressedText[H]=Y}function N(I){const U=i+I,H=u(80),q=s();s();const Y=u(1/0),ee=Lf(c());let re="";if(q===0)re=Lf(t.slice(i,U)),i=U;else{const ae=d(U);re=Lf(ae)}r.internationalText||(r.internationalText={}),r.internationalText[H]={languageTag:Y,translatedKeyword:ee,text:re}}function L(){if((r.colorType&3)===Te.GRAYSCALE){const I=Je(t[i++]<<8|t[i++],r.depth,8);r.background=[I,I,I,255]}else if((r.colorType&3)===Te.TRUE_COLOR)r.background=[Je(t[i++]<<8|t[i++],r.depth,8),Je(t[i++]<<8|t[i++],r.depth,8),Je(t[i++]<<8|t[i++],r.depth,8),255];else if(r.colorType===Te.PALETTE){if(!r.palette)throw new Error("Missing chunk: PLTE");r.background=r.palette[t[i++]]}}function $(I){const U=i+I,H=[];for(;i<U;)H.push(a());r.histogram=H}function O(){const I=o(),U=o(),H=s();r.physicalDimensions={pixelPerUnitX:I,pixelPerUnitY:U,unit:H}}function P(I){const U=i+I,H=u(80),q=s(),Y=[];if(q===8)for(;i<U;)Y.push([s(),s(),s(),s(),a()]);else if(q===16)for(;i<U;)Y.push([a(),a(),a(),a(),a()]);r.suggestedPalette={name:H,depth:q,palette:Y}}function M(){const I=a(),U=s(),H=s(),q=s(),Y=s(),ee=s();r.lastModificationTime=Date.UTC(I,U-1,H,q,Y,ee)}function V(){const I=i,U=o(),H=p();h[H]?h[H](U):(H.charCodeAt(0)&32,i+=U),W(I,U)}function W(I,U){const H=o(),q=XN(t.slice(I+4,I+8+U));if(H!==q)throw new Error("Crc32 error: calculated "+q+", expected "+H);i<t.length&&V()}return V(),r.data=iF(n,r.interlace,r.colorType,r.width,r.height,r.depth,r.palette,r.transparent),r}const nk={supportedFileExts:["png"],decodeFile:async e=>{try{const t=await e.arrayBuffer(),n=sF(t),{data:r,width:i,height:o}=n;ir.assertEq(i*o*4,r.length);const a=new Uint8Array(r.length);for(let u=0;u<r.length;u++)a[u]=r[u];const s=new Uint8ClampedArray(a.buffer,a.byteOffset,a.byteLength),c=new ImageData(s,i,o);return{colorData:{format:"rgba8888",bytes:a},image:c,metadata:{width:i,height:o,diagnostics:"TODO"}}}catch(t){return{error:"Unknown error: "+t}}}},lF=Symbol("png"),rk=hb({subKind:lF,title:"PNG Importer",decoder:nk});function cF({selectedImporter:e,setSelectedImporter:t,onClickApplyAll:n}){const r=F.useCallback(o=>{t({...e,config:o})},[e,t]),i=F.useMemo(()=>e.importer.subKind===rk.subKind||e.importer.subKind===vb.subKind?l.jsx(d4,{config:e.config,setConfig:o=>r(o)}):(console.error("Couldn't find component for:"),console.error(e),l.jsx("div",{className:"text-center text-slate-500 text-sm",children:"(No controls available)"})),[e,r]);return l.jsxs("div",{className:"flex flex-col",children:[l.jsx("div",{className:"text-center text-gray-500 text-xs mb-2",children:l.jsx("span",{className:"font-bold",children:e.importer.title})}),l.jsx("div",{children:i}),n&&l.jsx("div",{className:"mt-2 text-center text-xs",children:l.jsx(Pe,{label:"Apply to all images",onClick:n})})]})}function uF({decoded:e,imported:t}){const n=F.useMemo(()=>l.jsx(Qn,{imageData:e.image,imageWidth:e.metadata.width,imageHeight:e.metadata.height}),[e]),r=F.useMemo(()=>t.kind==="error"?l.jsx("div",{className:"flex justify-center items-center text-center text-red-400",children:"(Error)"}):l.jsx(Qn,{imageData:t.result.resource.compiledImage,imageWidth:e.metadata.width,imageHeight:e.metadata.height}),[t,e]);return l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[l.jsx("div",{className:"text-center text-slate-500 text-xs font-bold mb-0.5",children:"Original"}),n]}),l.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[l.jsx("div",{className:"text-center text-slate-500 text-xs font-bold mb-0.5",children:"Converted"}),r]})]})}function fF({resultWrapper:e}){return l.jsx("div",{children:"TODO"})}function dF({resultWrapper:e}){let t,n,r,i,o;e.kind==="error"?(t="Conversion error",n=e.error,r="text-red-600",i=ie.PhotoError,o=!1):e.kind==="warning"?(t="Lossy conversion",n=e.warning,r="text-yellow-600",i=ie.PhotoLossy,o=!0):(t="Lossless conversion",n="Every pixel of the source image matched with a color in the palette selected.",r="text-emerald-600",i=ie.PhotoLossless,o=!0);const a=F.useContext(sr),s=F.useCallback(()=>{e.kind!=="error"&&a.pushModal({title:"Conversion Stats",body:l.jsx(Vt,{children:l.jsx(_t,{children:l.jsx(fF,{resultWrapper:e})})})})},[e,a]);return l.jsxs("div",{className:`${r} flex flex-col bg-slate-100 rounded px-4 py-2`,children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(i,{className:"mr-2",size:22}),l.jsx("span",{className:"grow font-bold text-sm",children:t}),o&&l.jsx(va,{onClick:s,children:l.jsx("div",{className:"flex items-center text-xs",children:l.jsx("span",{className:"text-gray-400 font-bold",children:"More"})})})]}),l.jsx("div",{className:"text-xs",style:{maxWidth:250*2-50},children:n})]})}function Np({children:e,className:t,isLoading:n,label:r,hideLabel:i,overlayBg:o}){o??(o="bg-[#0000001A]"),n??(n=!1);const a=s=>{s.stopPropagation(),s.nativeEvent.stopImmediatePropagation()};return l.jsxs("div",{className:`relative ${t}`,onClick:n===!1?void 0:a,children:[e,n!==!1&&l.jsx("div",{className:`${o} absolute inset-0 flex justify-center items-center`,children:!i&&l.jsx("span",{className:"text-white font-bold text-lg select-none",children:r??"Loading..."})})]})}var Ra;(e=>{function t(){var n;(n=document.activeElement)==null||n.blur()}e.justBlurIt=t})(Ra||(Ra={}));var Cc;(e=>{function t(i){return i!==null}e.notNull=t;function n(i){return i!==void 0}e.notUndefined=n;function r(i){return i!=null}e.notEmpty=r})(Cc||(Cc={}));var o0=Object.prototype.toString,ik=function(t){var n=o0.call(t),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&o0.call(t.callee)==="[object Function]"),r},Bf,a0;function pF(){if(a0)return Bf;a0=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=ik,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),a=i.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(p){var h=p.constructor;return h&&h.prototype===p},u={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if(typeof window>"u")return!1;for(var p in window)try{if(!u["$"+p]&&t.call(window,p)&&window[p]!==null&&typeof window[p]=="object")try{c(window[p])}catch{return!0}}catch{return!0}return!1}(),d=function(p){if(typeof window>"u"||!f)return c(p);try{return c(p)}catch{return!1}};e=function(h){var g=h!==null&&typeof h=="object",w=n.call(h)==="[object Function]",_=r(h),y=g&&n.call(h)==="[object String]",x=[];if(!g&&!w&&!_)throw new TypeError("Object.keys called on a non-object");var E=a&&w;if(y&&h.length>0&&!t.call(h,0))for(var b=0;b<h.length;++b)x.push(String(b));if(_&&h.length>0)for(var S=0;S<h.length;++S)x.push(String(S));else for(var A in h)!(E&&A==="prototype")&&t.call(h,A)&&x.push(String(A));if(o)for(var R=d(h),C=0;C<s.length;++C)!(R&&s[C]==="constructor")&&t.call(h,s[C])&&x.push(s[C]);return x}}return Bf=e,Bf}var mF=Array.prototype.slice,hF=ik,s0=Object.keys,Rl=s0?function(t){return s0(t)}:pF(),l0=Object.keys;Rl.shim=function(){if(Object.keys){var t=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);t||(Object.keys=function(r){return hF(r)?l0(mF.call(r)):l0(r)})}else Object.keys=Rl;return Object.keys||Rl};var gh=Rl,vF=Error,gF=EvalError,xF=RangeError,yF=ReferenceError,ok=SyntaxError,Gr=TypeError,wF=URIError,Fu=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;t[n]=i;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,n);if(a.value!==i||a.enumerable!==!0)return!1}return!0},c0=typeof Symbol<"u"&&Symbol,bF=Fu,xh=function(){return typeof c0!="function"||typeof Symbol!="function"||typeof c0("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:bF()},$f={__proto__:null,foo:{}},kF=Object,EF=function(){return{__proto__:$f}.foo===$f.foo&&!($f instanceof kF)},SF="Function.prototype.bind called on incompatible ",_F=Object.prototype.toString,jF=Math.max,CF="[object Function]",u0=function(t,n){for(var r=[],i=0;i<t.length;i+=1)r[i]=t[i];for(var o=0;o<n.length;o+=1)r[o+t.length]=n[o];return r},IF=function(t,n){for(var r=[],i=n||0,o=0;i<t.length;i+=1,o+=1)r[o]=t[i];return r},AF=function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n},NF=function(t){var n=this;if(typeof n!="function"||_F.apply(n)!==CF)throw new TypeError(SF+n);for(var r=IF(arguments,1),i,o=function(){if(this instanceof i){var f=n.apply(this,u0(r,arguments));return Object(f)===f?f:this}return n.apply(t,u0(r,arguments))},a=jF(0,n.length-r.length),s=[],c=0;c<a;c++)s[c]="$"+c;if(i=Function("binder","return function ("+AF(s,",")+"){ return binder.apply(this,arguments); }")(o),n.prototype){var u=function(){};u.prototype=n.prototype,i.prototype=new u,u.prototype=null}return i},FF=NF,yh=Function.prototype.bind||FF,TF=Function.prototype.call,RF=Object.prototype.hasOwnProperty,PF=yh,ak=PF.call(TF,RF),fe,DF=vF,MF=gF,OF=xF,LF=yF,Po=ok,vo=Gr,BF=wF,sk=Function,Uf=function(e){try{return sk('"use strict"; return ('+e+").constructor;")()}catch{}},di=Object.getOwnPropertyDescriptor;if(di)try{di({},"")}catch{di=null}var zf=function(){throw new vo},$F=di?function(){try{return arguments.callee,zf}catch{try{return di(arguments,"callee").get}catch{return zf}}}():zf,Li=xh(),UF=EF(),Xe=Object.getPrototypeOf||(UF?function(e){return e.__proto__}:null),Hi={},zF=typeof Uint8Array>"u"||!Xe?fe:Xe(Uint8Array),pi={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?fe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?fe:ArrayBuffer,"%ArrayIteratorPrototype%":Li&&Xe?Xe([][Symbol.iterator]()):fe,"%AsyncFromSyncIteratorPrototype%":fe,"%AsyncFunction%":Hi,"%AsyncGenerator%":Hi,"%AsyncGeneratorFunction%":Hi,"%AsyncIteratorPrototype%":Hi,"%Atomics%":typeof Atomics>"u"?fe:Atomics,"%BigInt%":typeof BigInt>"u"?fe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?fe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?fe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?fe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":DF,"%eval%":eval,"%EvalError%":MF,"%Float32Array%":typeof Float32Array>"u"?fe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?fe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?fe:FinalizationRegistry,"%Function%":sk,"%GeneratorFunction%":Hi,"%Int8Array%":typeof Int8Array>"u"?fe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?fe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?fe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Li&&Xe?Xe(Xe([][Symbol.iterator]())):fe,"%JSON%":typeof JSON=="object"?JSON:fe,"%Map%":typeof Map>"u"?fe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Li||!Xe?fe:Xe(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?fe:Promise,"%Proxy%":typeof Proxy>"u"?fe:Proxy,"%RangeError%":OF,"%ReferenceError%":LF,"%Reflect%":typeof Reflect>"u"?fe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?fe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Li||!Xe?fe:Xe(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?fe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Li&&Xe?Xe(""[Symbol.iterator]()):fe,"%Symbol%":Li?Symbol:fe,"%SyntaxError%":Po,"%ThrowTypeError%":$F,"%TypedArray%":zF,"%TypeError%":vo,"%Uint8Array%":typeof Uint8Array>"u"?fe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?fe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?fe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?fe:Uint32Array,"%URIError%":BF,"%WeakMap%":typeof WeakMap>"u"?fe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?fe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?fe:WeakSet};if(Xe)try{null.error}catch(e){var GF=Xe(Xe(e));pi["%Error.prototype%"]=GF}var WF=function e(t){var n;if(t==="%AsyncFunction%")n=Uf("async function () {}");else if(t==="%GeneratorFunction%")n=Uf("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=Uf("async function* () {}");else if(t==="%AsyncGenerator%"){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Xe&&(n=Xe(i.prototype))}return pi[t]=n,n},f0={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Is=yh,Ic=ak,HF=Is.call(Function.call,Array.prototype.concat),VF=Is.call(Function.apply,Array.prototype.splice),d0=Is.call(Function.call,String.prototype.replace),Ac=Is.call(Function.call,String.prototype.slice),KF=Is.call(Function.call,RegExp.prototype.exec),ZF=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,qF=/\\(\\)?/g,YF=function(t){var n=Ac(t,0,1),r=Ac(t,-1);if(n==="%"&&r!=="%")throw new Po("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new Po("invalid intrinsic syntax, expected opening `%`");var i=[];return d0(t,ZF,function(o,a,s,c){i[i.length]=s?d0(c,qF,"$1"):a||o}),i},XF=function(t,n){var r=t,i;if(Ic(f0,r)&&(i=f0[r],r="%"+i[0]+"%"),Ic(pi,r)){var o=pi[r];if(o===Hi&&(o=WF(r)),typeof o>"u"&&!n)throw new vo("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:o}}throw new Po("intrinsic "+t+" does not exist!")},Bn=function(t,n){if(typeof t!="string"||t.length===0)throw new vo("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new vo('"allowMissing" argument must be a boolean');if(KF(/^%?[^%]*%?$/,t)===null)throw new Po("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=YF(t),i=r.length>0?r[0]:"",o=XF("%"+i+"%",n),a=o.name,s=o.value,c=!1,u=o.alias;u&&(i=u[0],VF(r,HF([0,1],u)));for(var f=1,d=!0;f<r.length;f+=1){var p=r[f],h=Ac(p,0,1),g=Ac(p,-1);if((h==='"'||h==="'"||h==="`"||g==='"'||g==="'"||g==="`")&&h!==g)throw new Po("property names with quotes must have matching quotes");if((p==="constructor"||!d)&&(c=!0),i+="."+p,a="%"+i+"%",Ic(pi,a))s=pi[a];else if(s!=null){if(!(p in s)){if(!n)throw new vo("base intrinsic for "+t+" exists, but the property is not available.");return}if(di&&f+1>=r.length){var w=di(s,p);d=!!w,d&&"get"in w&&!("originalValue"in w.get)?s=w.get:s=s[p]}else d=Ic(s,p),s=s[p];d&&!c&&(pi[a]=s)}}return s},Gf,p0;function wh(){if(p0)return Gf;p0=1;var e=Bn,t=e("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Gf=t,Gf}var QF=Bn,Pl=QF("%Object.getOwnPropertyDescriptor%",!0);if(Pl)try{Pl([],"length")}catch{Pl=null}var bh=Pl,m0=wh(),JF=ok,Bi=Gr,h0=bh,kh=function(t,n,r){if(!t||typeof t!="object"&&typeof t!="function")throw new Bi("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new Bi("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Bi("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Bi("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Bi("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Bi("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,c=!!h0&&h0(t,n);if(m0)m0(t,n,{configurable:a===null&&c?c.configurable:!a,enumerable:i===null&&c?c.enumerable:!i,value:r,writable:o===null&&c?c.writable:!o});else if(s||!i&&!o&&!a)t[n]=r;else throw new JF("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Fp=wh(),lk=function(){return!!Fp};lk.hasArrayLengthDefineBug=function(){if(!Fp)return null;try{return Fp([],"length",{value:1}).length!==1}catch{return!0}};var Eh=lk,eT=gh,tT=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",nT=Object.prototype.toString,rT=Array.prototype.concat,v0=kh,iT=function(e){return typeof e=="function"&&nT.call(e)==="[object Function]"},ck=Eh(),oT=function(e,t,n,r){if(t in e){if(r===!0){if(e[t]===n)return}else if(!iT(r)||!r())return}ck?v0(e,t,n,!0):v0(e,t,n)},uk=function(e,t){var n=arguments.length>2?arguments[2]:{},r=eT(t);tT&&(r=rT.call(r,Object.getOwnPropertySymbols(t)));for(var i=0;i<r.length;i+=1)oT(e,r[i],t[r[i]],n[r[i]])};uk.supportsDescriptors=!!ck;var Ri=uk,fk={exports:{}},aT=Bn,g0=kh,sT=Eh(),x0=bh,y0=Gr,lT=aT("%Math.floor%"),cT=function(t,n){if(typeof t!="function")throw new y0("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||lT(n)!==n)throw new y0("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in t&&x0){var a=x0(t,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(o=!1)}return(i||o||!r)&&(sT?g0(t,"length",n,!0,!0):g0(t,"length",n)),t};(function(e){var t=yh,n=Bn,r=cT,i=Gr,o=n("%Function.prototype.apply%"),a=n("%Function.prototype.call%"),s=n("%Reflect.apply%",!0)||t.call(a,o),c=wh(),u=n("%Math.max%");e.exports=function(p){if(typeof p!="function")throw new i("a function is required");var h=s(t,a,arguments);return r(h,1+u(0,p.length-(arguments.length-1)),!0)};var f=function(){return s(t,o,arguments)};c?c(e.exports,"apply",{value:f}):e.exports.apply=f})(fk);var Zo=fk.exports,dk=Bn,pk=Zo,uT=pk(dk("String.prototype.indexOf")),pn=function(t,n){var r=dk(t,!!n);return typeof r=="function"&&uT(t,".prototype.")>-1?pk(r):r},fT=gh,mk=Fu(),hk=pn,w0=Object,dT=hk("Array.prototype.push"),b0=hk("Object.prototype.propertyIsEnumerable"),pT=mk?Object.getOwnPropertySymbols:null,vk=function(t,n){if(t==null)throw new TypeError("target must be an object");var r=w0(t);if(arguments.length===1)return r;for(var i=1;i<arguments.length;++i){var o=w0(arguments[i]),a=fT(o),s=mk&&(Object.getOwnPropertySymbols||pT);if(s)for(var c=s(o),u=0;u<c.length;++u){var f=c[u];b0(o,f)&&dT(a,f)}for(var d=0;d<a.length;++d){var p=a[d];if(b0(o,p)){var h=o[p];r[p]=h}}}return r},Wf=vk,mT=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},r=0;r<t.length;++r)n[t[r]]=t[r];var i=Object.assign({},n),o="";for(var a in i)o+=a;return e!==o},hT=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch{return e[1]==="y"}return!1},gk=function(){return!Object.assign||mT()||hT()?Wf:Object.assign},vT=Ri,gT=gk,xT=function(){var t=gT();return vT(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t},yT=Ri,wT=Zo,bT=vk,xk=gk,kT=xT,ET=wT.apply(xk()),yk=function(t,n){return ET(Object,arguments)};yT(yk,{getPolyfill:xk,implementation:bT,shim:kT});var ST=yk,ds=function(){return typeof(function(){}).name=="string"},Pa=Object.getOwnPropertyDescriptor;if(Pa)try{Pa([],"length")}catch{Pa=null}ds.functionsHaveConfigurableNames=function(){if(!ds()||!Pa)return!1;var t=Pa(function(){},"name");return!!t&&!!t.configurable};var _T=Function.prototype.bind;ds.boundFunctionsHaveNames=function(){return ds()&&typeof _T=="function"&&(function(){}).bind().name!==""};var jT=ds,k0=kh,CT=Eh(),IT=jT.functionsHaveConfigurableNames(),AT=Gr,NT=function(t,n){if(typeof t!="function")throw new AT("`fn` is not a function");var r=arguments.length>2&&!!arguments[2];return(!r||IT)&&(CT?k0(t,"name",n,!0,!0):k0(t,"name",n)),t},FT=NT,TT=Gr,RT=Object,wk=FT(function(){if(this==null||this!==RT(this))throw new TT("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"get flags",!0),PT=wk,DT=Ri.supportsDescriptors,MT=Object.getOwnPropertyDescriptor,bk=function(){if(DT&&/a/mig.flags==="gim"){var t=MT(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var n="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){n+="d"}}),Object.defineProperty(r,"sticky",{get:function(){n+="y"}}),n==="dy")return t.get}}return PT},OT=Ri.supportsDescriptors,LT=bk,BT=Object.getOwnPropertyDescriptor,$T=Object.defineProperty,UT=TypeError,E0=Object.getPrototypeOf,zT=/a/,GT=function(){if(!OT||!E0)throw new UT("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=LT(),n=E0(zT),r=BT(n,"flags");return(!r||r.get!==t)&&$T(n,"flags",{configurable:!0,enumerable:!1,get:t}),t},WT=Ri,HT=Zo,VT=wk,kk=bk,KT=GT,Ek=HT(kk());WT(Ek,{getPolyfill:kk,implementation:VT,shim:KT});var ZT=Ek,Dl={exports:{}},qT=Fu,Pi=function(){return qT()&&!!Symbol.toStringTag},YT=Pi(),XT=pn,Tp=XT("Object.prototype.toString"),Tu=function(t){return YT&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:Tp(t)==="[object Arguments]"},Sk=function(t){return Tu(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Tp(t)!=="[object Array]"&&Tp(t.callee)==="[object Function]"},QT=function(){return Tu(arguments)}();Tu.isLegacyArguments=Sk;var _k=QT?Tu:Sk;const JT={},eR=Object.freeze(Object.defineProperty({__proto__:null,default:JT},Symbol.toStringTag,{value:"Module"})),tR=wS(eR);var Sh=typeof Map=="function"&&Map.prototype,Hf=Object.getOwnPropertyDescriptor&&Sh?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Nc=Sh&&Hf&&typeof Hf.get=="function"?Hf.get:null,S0=Sh&&Map.prototype.forEach,_h=typeof Set=="function"&&Set.prototype,Vf=Object.getOwnPropertyDescriptor&&_h?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Fc=_h&&Vf&&typeof Vf.get=="function"?Vf.get:null,_0=_h&&Set.prototype.forEach,nR=typeof WeakMap=="function"&&WeakMap.prototype,Da=nR?WeakMap.prototype.has:null,rR=typeof WeakSet=="function"&&WeakSet.prototype,Ma=rR?WeakSet.prototype.has:null,iR=typeof WeakRef=="function"&&WeakRef.prototype,j0=iR?WeakRef.prototype.deref:null,oR=Boolean.prototype.valueOf,aR=Object.prototype.toString,sR=Function.prototype.toString,lR=String.prototype.match,jh=String.prototype.slice,br=String.prototype.replace,cR=String.prototype.toUpperCase,C0=String.prototype.toLowerCase,jk=RegExp.prototype.test,I0=Array.prototype.concat,An=Array.prototype.join,uR=Array.prototype.slice,A0=Math.floor,Rp=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Kf=Object.getOwnPropertySymbols,Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Do=typeof Symbol=="function"&&typeof Symbol.iterator=="object",gt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Do||!0)?Symbol.toStringTag:null,Ck=Object.prototype.propertyIsEnumerable,N0=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function F0(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||jk.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var r=e<0?-A0(-e):A0(e);if(r!==e){var i=String(r),o=jh.call(t,i.length+1);return br.call(i,n,"$&_")+"."+br.call(br.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return br.call(t,n,"$&_")}var Dp=tR,T0=Dp.custom,R0=Ak(T0)?T0:null,fR=function e(t,n,r,i){var o=n||{};if(pr(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(pr(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=pr(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(pr(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(pr(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=o.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Fk(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var c=String(t);return s?F0(t,c):c}if(typeof t=="bigint"){var u=String(t)+"n";return s?F0(t,u):u}var f=typeof o.depth>"u"?5:o.depth;if(typeof r>"u"&&(r=0),r>=f&&f>0&&typeof t=="object")return Mp(t)?"[Array]":"[Object]";var d=AR(o,r);if(typeof i>"u")i=[];else if(Nk(i,t)>=0)return"[Circular]";function p(O,P,M){if(P&&(i=uR.call(i),i.push(P)),M){var V={depth:o.depth};return pr(o,"quoteStyle")&&(V.quoteStyle=o.quoteStyle),e(O,V,r+1,i)}return e(O,o,r+1,i)}if(typeof t=="function"&&!P0(t)){var h=wR(t),g=ol(t,p);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(g.length>0?" { "+An.call(g,", ")+" }":"")}if(Ak(t)){var w=Do?br.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Pp.call(t);return typeof t=="object"&&!Do?sa(w):w}if(jR(t)){for(var _="<"+C0.call(String(t.nodeName)),y=t.attributes||[],x=0;x<y.length;x++)_+=" "+y[x].name+"="+Ik(dR(y[x].value),"double",o);return _+=">",t.childNodes&&t.childNodes.length&&(_+="..."),_+="</"+C0.call(String(t.nodeName))+">",_}if(Mp(t)){if(t.length===0)return"[]";var E=ol(t,p);return d&&!IR(E)?"["+Op(E,d)+"]":"[ "+An.call(E,", ")+" ]"}if(mR(t)){var b=ol(t,p);return!("cause"in Error.prototype)&&"cause"in t&&!Ck.call(t,"cause")?"{ ["+String(t)+"] "+An.call(I0.call("[cause]: "+p(t.cause),b),", ")+" }":b.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+An.call(b,", ")+" }"}if(typeof t=="object"&&a){if(R0&&typeof t[R0]=="function"&&Dp)return Dp(t,{depth:f-r});if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(bR(t)){var S=[];return S0&&S0.call(t,function(O,P){S.push(p(P,t,!0)+" => "+p(O,t))}),D0("Map",Nc.call(t),S,d)}if(SR(t)){var A=[];return _0&&_0.call(t,function(O){A.push(p(O,t))}),D0("Set",Fc.call(t),A,d)}if(kR(t))return Zf("WeakMap");if(_R(t))return Zf("WeakSet");if(ER(t))return Zf("WeakRef");if(vR(t))return sa(p(Number(t)));if(xR(t))return sa(p(Rp.call(t)));if(gR(t))return sa(oR.call(t));if(hR(t))return sa(p(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===am)return"{ [object globalThis] }";if(!pR(t)&&!P0(t)){var R=ol(t,p),C=N0?N0(t)===Object.prototype:t instanceof Object||t.constructor===Object,T=t instanceof Object?"":"null prototype",N=!C&&gt&&Object(t)===t&&gt in t?jh.call(Wr(t),8,-1):T?"Object":"",L=C||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",$=L+(N||T?"["+An.call(I0.call([],N||[],T||[]),": ")+"] ":"");return R.length===0?$+"{}":d?$+"{"+Op(R,d)+"}":$+"{ "+An.call(R,", ")+" }"}return String(t)};function Ik(e,t,n){var r=(n.quoteStyle||t)==="double"?'"':"'";return r+e+r}function dR(e){return br.call(String(e),/"/g,"&quot;")}function Mp(e){return Wr(e)==="[object Array]"&&(!gt||!(typeof e=="object"&&gt in e))}function pR(e){return Wr(e)==="[object Date]"&&(!gt||!(typeof e=="object"&&gt in e))}function P0(e){return Wr(e)==="[object RegExp]"&&(!gt||!(typeof e=="object"&&gt in e))}function mR(e){return Wr(e)==="[object Error]"&&(!gt||!(typeof e=="object"&&gt in e))}function hR(e){return Wr(e)==="[object String]"&&(!gt||!(typeof e=="object"&&gt in e))}function vR(e){return Wr(e)==="[object Number]"&&(!gt||!(typeof e=="object"&&gt in e))}function gR(e){return Wr(e)==="[object Boolean]"&&(!gt||!(typeof e=="object"&&gt in e))}function Ak(e){if(Do)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Pp)return!1;try{return Pp.call(e),!0}catch{}return!1}function xR(e){if(!e||typeof e!="object"||!Rp)return!1;try{return Rp.call(e),!0}catch{}return!1}var yR=Object.prototype.hasOwnProperty||function(e){return e in this};function pr(e,t){return yR.call(e,t)}function Wr(e){return aR.call(e)}function wR(e){if(e.name)return e.name;var t=lR.call(sR.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function Nk(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function bR(e){if(!Nc||!e||typeof e!="object")return!1;try{Nc.call(e);try{Fc.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function kR(e){if(!Da||!e||typeof e!="object")return!1;try{Da.call(e,Da);try{Ma.call(e,Ma)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function ER(e){if(!j0||!e||typeof e!="object")return!1;try{return j0.call(e),!0}catch{}return!1}function SR(e){if(!Fc||!e||typeof e!="object")return!1;try{Fc.call(e);try{Nc.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function _R(e){if(!Ma||!e||typeof e!="object")return!1;try{Ma.call(e,Ma);try{Da.call(e,Da)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function jR(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function Fk(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return Fk(jh.call(e,0,t.maxStringLength),t)+r}var i=br.call(br.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,CR);return Ik(i,"single",t)}function CR(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+cR.call(t.toString(16))}function sa(e){return"Object("+e+")"}function Zf(e){return e+" { ? }"}function D0(e,t,n,r){var i=r?Op(n,r):An.call(n,", ");return e+" ("+t+") {"+i+"}"}function IR(e){for(var t=0;t<e.length;t++)if(Nk(e[t],`
`)>=0)return!1;return!0}function AR(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=An.call(Array(e.indent+1)," ");else return null;return{base:n,prev:An.call(Array(t+1),n)}}function Op(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+An.call(e,","+n)+`
`+t.prev}function ol(e,t){var n=Mp(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=pr(e,i)?t(e[i],e):""}var o=typeof Kf=="function"?Kf(e):[],a;if(Do){a={};for(var s=0;s<o.length;s++)a["$"+o[s]]=o[s]}for(var c in e)pr(e,c)&&(n&&String(Number(c))===c&&c<e.length||Do&&a["$"+c]instanceof Symbol||(jk.call(/[^\w$]/,c)?r.push(t(c,e)+": "+t(e[c],e)):r.push(c+": "+t(e[c],e))));if(typeof Kf=="function")for(var u=0;u<o.length;u++)Ck.call(e,o[u])&&r.push("["+t(o[u])+"]: "+t(e[o[u]],e));return r}var Tk=Bn,qo=pn,NR=fR,FR=Gr,al=Tk("%WeakMap%",!0),sl=Tk("%Map%",!0),TR=qo("WeakMap.prototype.get",!0),RR=qo("WeakMap.prototype.set",!0),PR=qo("WeakMap.prototype.has",!0),DR=qo("Map.prototype.get",!0),MR=qo("Map.prototype.set",!0),OR=qo("Map.prototype.has",!0),Ch=function(e,t){for(var n=e,r;(r=n.next)!==null;n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r},LR=function(e,t){var n=Ch(e,t);return n&&n.value},BR=function(e,t,n){var r=Ch(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}},$R=function(e,t){return!!Ch(e,t)},Rk=function(){var t,n,r,i={assert:function(o){if(!i.has(o))throw new FR("Side channel does not contain "+NR(o))},get:function(o){if(al&&o&&(typeof o=="object"||typeof o=="function")){if(t)return TR(t,o)}else if(sl){if(n)return DR(n,o)}else if(r)return LR(r,o)},has:function(o){if(al&&o&&(typeof o=="object"||typeof o=="function")){if(t)return PR(t,o)}else if(sl){if(n)return OR(n,o)}else if(r)return $R(r,o);return!1},set:function(o,a){al&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new al),RR(t,o,a)):sl?(n||(n=new sl),MR(n,o,a)):(r||(r={key:{},next:null}),BR(r,o,a))}};return i},UR=ak,la=Rk(),zn=Gr,Ih={assert:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new zn("`O` is not an object");if(typeof t!="string")throw new zn("`slot` must be a string");if(la.assert(e),!Ih.has(e,t))throw new zn("`"+t+"` is not present on `O`")},get:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new zn("`O` is not an object");if(typeof t!="string")throw new zn("`slot` must be a string");var n=la.get(e);return n&&n["$"+t]},has:function(e,t){if(!e||typeof e!="object"&&typeof e!="function")throw new zn("`O` is not an object");if(typeof t!="string")throw new zn("`slot` must be a string");var n=la.get(e);return!!n&&UR(n,"$"+t)},set:function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new zn("`O` is not an object");if(typeof t!="string")throw new zn("`slot` must be a string");var r=la.get(e);r||(r={},la.set(e,r)),r["$"+t]=n}};Object.freeze&&Object.freeze(Ih);var zR=Ih,ca=zR,GR=SyntaxError,M0=typeof StopIteration=="object"?StopIteration:null,WR=function(t){if(!M0)throw new GR("this environment lacks StopIteration");ca.set(t,"[[Done]]",!1);var n={next:function(){var i=ca.get(this,"[[Iterator]]"),o=ca.get(i,"[[Done]]");try{return{done:o,value:o?void 0:i.next()}}catch(a){if(ca.set(i,"[[Done]]",!0),a!==M0)throw a;return{done:!0,value:void 0}}}};return ca.set(n,"[[Iterator]]",t),n},HR={}.toString,Pk=Array.isArray||function(e){return HR.call(e)=="[object Array]"},VR=String.prototype.valueOf,KR=function(t){try{return VR.call(t),!0}catch{return!1}},ZR=Object.prototype.toString,qR="[object String]",YR=Pi(),Dk=function(t){return typeof t=="string"?!0:typeof t!="object"?!1:YR?KR(t):ZR.call(t)===qR},Ah=typeof Map=="function"&&Map.prototype?Map:null,XR=typeof Set=="function"&&Set.prototype?Set:null,Tc;Ah||(Tc=function(t){return!1});var Mk=Ah?Map.prototype.has:null,O0=XR?Set.prototype.has:null;!Tc&&!Mk&&(Tc=function(t){return!1});var Ok=Tc||function(t){if(!t||typeof t!="object")return!1;try{if(Mk.call(t),O0)try{O0.call(t)}catch{return!0}return t instanceof Ah}catch{}return!1},QR=typeof Map=="function"&&Map.prototype?Map:null,Nh=typeof Set=="function"&&Set.prototype?Set:null,Rc;Nh||(Rc=function(t){return!1});var L0=QR?Map.prototype.has:null,Lk=Nh?Set.prototype.has:null;!Rc&&!Lk&&(Rc=function(t){return!1});var Bk=Rc||function(t){if(!t||typeof t!="object")return!1;try{if(Lk.call(t),L0)try{L0.call(t)}catch{return!0}return t instanceof Nh}catch{}return!1},B0=_k,$0=WR;if(xh()||Fu()){var qf=Symbol.iterator;Dl.exports=function(t){if(t!=null&&typeof t[qf]<"u")return t[qf]();if(B0(t))return Array.prototype[qf].call(t)}}else{var JR=Pk,e5=Dk,U0=Bn,t5=U0("%Map%",!0),n5=U0("%Set%",!0),hn=pn,z0=hn("Array.prototype.push"),G0=hn("String.prototype.charCodeAt"),r5=hn("String.prototype.slice"),i5=function(t,n){var r=t.length;if(n+1>=r)return n+1;var i=G0(t,n);if(i<55296||i>56319)return n+1;var o=G0(t,n+1);return o<56320||o>57343?n+1:n+2},Yf=function(t){var n=0;return{next:function(){var i=n>=t.length,o;return i||(o=t[n],n+=1),{done:i,value:o}}}},W0=function(t,n){if(JR(t)||B0(t))return Yf(t);if(e5(t)){var r=0;return{next:function(){var o=i5(t,r),a=r5(t,r,o);return r=o,{done:o>t.length,value:a}}}}if(n&&typeof t["_es6-shim iterator_"]<"u")return t["_es6-shim iterator_"]()};if(!t5&&!n5)Dl.exports=function(t){if(t!=null)return W0(t,!0)};else{var o5=Ok,a5=Bk,H0=hn("Map.prototype.forEach",!0),V0=hn("Set.prototype.forEach",!0);if(typeof process>"u"||!process.versions||!process.versions.node)var K0=hn("Map.prototype.iterator",!0),Z0=hn("Set.prototype.iterator",!0);var q0=hn("Map.prototype.@@iterator",!0)||hn("Map.prototype._es6-shim iterator_",!0),Y0=hn("Set.prototype.@@iterator",!0)||hn("Set.prototype._es6-shim iterator_",!0),s5=function(t){if(o5(t)){if(K0)return $0(K0(t));if(q0)return q0(t);if(H0){var n=[];return H0(t,function(i,o){z0(n,[o,i])}),Yf(n)}}if(a5(t)){if(Z0)return $0(Z0(t));if(Y0)return Y0(t);if(V0){var r=[];return V0(t,function(i){z0(r,i)}),Yf(r)}}};Dl.exports=function(t){return s5(t)||W0(t)}}}var l5=Dl.exports,X0=function(e){return e!==e},$k=function(t,n){return t===0&&n===0?1/t===1/n:!!(t===n||X0(t)&&X0(n))},c5=$k,Uk=function(){return typeof Object.is=="function"?Object.is:c5},u5=Uk,f5=Ri,d5=function(){var t=u5();return f5(Object,{is:t},{is:function(){return Object.is!==t}}),t},p5=Ri,m5=Zo,h5=$k,zk=Uk,v5=d5,Gk=m5(zk(),Object);p5(Gk,{getPolyfill:zk,implementation:h5,shim:v5});var g5=Gk,x5=Zo,Wk=pn,y5=Bn,Lp=y5("%ArrayBuffer%",!0),Ml=Wk("ArrayBuffer.prototype.byteLength",!0),w5=Wk("Object.prototype.toString"),Q0=!!Lp&&!Ml&&new Lp(0).slice,J0=!!Q0&&x5(Q0),Hk=Ml||J0?function(t){if(!t||typeof t!="object")return!1;try{return Ml?Ml(t):J0(t,0),!0}catch{return!1}}:Lp?function(t){return w5(t)==="[object ArrayBuffer]"}:function(t){return!1},b5=Date.prototype.getDay,k5=function(t){try{return b5.call(t),!0}catch{return!1}},E5=Object.prototype.toString,S5="[object Date]",_5=Pi(),j5=function(t){return typeof t!="object"||t===null?!1:_5?k5(t):E5.call(t)===S5},Bp=pn,Vk=Pi(),Kk,Zk,$p,Up;if(Vk){Kk=Bp("Object.prototype.hasOwnProperty"),Zk=Bp("RegExp.prototype.exec"),$p={};var Xf=function(){throw $p};Up={toString:Xf,valueOf:Xf},typeof Symbol.toPrimitive=="symbol"&&(Up[Symbol.toPrimitive]=Xf)}var C5=Bp("Object.prototype.toString"),I5=Object.getOwnPropertyDescriptor,A5="[object RegExp]",N5=Vk?function(t){if(!t||typeof t!="object")return!1;var n=I5(t,"lastIndex"),r=n&&Kk(n,"value");if(!r)return!1;try{Zk(t,Up)}catch(i){return i===$p}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:C5(t)===A5},F5=pn,ex=F5("SharedArrayBuffer.prototype.byteLength",!0),T5=ex?function(t){if(!t||typeof t!="object")return!1;try{return ex(t),!0}catch{return!1}}:function(t){return!1},R5=Number.prototype.toString,P5=function(t){try{return R5.call(t),!0}catch{return!1}},D5=Object.prototype.toString,M5="[object Number]",O5=Pi(),L5=function(t){return typeof t=="number"?!0:typeof t!="object"?!1:O5?P5(t):D5.call(t)===M5},qk=pn,B5=qk("Boolean.prototype.toString"),$5=qk("Object.prototype.toString"),U5=function(t){try{return B5(t),!0}catch{return!1}},z5="[object Boolean]",G5=Pi(),W5=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:G5&&Symbol.toStringTag in t?U5(t):$5(t)===z5},zp={exports:{}},H5=Object.prototype.toString,V5=xh();if(V5){var K5=Symbol.prototype.toString,Z5=/^Symbol\(.*\)$/,q5=function(t){return typeof t.valueOf()!="symbol"?!1:Z5.test(K5.call(t))};zp.exports=function(t){if(typeof t=="symbol")return!0;if(H5.call(t)!=="[object Symbol]")return!1;try{return q5(t)}catch{return!1}}}else zp.exports=function(t){return!1};var Y5=zp.exports,Gp={exports:{}},tx=typeof BigInt<"u"&&BigInt,X5=function(){return typeof tx=="function"&&typeof BigInt=="function"&&typeof tx(42)=="bigint"&&typeof BigInt(42)=="bigint"},Q5=X5();if(Q5){var J5=BigInt.prototype.valueOf,e3=function(t){try{return J5.call(t),!0}catch{}return!1};Gp.exports=function(t){return t===null||typeof t>"u"||typeof t=="boolean"||typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="function"?!1:typeof t=="bigint"?!0:e3(t)}}else Gp.exports=function(t){return!1};var t3=Gp.exports,n3=Dk,r3=L5,i3=W5,o3=Y5,a3=t3,s3=function(t){if(t==null||typeof t!="object"&&typeof t!="function")return null;if(n3(t))return"String";if(r3(t))return"Number";if(i3(t))return"Boolean";if(o3(t))return"Symbol";if(a3(t))return"BigInt"},Pc=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,nx=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,Dc;Pc||(Dc=function(t){return!1});var Wp=Pc?Pc.prototype.has:null,Qf=nx?nx.prototype.has:null;!Dc&&!Wp&&(Dc=function(t){return!1});var l3=Dc||function(t){if(!t||typeof t!="object")return!1;try{if(Wp.call(t,Wp),Qf)try{Qf.call(t,Qf)}catch{return!0}return t instanceof Pc}catch{}return!1},Hp={exports:{}},c3=Bn,Yk=pn,u3=c3("%WeakSet%",!0),Jf=Yk("WeakSet.prototype.has",!0);if(Jf){var ed=Yk("WeakMap.prototype.has",!0);Hp.exports=function(t){if(!t||typeof t!="object")return!1;try{if(Jf(t,Jf),ed)try{ed(t,ed)}catch{return!0}return t instanceof u3}catch{}return!1}}else Hp.exports=function(t){return!1};var f3=Hp.exports,d3=Ok,p3=Bk,m3=l3,h3=f3,v3=function(t){if(t&&typeof t=="object"){if(d3(t))return"Map";if(p3(t))return"Set";if(m3(t))return"WeakMap";if(h3(t))return"WeakSet"}return!1},Xk=Function.prototype.toString,ao=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Vp,Ol;if(typeof ao=="function"&&typeof Object.defineProperty=="function")try{Vp=Object.defineProperty({},"length",{get:function(){throw Ol}}),Ol={},ao(function(){throw 42},null,Vp)}catch(e){e!==Ol&&(ao=null)}else ao=null;var g3=/^\s*class\b/,Kp=function(t){try{var n=Xk.call(t);return g3.test(n)}catch{return!1}},td=function(t){try{return Kp(t)?!1:(Xk.call(t),!0)}catch{return!1}},Ll=Object.prototype.toString,x3="[object Object]",y3="[object Function]",w3="[object GeneratorFunction]",b3="[object HTMLAllCollection]",k3="[object HTML document.all class]",E3="[object HTMLCollection]",S3=typeof Symbol=="function"&&!!Symbol.toStringTag,_3=!(0 in[,]),Zp=function(){return!1};if(typeof document=="object"){var j3=document.all;Ll.call(j3)===Ll.call(document.all)&&(Zp=function(t){if((_3||!t)&&(typeof t>"u"||typeof t=="object"))try{var n=Ll.call(t);return(n===b3||n===k3||n===E3||n===x3)&&t("")==null}catch{}return!1})}var C3=ao?function(t){if(Zp(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{ao(t,null,Vp)}catch(n){if(n!==Ol)return!1}return!Kp(t)&&td(t)}:function(t){if(Zp(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(S3)return td(t);if(Kp(t))return!1;var n=Ll.call(t);return n!==y3&&n!==w3&&!/^\[object HTML/.test(n)?!1:td(t)},I3=C3,A3=Object.prototype.toString,Qk=Object.prototype.hasOwnProperty,N3=function(t,n,r){for(var i=0,o=t.length;i<o;i++)Qk.call(t,i)&&(r==null?n(t[i],i,t):n.call(r,t[i],i,t))},F3=function(t,n,r){for(var i=0,o=t.length;i<o;i++)r==null?n(t.charAt(i),i,t):n.call(r,t.charAt(i),i,t)},T3=function(t,n,r){for(var i in t)Qk.call(t,i)&&(r==null?n(t[i],i,t):n.call(r,t[i],i,t))},R3=function(t,n,r){if(!I3(n))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=r),A3.call(t)==="[object Array]"?N3(t,n,i):typeof t=="string"?F3(t,n,i):T3(t,n,i)},P3=R3,D3=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],nd=D3,M3=typeof globalThis>"u"?am:globalThis,O3=function(){for(var t=[],n=0;n<nd.length;n++)typeof M3[nd[n]]=="function"&&(t[t.length]=nd[n]);return t},Mc=P3,L3=O3,rx=Zo,Fh=pn,Bl=bh,B3=Fh("Object.prototype.toString"),Jk=Pi(),ix=typeof globalThis>"u"?am:globalThis,qp=L3(),Th=Fh("String.prototype.slice"),rd=Object.getPrototypeOf,$3=Fh("Array.prototype.indexOf",!0)||function(t,n){for(var r=0;r<t.length;r+=1)if(t[r]===n)return r;return-1},Oc={__proto__:null};Jk&&Bl&&rd?Mc(qp,function(e){var t=new ix[e];if(Symbol.toStringTag in t){var n=rd(t),r=Bl(n,Symbol.toStringTag);if(!r){var i=rd(n);r=Bl(i,Symbol.toStringTag)}Oc["$"+e]=rx(r.get)}}):Mc(qp,function(e){var t=new ix[e],n=t.slice||t.set;n&&(Oc["$"+e]=rx(n))});var U3=function(t){var n=!1;return Mc(Oc,function(r,i){if(!n)try{"$"+r(t)===i&&(n=Th(i,1))}catch{}}),n},z3=function(t){var n=!1;return Mc(Oc,function(r,i){if(!n)try{r(t),n=Th(i,1)}catch{}}),n},G3=function(t){if(!t||typeof t!="object")return!1;if(!Jk){var n=Th(B3(t),8,-1);return $3(qp,n)>-1?n:n!=="Object"?!1:z3(t)}return Bl?U3(t):null},W3=pn,ox=W3("ArrayBuffer.prototype.byteLength",!0),H3=Hk,V3=function(t){return H3(t)?ox?ox(t):t.byteLength:NaN},eE=ST,$n=pn,ax=ZT,K3=Bn,Mo=l5,Z3=Rk,sx=g5,lx=_k,cx=Pk,ux=Hk,fx=j5,dx=N5,px=T5,mx=gh,hx=s3,vx=v3,gx=G3,xx=V3,yx=$n("SharedArrayBuffer.prototype.byteLength",!0),wx=$n("Date.prototype.getTime"),id=Object.getPrototypeOf,bx=$n("Object.prototype.toString"),Lc=K3("%Set%",!0),Yp=$n("Map.prototype.has",!0),Bc=$n("Map.prototype.get",!0),kx=$n("Map.prototype.size",!0),$c=$n("Set.prototype.add",!0),tE=$n("Set.prototype.delete",!0),Uc=$n("Set.prototype.has",!0),$l=$n("Set.prototype.size",!0);function Ex(e,t,n,r){for(var i=Mo(e),o;(o=i.next())&&!o.done;)if(kn(t,o.value,n,r))return tE(e,o.value),!0;return!1}function nE(e){if(typeof e>"u")return null;if(typeof e!="object")return typeof e=="symbol"?!1:typeof e=="string"||typeof e=="number"?+e==+e:!0}function q3(e,t,n,r,i,o){var a=nE(n);if(a!=null)return a;var s=Bc(t,a),c=eE({},i,{strict:!1});return typeof s>"u"&&!Yp(t,a)||!kn(r,s,c,o)?!1:!Yp(e,a)&&kn(r,s,c,o)}function Y3(e,t,n){var r=nE(n);return r??(Uc(t,r)&&!Uc(e,r))}function Sx(e,t,n,r,i,o){for(var a=Mo(e),s,c;(s=a.next())&&!s.done;)if(c=s.value,kn(n,c,i,o)&&kn(r,Bc(t,c),i,o))return tE(e,c),!0;return!1}function kn(e,t,n,r){var i=n||{};if(i.strict?sx(e,t):e===t)return!0;var o=hx(e),a=hx(t);if(o!==a)return!1;if(!e||!t||typeof e!="object"&&typeof t!="object")return i.strict?sx(e,t):e==t;var s=r.has(e),c=r.has(t),u;if(s&&c){if(r.get(e)===r.get(t))return!0}else u={};return s||r.set(e,u),c||r.set(t,u),J3(e,t,i,r)}function _x(e){return!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function X3(e,t,n,r){if($l(e)!==$l(t))return!1;for(var i=Mo(e),o=Mo(t),a,s,c;(a=i.next())&&!a.done;)if(a.value&&typeof a.value=="object")c||(c=new Lc),$c(c,a.value);else if(!Uc(t,a.value)){if(n.strict||!Y3(e,t,a.value))return!1;c||(c=new Lc),$c(c,a.value)}if(c){for(;(s=o.next())&&!s.done;)if(s.value&&typeof s.value=="object"){if(!Ex(c,s.value,n.strict,r))return!1}else if(!n.strict&&!Uc(e,s.value)&&!Ex(c,s.value,n.strict,r))return!1;return $l(c)===0}return!0}function Q3(e,t,n,r){if(kx(e)!==kx(t))return!1;for(var i=Mo(e),o=Mo(t),a,s,c,u,f,d;(a=i.next())&&!a.done;)if(u=a.value[0],f=a.value[1],u&&typeof u=="object")c||(c=new Lc),$c(c,u);else if(d=Bc(t,u),typeof d>"u"&&!Yp(t,u)||!kn(f,d,n,r)){if(n.strict||!q3(e,t,u,f,n,r))return!1;c||(c=new Lc),$c(c,u)}if(c){for(;(s=o.next())&&!s.done;)if(u=s.value[0],d=s.value[1],u&&typeof u=="object"){if(!Sx(c,e,u,d,n,r))return!1}else if(!n.strict&&(!e.has(u)||!kn(Bc(e,u),d,n,r))&&!Sx(c,e,u,d,eE({},n,{strict:!1}),r))return!1;return $l(c)===0}return!0}function J3(e,t,n,r){var i,o;if(typeof e!=typeof t||e==null||t==null||bx(e)!==bx(t)||lx(e)!==lx(t))return!1;var a=cx(e),s=cx(t);if(a!==s)return!1;var c=e instanceof Error,u=t instanceof Error;if(c!==u||(c||u)&&(e.name!==t.name||e.message!==t.message))return!1;var f=dx(e),d=dx(t);if(f!==d||(f||d)&&(e.source!==t.source||ax(e)!==ax(t)))return!1;var p=fx(e),h=fx(t);if(p!==h||(p||h)&&wx(e)!==wx(t)||n.strict&&id&&id(e)!==id(t))return!1;var g=gx(e),w=gx(t);if(g!==w)return!1;if(g||w){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var _=_x(e),y=_x(t);if(_!==y)return!1;if(_||y){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var x=ux(e),E=ux(t);if(x!==E)return!1;if(x||E)return xx(e)!==xx(t)?!1:typeof Uint8Array=="function"&&kn(new Uint8Array(e),new Uint8Array(t),n,r);var b=px(e),S=px(t);if(b!==S)return!1;if(b||S)return yx(e)!==yx(t)?!1:typeof Uint8Array=="function"&&kn(new Uint8Array(e),new Uint8Array(t),n,r);if(typeof e!=typeof t)return!1;var A=mx(e),R=mx(t);if(A.length!==R.length)return!1;for(A.sort(),R.sort(),i=A.length-1;i>=0;i--)if(A[i]!=R[i])return!1;for(i=A.length-1;i>=0;i--)if(o=A[i],!kn(e[o],t[o],n,r))return!1;var C=vx(e),T=vx(t);return C!==T?!1:C==="Set"||T==="Set"?X3(e,t,n,r):C==="Map"?Q3(e,t,n,r):!0}var eP=function(t,n,r){return kn(t,n,r,Z3())};const tP=tu(eP);var ps;(e=>{function t(i,o){return o in i&&delete i[o],i}e.remove=t;function n(i,o){const a={};for(const s of o)s in i&&(a[s]=i[s]);return a}e.select=n;function r(i,o){return tP(i,o)}e.deepCompare=r})(ps||(ps={}));function nP({importedFiles:e,setImportedFiles:t,currentPalette:n,setCurrentPalette:r,onAbort:i,onFinish:o}){if(e.length===0)throw new Error("No files.");const[a,s]=F.useState(!1),[c,u]=F.useState(e.map(b=>rP(b))),[f,d]=F.useState(0),p=e[f],h=c[f],g=F.useCallback(b=>{const S=[...c];S[f]=b,u(S)},[c,f]),w=F.useCallback(b=>{if(a)return;s(!0),Ra.justBlurIt();const S=e.map(R=>({...R,selectedImporter:{...R.selectedImporter,config:{...R.selectedImporter.config,palette:b.palette}}}));cn.deferMap(S,fi.importImage).then(R=>{const C=c.map((T,N)=>{if(T===void 0)return;const L=R[N];return{...T,importedFile:L,options:{...T.options,transparencyIndex:L.importerResult.kind!=="error"?L.importerResult.result.transparencyIndex:T.options.transparencyIndex}}});return{updatedImportFiles:R,updatedConfigFiles:C}}).then(({updatedImportFiles:R,updatedConfigFiles:C})=>{t(R),u(C),r(b),d(0)}).catch(R=>{console.error(R),i()}).finally(()=>s(!1))},[a,r,e,t,c,u,i]),_=F.useCallback(b=>{if(a)return;s(!0),Ra.justBlurIt();const S={...p,selectedImporter:b};cn.defer(()=>fi.importImage(S)).then(R=>{const C=[...e];C[f]=R,t(C),R.importerResult.kind==="error"?g(void 0):g({importedFile:R,options:{center:(h==null?void 0:h.options.center)??!1,compress:(h==null?void 0:h.options.compress)??!1,transparencyIndex:R.importerResult.result.transparencyIndex}})}).catch(R=>{console.error(R),i()}).finally(()=>s(!1))},[a,p,e,f,t,i,h,g]),y=F.useCallback(()=>{if(a)return;s(!0),Ra.justBlurIt();const b=[],S=p.selectedImporter,A=Array.from({length:e.length}).map(async(R,C)=>{var O,P;const T={importedFile:e[C],configedFile:c[C]};if(T.importedFile===p)return T;if(T.importedFile.selectedImporter.config.compatibilityKey!==S.config.compatibilityKey)return b.push(C),T;if(ps.deepCompare(T.importedFile.selectedImporter.config,S.config))return T;let L={...T.importedFile,selectedImporter:{...T.importedFile.selectedImporter,config:S.config}};L=await cn.defer(()=>fi.importImage(L));const $=L.importerResult.kind==="error"?void 0:{importedFile:L,options:{center:((O=T.configedFile)==null?void 0:O.options.center)??!1,compress:((P=T.configedFile)==null?void 0:P.options.compress)??!1,transparencyIndex:L.importerResult.result.transparencyIndex}};return{importedFile:L,configedFile:$}});Promise.all(A).then(R=>{const C=R.map(N=>N.importedFile),T=R.map(N=>N.configedFile);if(t(C),u(T),b.length>0){const N=b.map(L=>{const $=C[L];return`#${L+1} (${$.file.name})`});alert(`Done. But it wasn't possible to apply the current importer config to the following images because their importer/decoder has different options: ${N.join("; ")}`)}else alert("Done!")}).catch(R=>{console.error(R),i()}).finally(()=>{s(!1)})},[p,e,t,a,s,c,i]),x=F.useCallback(()=>{if(a||h===void 0)return;const b=c.map(S=>S===h||S===void 0?S:{...S,options:{...h.options,transparencyIndex:S.options.transparencyIndex}});u(b),alert("Done!")},[a,h,c]),E=F.useCallback(()=>{const b=c.filter(Cc.notUndefined);o(b)},[c,o]);return l.jsx(Np,{isLoading:a?"Recompiling...":!1,children:l.jsxs(Vt,{children:[l.jsx(o4,{currentPalette:n,setCurrentPalette:w}),l.jsx(_t,{header:"Importer Options",children:l.jsx(cF,{selectedImporter:p.selectedImporter,setSelectedImporter:_,onClickApplyAll:e.length>1?y:void 0})}),l.jsxs(_t,{header:"Frame Options",children:[l.jsx(uF,{decoded:p.decodedUserImage,imported:p.importerResult}),l.jsx(dF,{resultWrapper:p.importerResult}),h!==void 0&&l.jsx(a4,{importedFile:p,currentConfig:h,setCurrentConfig:g,onClickApplyAll:e.length>1?x:void 0})]}),l.jsx(cb,{current:f,total:c.length,onPrev:()=>{a||f!==0&&d(f-1)},onNext:()=>{a||f!==c.length-1&&d(f+1)},onFinish:E})]})})}function rP(e){if(e.importerResult.kind!=="error")return{importedFile:e,options:{center:!1,compress:!0,transparencyIndex:e.importerResult.result.transparencyIndex}}}const iP=[rk,vb],rE=iP,oP=rE.flatMap(e=>e.supportedFileExts);function iE({type:e,replacing:t,currentPalette:n,setCurrentPalette:r,onFinish:i,onAbort:o}){const[a,s]=F.useState(),[c,u]=F.useState(!1),[f,d]=F.useState(),[p,h]=F.useState(!1),[g,w]=F.useState(!1),_=F.useCallback(E=>{if(E.length===0){o();return}h(!0),cn.deferMap(E,fi.importImage).then(d).catch(S=>{console.error(S),o()}).finally(()=>h(!1))},[o]),y=F.useCallback(E=>{if(E.length===0){o();return}t!==void 0&&E.length>1&&(E=[E[0]]),u(!0),cn.deferMap(E,S=>fi.decodeImage(S,n.palette,rE)).then(S=>{if(s(S),S.length===1){const A=S[0];A.error===void 0&&_([A])}}).catch(S=>{console.error(S),o()}).finally(()=>u(!1))},[t,o,n,_]),x=F.useCallback(E=>{const b=E.map(A=>{if(A.importedFile.importerResult.kind==="error")throw new Error("Imported files with errors shouldn't even reach here.");const R=A.importedFile.importerResult.result.resource,{width:C,height:T}=R.compiledImage;return{width:C,height:T,xOffset:A.options.center?Math.floor(C/2):0,yOffset:A.options.center?Math.floor(T/2):0,transparencyIndex:A.options.transparencyIndex,unknown2:0,unknown3:0,kind:"single",layerData:{kind:"palette-idx",compress:A.options.compress,imageResource:R}}});if(t!==void 0){let A=b[0];A={...A,unknown2:t.unknown2,unknown3:t.unknown3},i(A),w(!0);return}let S;if(e==="subframes")S={type:e,subframes:b};else{const A=b.map(R=>({duration:10,frameData:R}));S={type:e,frames:A}}i(S),w(!0)},[e,t,w,i]);return c?l.jsx(Vt,{children:l.jsx(_t,{children:"Decoding..."})}):a===void 0?l.jsx(ib,{isReplacing:t!==void 0,onFinish:y,onAbort:o,acceptFiles:oP.map(E=>`.${E}`).join(",")}):p?l.jsx(Vt,{children:l.jsx(_t,{children:"Compiling..."})}):f===void 0?l.jsx(e4,{decodedUserFiles:a,onFinish:_,onAbort:o}):g?l.jsx(Vt,{children:l.jsx(_t,{children:"Finished! You can now close this wizard..."})}):l.jsx(nP,{importedFiles:f,setImportedFiles:d,currentPalette:n,setCurrentPalette:r,onFinish:x,onAbort:o})}var Mr;(e=>{function t(){return sg(r=>r.currentPalette)}e.useCurrentPalette=t;function n(){return sg(r=>r.gafOnlyActions.setCurrentPalette)}e.useSetCurrentPalette=n})(Mr||(Mr={}));function aP({type:e,onAbort:t,onEnded:n}){const r=Mr.useCurrentPalette(),i=Mr.useSetCurrentPalette(),o=Z.useAddFramesToActiveEntry(),a=Z.useAddSubframesToActiveFrame(),s=Z.useConvertActiveFrameToMultiFrame(),c=F.useCallback(u=>{if(u.type==="frames")o(u.frames);else{const f=s(!0);a(u.subframes),f&&alert("The current Frame was automatically converted to a multi-layered Frame.")}n()},[n,o,a,s]);return l.jsx(iE,{type:e,currentPalette:r,setCurrentPalette:i,onFinish:c,onAbort:t})}function sP({decodedFiles:e,onNext:t,onAbort:n}){if(e.length===0)throw new Error("No files.");const[r,i]=F.useState(e.map(f=>{const d=f.result.kind==="err"?f.result.err:void 0;return{content:f,fileName:f.file.name,disabled:d!==void 0,error:d}})),[o,a]=F.useState(),s=F.useCallback(()=>{const f=r.filter(d=>!d.disabled).map(({content:d})=>{if(d.result.kind!=="err")return{file:d.file,result:d.result.ok}}).filter(Cc.notUndefined);t(f)},[r,t]),c=r.every(f=>f.disabled),u=o!==void 0?r[o]:void 0;return l.jsxs(Vt,{children:[l.jsx(_t,{children:l.jsxs("div",{className:"flex space-x-4 mb-4",children:[l.jsxs("div",{className:"flex-1 overflow-hidden",children:[l.jsxs("div",{className:"text-center text-xs font-bold text-slate-500 mb-0.5",children:["Reorder Files (",r.length,")"]}),l.jsx(sb,{items:r,setItems:i,selectedIndex:o,setSelectedIndex:a})]}),l.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[l.jsx("div",{className:"text-xs font-bold text-slate-500 mb-0.5",children:"Image Preview"}),l.jsx(lP,{selectedItem:u})]})]})}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(ne,{color:"default",onClick:n,children:"Exit"}),l.jsx(ne,{color:"success",onClick:s,disabled:c,children:"Import"})]})]})}function lP({selectedItem:e}){if(e===void 0)return l.jsx("div",{className:"flex justify-center items-center text-gray-400 text-center p-2",children:"(No file selected)"});const t=e.content.result;if(t.kind==="err")return l.jsx("button",{className:"flex justify-center items-center text-red-600 text-center p-2 hover:underline",onClick:()=>{console.log(t.err),alert(t.err)},children:"(Couldn't decode file)"});const n=l.jsx(Qn,{imageData:t.ok.image,imageWidth:t.ok.metadata.width,imageHeight:t.ok.metadata.height});return e.disabled?l.jsxs("div",{className:"relative",children:[l.jsx("div",{style:{opacity:"30%"},children:n}),l.jsx("div",{className:"absolute inset-0 flex justify-center items-center text-center",children:l.jsx("span",{className:"text-gray-500 font-bold",children:"(Disabled)"})})]}):n}function cP({isReplacing:e,availableDecoders:t,onNext:n,onAbort:r}){const i=F.useMemo(()=>t.flatMap(o=>o.supportedFileExts).map(o=>`.${o}`).join(","),[t]);return l.jsx(ib,{isReplacing:e,onFinish:n,acceptFiles:i,onAbort:r})}function oE({onClick:e,disabled:t,size:n,icon:r}){const i=t?"text-sky-600 opacity-50":"text-sky-600 hover:text-sky-500 active:text-sky-500";return l.jsx("button",{className:`${i} inline-block`,onClick:()=>!t&&e(),disabled:t,children:l.jsx(r,{size:n})})}const aE=[{id:"round",name:"Round",desc:"TODO",converter:e=>e<128?0:1},{id:"opaque-or-0",name:"Opaque or nothing",desc:"TODO",converter:e=>e===255?1:0},{id:"transparent-or-1",name:"Transparent or full",desc:"TODO",converter:e=>e===0?0:1}],sE=[{id:"round",name:"Round",desc:"TODO",converter:kt.ColorUtils.DepthConverters.round8to5}],lE=[{id:"round",name:"Round",desc:"TODO",converter:kt.ColorUtils.DepthConverters.round8to4}];function cE({show1555:e,config1555:t,setConfig1555:n,show4444:r,config4444:i,setConfig4444:o}){const a=t.converter8to1,s=p=>{n({...t,converter8to1:p})},c=t.converter8to5,u=p=>{n({...t,converter8to5:p})},f=i.converter8to4,d=p=>{o({...i,converter8to4:p})};return l.jsxs("div",{className:"flex space-x-8",children:[e&&l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-center font-semibold mb-2",children:"1555 Settings"}),l.jsxs("div",{className:"flex flex-col space-y-4",children:[l.jsx(od,{label:"8-bit to 1-bit (Alpha)",namedConverters:aE,value:a,setValue:s}),l.jsx(od,{label:"8-bit to 5-bit (Red, Green, Blue)",namedConverters:sE,value:c,setValue:u})]})]}),r&&l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-center font-semibold mb-2",children:"4444 Settings"}),l.jsx(od,{label:"8-bit to 4-bit (ARGB)",namedConverters:lE,value:f,setValue:d})]}),(!e||!r)&&l.jsx("div",{className:"flex-1"})]})}function od({label:e,namedConverters:t,value:n,setValue:r}){const i=F.useMemo(()=>t.map(a=>({id:a.id,label:a.name})),[t]),o=F.useCallback(()=>{},[]);return l.jsxs("div",{children:[l.jsx("div",{className:"text-xs font-semibold",children:e}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Cu,{options:i,value:n.id,onChange:a=>r(t.find(s=>s.id===a))}),l.jsx(oE,{onClick:o,icon:ie.Help,size:18})]})]})}function uP({target:e,onNext:t,onAbort:n}){const[r,i]=F.useState({converter8to1:aE[0],converter8to5:sE[0]}),[o,a]=F.useState({converter8to4:lE[0]}),s=F.useCallback(()=>{r===void 0||o===void 0||t({config1555:r,config4444:o})},[t,r,o]);return l.jsxs(Vt,{children:[l.jsxs(_t,{children:[l.jsxs("div",{className:"text-sm mb-1",children:[l.jsx("p",{children:"Select the conversion method for each color/component channel."}),l.jsx("p",{children:"If you don't know what this is just use the defaults."}),l.jsx(Pe,{label:"Or click here for a short explanation",onClick:()=>{}})]}),l.jsx(cE,{show1555:e.kind==="taf-pair"||e.subFormat==="taf_1555",show4444:e.kind==="taf-pair"||e.subFormat==="taf_4444",config1555:r,config4444:o,setConfig1555:i,setConfig4444:a})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(ne,{color:"default",onClick:n,children:"Exit"}),l.jsx(ne,{color:"success",onClick:s,disabled:r===void 0||o===void 0,children:"Next"})]})]})}function fP({target:e,original:t,results:n}){if(e.kind==="taf-solo"){if(n.target!=="taf-solo")throw new Error("Target mismatch.");return l.jsx(dP,{original:t,importerResult:n.subFormat==="taf_1555"?n.taf_1555:n.taf_4444,subFormat:n.subFormat})}return l.jsx(pP,{original:t,results:n})}function dP({original:e,importerResult:t,subFormat:n}){const r=F.useMemo(()=>t.kind==="error"?l.jsx("div",{className:"flex justify-center items-center text-center text-red-400",children:"(Error)"}):l.jsx(Qn,{imageData:t.result.resource.compiledImage,imageWidth:e.result.metadata.width,imageHeight:e.result.metadata.height,wrapperHeight:250}),[e,t]);return l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"text-center text-slate-500 text-xs font-bold mb-0.5",children:"Original"}),l.jsx(Qn,{imageData:e.result.image,imageWidth:e.result.metadata.width,imageHeight:e.result.metadata.height,wrapperHeight:125}),l.jsx(ie.ArrowDown,{className:"mt-1 text-gray-400"}),l.jsx("div",{className:"text-center text-slate-500 text-xs font-bold mb-0.5",children:n==="taf_1555"?"1555":"4444"}),r]})}function pP({original:e,results:t}){if(t.target!=="taf-pair")throw new Error("Target mismatch.");const n=t.taf_1555,r=F.useMemo(()=>n.kind==="error"?l.jsx("div",{className:"flex justify-center items-center text-center text-red-400",children:"(Error)"}):l.jsx(Qn,{imageData:n.result.resource.compiledImage,imageWidth:e.result.metadata.width,imageHeight:e.result.metadata.height,wrapperHeight:250}),[e,n]),i=t.taf_4444,o=F.useMemo(()=>i.kind==="error"?l.jsx("div",{className:"flex justify-center items-center text-center text-red-400",children:"(Error)"}):l.jsx(Qn,{imageData:i.result.resource.compiledImage,imageWidth:e.result.metadata.width,imageHeight:e.result.metadata.height,wrapperHeight:250}),[e,i]);return l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"text-center text-slate-500 text-xs font-bold mb-0.5",children:"Original"}),l.jsx(Qn,{imageData:e.result.image,imageWidth:e.result.metadata.width,imageHeight:e.result.metadata.height,wrapperHeight:125}),l.jsx(ie.ArrowFork,{className:"mt-1 rotate-180 text-gray-400"})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[l.jsx("div",{className:"text-center text-slate-500 text-xs font-bold mb-0.5",children:"1555"}),r]}),l.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[l.jsx("div",{className:"text-center text-slate-500 text-xs font-bold mb-0.5",children:"4444"}),o]})]})]})}function mP({currentResult:e,setCurrentResult:t,onClickApplyAll:n}){const r=l.jsxs("label",{className:"flex items-center space-x-1.5",children:[l.jsx("input",{type:"checkbox",checked:e.options.center,onChange:o=>{const a=o.target.checked;t({...e,options:{...e.options,center:a}})}}),l.jsx("span",{children:"Auto center image"})]}),i=l.jsxs("label",{className:"flex items-center space-x-1.5",children:[l.jsx("input",{type:"checkbox",checked:e.options.compress,onChange:o=>{const a=o.target.checked;t({...e,options:{...e.options,compress:a}})}}),l.jsx("span",{children:"Compress image"})]});return l.jsxs("div",{className:"flex flex-col",children:[r,i,n&&l.jsx("div",{className:"mt-2 text-left text-xs",children:l.jsx(Pe,{label:"Apply to all images",onClick:n})})]})}var yn;(e=>{function t(i){return{width:i.width,height:i.height,xOffset:i.xOffset,yOffset:i.yOffset,transparencyIndex:i.transparencyIndex,unknown2:i.unknown2,unknown3:i.unknown3}}e.makeBaseFrameData=t;function n(i,o,a,s){let c;if(r(i,"argb1555"))c=kt.ColorUtils.convertARGB1555ToRGBA8888(i,o,a,{depthConvert1to8:kt.ColorUtils.DepthConverters.round1to8,depthConvert5to8:kt.ColorUtils.DepthConverters.round5to8});else if(r(i,"argb4444"))c=kt.ColorUtils.convertARGB4444ToRGBA8888(i,o,a,{});else throw new Error(`Unexpected color format: ${i.format}`);return s.compileImage(o,a,c)}e.compileTafImage=n;function r(i,o){return i.format===o}e.isFormat=r})(yn||(yn={}));const jx=new Wo;function uE(e){return{createResource:async(t,n)=>{const{width:r,height:i}=t.metadata,o=t.colorData.bytes;ir.assertEq(r*i*4,o.length);let a;if(e==="taf_1555"){const s=n,c=kt.ColorUtils.convertRGBA8888ToARGB1555(t.colorData,r,i,{depthConvert8to1:s.converter8to1.converter,depthConvert8to5:s.converter8to5.converter}),u=yn.compileTafImage(c,r,i,jx);a={lossyPixelMatches:"TODO",resource:{kind:"colored",colorData:c,compiledImage:u}}}else{const s=n,c=kt.ColorUtils.convertRGBA8888ToARGB4444(t.colorData,r,i,{depthConvert8to4:s.converter8to4.converter}),u=yn.compileTafImage(c,r,i,jx);a={lossyPixelMatches:"TODO",resource:{kind:"colored",colorData:c,compiledImage:u}}}return{kind:"success",result:a}}}}const Cx=uE("taf_1555"),Ix=uE("taf_4444");var zc;(e=>{async function t(r,i){const o=No.getType(r.name);if(o===null)return{file:r,result:{kind:"err",err:`Couldn't detect mimeType for file name: ${r.name}.`}};const a=No.getExtension(o);if(a===null)return{file:r,result:{kind:"err",err:`Unsupported mimeType: ${o}`}};for(const s of i){if(!s.supportedFileExts.includes(a))continue;const u=await s.decodeFile(r);return"error"in u?{file:r,result:{kind:"err",err:u.error}}:{file:r,result:{kind:"ok",ok:u}}}return{file:r,result:{kind:"err",err:`No decoder available for file extension: ${a}`}}}e.decodeImage=t;async function n(r,i,o){if(r.kind==="taf-pair"){const a=Cx.createResource(i,o.config1555),s=Ix.createResource(i,o.config4444);return Promise.all([a,s]).then(([c,u])=>({target:"taf-pair",taf_1555:c,taf_4444:u}))}return r.subFormat==="taf_1555"?Cx.createResource(i,o.config1555).then(a=>({target:"taf-solo",subFormat:"taf_1555",taf_1555:a})):Ix.createResource(i,o.config4444).then(a=>({target:"taf-solo",subFormat:"taf_4444",taf_4444:a}))}e.compileItem=n})(zc||(zc={}));var go;(e=>{function t(r,i,o){if(i<0||i>r.length)throw console.error(i),console.error(r),new Error("Index out of bounds.");const a=[...r];return a[i]=o,a}e.update=t;function n(r,i,o){if(i<0||i>r.length)throw console.error(i),console.error(r),new Error("Index out of bounds.");const a=[...r];return a[i]=o(a[i]),a}e.updateFrom=n})(go||(go={}));const hP={center:!1,compress:!0};function vP({target:e,okDecodedFiles:t,onNext:n,onAbort:r}){if(t.length===0)throw new Error("No files.");const[i,o]=F.useState(),[a,s]=F.useState(),[c,u]=F.useState(!1),[f,d]=F.useState(!1),[p,h]=F.useState(0),g=F.useCallback(S=>{if(o(S),S===void 0){s(void 0);return}d(!0);const A=a==null?void 0:a.map(C=>C.options);cn.deferMap(t,(C,T)=>zc.compileItem(e,C.result,S).then(L=>{const O=(A==null?void 0:A[T])??hP;return{originalfile:C.file,decodedUserImage:C.result,importerResult:L,options:O}})).then(C=>{s(C)}).catch(C=>{console.error(C),r()}).finally(()=>d(!1))},[e,t,r,a]),w=F.useCallback(S=>{if(a===void 0)throw new Error("No results. This should have been unreachable.");const A=go.update(a,p,S);s(A)},[a,p]),_=F.useCallback(()=>{if(a===void 0)throw new Error("No results. This should have been unreachable.");const A=a[p].options,R=a.map(C=>({...C,options:A}));s(R),alert("Done!")},[a,p]),y=F.useCallback(()=>{if(a===void 0)return;const S=a.filter(A=>A.importerResult.target==="taf-pair"?A.importerResult.taf_1555.kind!=="error"&&A.importerResult.taf_4444.kind!=="error":A.importerResult.subFormat==="taf_1555"?A.importerResult.taf_1555.kind!=="error":A.importerResult.taf_4444.kind!=="error");if(S.length===0){alert("All images being imported have an error. Nothing will be imported.");return}n(S)},[a,n]);if(i===void 0||a===void 0)return l.jsx(Np,{label:"Compiling images...",isLoading:f,children:l.jsx(uP,{target:e,onNext:g,onAbort:r})});const x=t.length,E=t[p],b=a[p];return l.jsx(Np,{label:"Recompiling images...",isLoading:f,children:l.jsxs(Vt,{children:[l.jsx(_t,{children:l.jsxs("div",{children:[l.jsxs(vc,{children:[l.jsx("span",{className:"mr-1",children:"Conversion Methods"}),l.jsx(Pe,{label:c?"Collapse":"Expand",onClick:()=>u(!c)})]}),l.jsxs("div",{className:c?"":"hidden",children:[l.jsx("div",{className:"text-center text-xs text-slate-500 mb-2",children:"(applies to all images being imported)"}),l.jsx(cE,{show1555:e.kind==="taf-pair"||e.subFormat==="taf_1555",show4444:e.kind==="taf-pair"||e.subFormat==="taf_4444",config1555:i.config1555,config4444:i.config4444,setConfig1555:S=>g({...i,config1555:S}),setConfig4444:S=>g({...i,config4444:S})})]})]})}),l.jsxs(_t,{children:[l.jsxs("div",{children:[l.jsx(vc,{children:"Result"}),l.jsx(fP,{target:e,original:E,results:b.importerResult})]}),l.jsx(mP,{currentResult:b,setCurrentResult:w,onClickApplyAll:t.length>1?_:void 0})]}),l.jsx(cb,{current:p,total:t.length,onPrev:()=>{f||p!==0&&h(p-1)},onNext:()=>{f||p!==x&&h(p+1)},onFinish:y})]})})}const Ax=[mb,nk];function Ru({type:e,replacing:t,onFinish:n,target:r,onAbort:i}){const[o,a]=F.useState(),[s,c]=F.useState(),[u,f]=F.useState(),d=F.useCallback(h=>{const g=h.map(_=>{const{width:y,height:x}=_.decodedUserImage.metadata,E={width:y,height:x,xOffset:_.options.center?Math.floor(y/2):0,yOffset:_.options.center?Math.floor(x/2):0,transparencyIndex:0,unknown2:0,unknown3:0};if(r.kind==="taf-solo"){if(_.importerResult.target!=="taf-solo")throw new Error("Target mismatch.");let A;if(r.subFormat==="taf_1555"){if(_.importerResult.subFormat!=="taf_1555")throw new Error("Target mismatch.");A=_.importerResult.taf_1555}else{if(_.importerResult.subFormat!=="taf_4444")throw new Error("Target mismatch.");A=_.importerResult.taf_4444}if(A.kind==="error")throw new Error("Imported files with errors shouldn't even reach here.");return{...E,kind:"single",layerData:{kind:"raw-colors",imageResource:A.result.resource}}}if(_.importerResult.target!=="taf-pair")throw new Error("Target mismatch.");const b=_.importerResult.taf_1555,S=_.importerResult.taf_4444;if(b.kind==="error"||S.kind==="error")throw new Error("Imported files with errors shouldn't even reach here.");return{...E,kind:"single",layerData:{kind:"raw-colors-pair",imageResource1555:b.result.resource,imageResource4444:S.result.resource}}});if(t!==void 0){let _=g[0];_={..._,unknown2:t.unknown2,unknown3:t.unknown3},n(_);return}let w;if(e==="subframes")w={type:e,subframes:g};else{const _=g.map(y=>({duration:2,frameData:y}));w={type:e,frames:_}}n(w)},[t,e,r,n]),p=F.useCallback(h=>{if(o!==void 0)return;if(h.length===0){i();return}t!==void 0&&h.length>1&&(h=[h[0]]),a("Decoding files...");const g=h.map(w=>zc.decodeImage(w,Ax));Promise.all(g).then(w=>{if(c(w),w.length===1){const _=w[0];_.result.kind==="ok"&&f([{file:_.file,result:_.result.ok}])}}).catch(w=>{console.error(w)}).finally(()=>a(void 0))},[t,o,i]);return o?l.jsx(Vt,{children:l.jsx(_t,{children:o})}):s===void 0?l.jsx(cP,{isReplacing:t!==void 0,onAbort:i,onNext:p,availableDecoders:Ax}):u===void 0?l.jsx(sP,{decodedFiles:s,onNext:f,onAbort:i}):l.jsx(vP,{target:r,okDecodedFiles:u,onNext:d,onAbort:i})}function gP({type:e,onAbort:t,onEnded:n}){const r=Z.useAddFramesToActiveEntry(),i=Z.useAddSubframesToActiveFrame(),o=Z.useConvertActiveFrameToMultiFrame(),a=F.useCallback(s=>{if(s.type==="frames")r(s.frames);else{const c=o(!0);i(s.subframes),c&&alert("The current Frame was automatically converted to a multi-layered Frame.")}n()},[n,r,i,o]);return l.jsx(Ru,{target:{kind:"taf-pair"},type:e,onFinish:a,onAbort:t})}function xP({type:e,onAbort:t,onEnded:n}){const r=Io.useSubFormat(),i=Z.useAddFramesToActiveEntry(),o=Z.useAddSubframesToActiveFrame(),a=Z.useConvertActiveFrameToMultiFrame(),s=F.useCallback(c=>{if(c.type==="frames")i(c.frames);else{const u=a(!0);o(c.subframes),u&&alert("The current Frame was automatically converted to a multi-layered Frame.")}n()},[n,i,o,a]);return l.jsx(Ru,{target:{kind:"taf-solo",subFormat:r},type:e,onFinish:s,onAbort:t})}function yP({type:e,onAbort:t,onEnded:n}){const r=Z.useFormat();return r==="gaf"?l.jsx(aP,{type:e,onEnded:n,onAbort:t}):r==="taf-solo"?l.jsx(xP,{type:e,onEnded:n,onAbort:t}):l.jsx(gP,{type:e,onEnded:n,onAbort:t})}function wP({type:e,close:t}){const n=Z.useActiveEntryIndex(),r=Z.useActiveFrameIndex();return n===null?l.jsx("div",{className:"p-4",children:"No entry selected."}):e==="subframes"&&r===null?l.jsx("div",{className:"p-4",children:"No frame selected."}):l.jsx("div",{style:{minWidth:600},children:l.jsx(yP,{type:e,onAbort:t,onEnded:t})})}function Rh({target:e}){return l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"mb-1",children:["Replacing image data of ",e.subframeIndex!==void 0?"subframe":"frame"," at position:"]}),l.jsxs("div",{className:`inline-flex items-center space-x-1.5 font-mono bg-slate-200 px-1.5 py-0.5\r
          rounded`,children:[l.jsxs("span",{children:["Entry #",e.entryIndex+1]}),l.jsx("span",{children:l.jsx(ie.ArrowRight,{size:14})}),l.jsxs("span",{children:["Frame #",e.frameIndex+1]}),e.subframeIndex!==void 0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:l.jsx(ie.ArrowRight,{size:14})}),l.jsxs("span",{children:["Subframe #",e.subframeIndex+1]})]})]})]})}function bP({target:e,frameData:t,onAbort:n,onEnded:r}){const[i,o]=F.useState(!0),a=Mr.useCurrentPalette(),s=Mr.useSetCurrentPalette(),c=Z.useReplaceFrameImageData(),u=Z.useReplaceSubframeImageData(),f=F.useCallback(d=>{const{entryIndex:p,frameIndex:h,subframeIndex:g}=e;g===void 0?c(p,h,d):u(p,h,g,d),r()},[e,r,c,u]);return i?l.jsxs("div",{className:"p-4",children:[l.jsx("div",{className:"mb-4",children:l.jsx(Rh,{target:e})}),l.jsxs("div",{className:"flex justify-between space-x-2",children:[l.jsx(ne,{color:"default",onClick:n,children:"Cancel"}),l.jsx(ne,{color:"success",onClick:()=>o(!1),children:"Next"})]})]}):l.jsx("div",{style:{minWidth:600},children:l.jsx(iE,{replacing:t,currentPalette:a,setCurrentPalette:s,onFinish:f,onAbort:n})})}const fE="px-2 py-1 border border-gray-600",ll=fE,cl=fE;function kP({frameData:e,dimensionMismatch:t,onNext:n}){return l.jsxs("div",{className:"p-4",children:[l.jsx("div",{className:"text-center font-semibold mb-2",children:"Failed to replace image."}),l.jsxs("div",{className:"mb-4",style:{maxWidth:600},children:["When replacing the image data of an individual subformat (1555 or 4444), the dimensions"," ","of the new image must match the dimensions of the old image."]}),l.jsx("div",{className:"flex flex-col items-center mb-4",children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{}),l.jsx("th",{className:cl,children:"Width"}),l.jsx("th",{className:cl,children:"Height"})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("th",{className:cl,children:"Old"}),l.jsx("td",{className:ll,children:e.width}),l.jsx("td",{className:ll,children:e.height})]}),l.jsxs("tr",{children:[l.jsx("th",{className:cl,children:"New"}),l.jsx("td",{className:ll,children:t.width}),l.jsx("td",{className:ll,children:t.height})]})]})]})}),l.jsx("div",{className:"flex justify-center",children:l.jsx(ne,{onClick:n,children:"Close"})})]})}function EP({target:e,onNext:t,onAbort:n}){const[r,i]=F.useState();return l.jsxs("div",{className:"p-4",children:[l.jsx("div",{className:"mb-2",children:l.jsx(Rh,{target:e})}),l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"text-sm font-bold mb-0.5",children:"Select which image data you want to replace:"}),l.jsxs("div",{className:"text-xs font-semibold mb-1",children:["Note that when replacing individual image data (1555 or 4444) the dimensions of the"," ","new image must match the dimensions of the old image.",l.jsx("br",{}),"This is because the image data for both subformats (1555 and 4444) must always be the same.",l.jsx("br",{}),`Of course, you don't have to worry about this if you select the "Both" option.`]}),l.jsxs("ul",{className:"pl-2",children:[l.jsx("li",{className:"py-1",children:l.jsxs("label",{className:"flex items-center space-x-1.5",children:[l.jsx("input",{type:"radio",name:"target",checked:r==="taf_1555",onChange:()=>i("taf_1555")}),l.jsx("span",{children:"1555 image data"})]})}),l.jsx("li",{className:"py-1",children:l.jsxs("label",{className:"flex items-center space-x-1.5",children:[l.jsx("input",{type:"radio",name:"target",checked:r==="taf_4444",onChange:()=>i("taf_4444")}),l.jsx("span",{children:"4444 image data"})]})}),l.jsx("li",{className:"py-1",children:l.jsxs("label",{className:"flex items-center space-x-1.5",children:[l.jsx("input",{type:"radio",name:"target",checked:r==="both",onChange:()=>i("both")}),l.jsx("span",{children:"Both"})]})})]})]}),l.jsxs("div",{className:"flex justify-between space-x-2",children:[l.jsx(ne,{color:"default",onClick:n,children:"Cancel"}),l.jsx(ne,{color:"success",disabled:r===void 0,onClick:()=>{r!==void 0&&t(r)},children:"Next"})]})]})}function SP({target:e,frameData:t,onAbort:n,onEnded:r}){const[i,o]=F.useState(),[a,s]=F.useState(),c=Z.useReplaceFrameImageData(),u=Z.useReplaceSubframeImageData(),f=F.useCallback(p=>{if(i!=="both"){if(p.width!==t.width||p.height!==t.height){s({width:p.width,height:p.height});return}const _=p.layerData;let y;i==="taf_1555"?y={kind:"raw-colors-pair",imageResource1555:_.imageResource,imageResource4444:t.layerData.imageResource4444}:y={kind:"raw-colors-pair",imageResource1555:t.layerData.imageResource1555,imageResource4444:_.imageResource},p={...p,layerData:y}}const{entryIndex:h,frameIndex:g,subframeIndex:w}=e;w===void 0?c(h,g,p):u(h,g,w,p),r()},[e,i,t,r,c,u]);if(a!==void 0)return l.jsx(kP,{frameData:t,dimensionMismatch:a,onNext:n});if(i===void 0)return l.jsx(EP,{target:e,onNext:o,onAbort:n});const d=i==="both"?{kind:"taf-pair"}:{kind:"taf-solo",subFormat:i};return l.jsx("div",{style:{minWidth:600},children:l.jsx(Ru,{replacing:t,target:d,onFinish:f,onAbort:n})})}function _P({target:e,frameData:t,onAbort:n,onEnded:r}){const[i,o]=F.useState(!0),a=Io.useSubFormat(),s=Z.useReplaceFrameImageData(),c=Z.useReplaceSubframeImageData(),u=F.useCallback(f=>{const{entryIndex:d,frameIndex:p,subframeIndex:h}=e;h===void 0?s(d,p,f):c(d,p,h,f),r()},[e,r,s,c]);return i?l.jsxs("div",{className:"p-4",children:[l.jsx("div",{className:"mb-4",children:l.jsx(Rh,{target:e})}),l.jsxs("div",{className:"flex justify-between space-x-2",children:[l.jsx(ne,{color:"default",onClick:n,children:"Cancel"}),l.jsx(ne,{color:"success",onClick:()=>o(!1),children:"Next"})]})]}):l.jsx("div",{style:{minWidth:600},children:l.jsx(Ru,{replacing:t,target:{kind:"taf-solo",subFormat:a},onFinish:u,onAbort:n})})}function dE({target:e,frameData:t,onAbort:n,onEnded:r}){const i=Z.useFormat();return i==="gaf"?l.jsx(bP,{target:e,frameData:t,onAbort:n,onEnded:r}):i==="taf-solo"?l.jsx(_P,{target:e,frameData:t,onAbort:n,onEnded:r}):l.jsx(SP,{target:e,frameData:t,onAbort:n,onEnded:r})}function jP({close:e}){const t=Z.useActiveEntryIndex();return t===null?l.jsx("div",{className:"p-4",children:"No entry selected."}):l.jsx(CP,{close:e,entryIndex:t})}function CP({close:e,entryIndex:t}){const n=Z.useActiveFrameIndex(),r=Z.useActiveFrame();return n===null||r===null?l.jsx("div",{className:"p-4",children:"No frame selected."}):r.frameData.kind==="single"?l.jsx(dE,{target:{entryIndex:t,frameIndex:n},frameData:r.frameData,onAbort:e,onEnded:e}):l.jsx(IP,{close:e,entryIndex:t,frameIndex:n})}function IP({close:e,entryIndex:t,frameIndex:n}){const r=Z.useActiveSubframeIndex(),i=Z.useActiveSubframe();return r===null||i===null?l.jsx("div",{className:"p-4",children:"No subframe selected."}):l.jsx(dE,{target:{entryIndex:t,frameIndex:n,subframeIndex:r},frameData:i,onAbort:e,onEnded:e})}function Ph({label:e,submitLabel:t,cancelLabel:n,min:r,max:i,isFloat:o,defaultValue:a,resolve:s}){const c=F.useRef(null),[u,f]=F.useState(null),d=F.useCallback(()=>{var g;f(null);let p=(g=c.current)==null?void 0:g.value.trim();if(p===void 0||p==="")return;const h=o?parseFloat(p):parseInt(p);if(Number.isNaN(h)){f("Value is not a number");return}if(r!==void 0&&h<r){f(`Value cannot be smaller than: ${r}`);return}if(i!==void 0&&h>i){f(`Value cannot be greater than: ${i}`);return}s(h)},[s,o,r,i]);return l.jsxs("div",{className:"flex flex-col p-4",children:[l.jsx("div",{className:"mb-2",children:e}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(Ww,{inputRef:c,type:"number",defaultValue:a,autoFocus:!0}),l.jsx(ne,{color:"success",onClick:d,children:t??"Submit"}),l.jsx(ne,{color:"default",onClick:()=>s(null),children:n??"Cancel"})]}),l.jsx("div",{className:`${u===null?"invisible":""}`,children:l.jsx("span",{className:"text-red-600 text-xs",children:u??"(No errors)"})})]})}function Nx({target:e,field:t,close:n}){const r=Z.useModifyActiveFrameData(),i=Z.useModifyActiveSubframeData(),o=e==="active-frame"?r:i;return l.jsx("div",{children:l.jsx(Ph,{label:t==="unknown2"?"Unknown2":"Unknown3",resolve:a=>{a!==null&&o({[t]:a}),n()}})})}function AP({applyToAll:e,close:t}){const n=Z.useModifyActiveFrameDuration(),r=Z.useModifyActiveSequenceFrameDuration();return l.jsx("div",{children:l.jsx(Ph,{label:`Frame Duration ${e?"(all frames)":"(active frame)"}`,min:0,resolve:i=>{i!==null&&(e?r(i):n(i)),t()}})})}function NP({close:e}){const[t,n]=F.useState(!0),r=F.useContext(Tw);return F.useEffect(()=>{setTimeout(()=>n(!1),450)},[]),l.jsxs(De,{children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"mb-1",children:"Are you sure want to create a new project?"}),l.jsxs("div",{className:"font-semibold",children:["All unsaved progress will be permanently ",l.jsx("span",{className:"text-red-500",children:"LOST"}),"."]})]}),l.jsxs("div",{className:"flex justify-center space-x-4",children:[l.jsx(ne,{color:"danger",disabled:t,onClick:r.resetWorkspace,children:"New project"}),l.jsx(ne,{color:"default",onClick:e,children:"Cancel"})]})]})}const it=()=>{},Lt=F.createContext({createNewProject:it,openAnyFile:it,exportResult:it,importImages:it,convertToMulti:it,convertToSingle:it,deleteFrame:it,deleteSubframe:it,changeFrameDuration:it,createEntry:it,renameActiveEntry:it,deleteActiveEntry:it,replaceActiveFrameData:it,changeFrameDataUnknown2:it,changeFrameDataUnknown3:it,exportFrameImages:it,exportEveryImage:it});function FP({children:e}){const t=F.useContext(sr),E={createNewProject:()=>{const b=window.open(window.location.href,"_blank");if(b!==null){b.focus();return}const{close:S}=t.pushModal({title:"Create a new project",body:l.jsx(NP,{close:()=>S()})})},openAnyFile:()=>{alert("TODO")},exportResult:()=>{const{close:b}=t.pushModal({title:"Export Wizard",disableBackgroundClose:!0,body:l.jsx(PI,{close:()=>b()})})},importImages:b=>{const{close:S}=t.pushModal({title:"Import Images Wizard",disableBackgroundClose:!0,body:l.jsx(wP,{type:b,close:()=>S()})})},convertToMulti:()=>{const{close:b}=t.pushModal({title:"Convert Selected Frame to Multi-layered",body:l.jsx(dC,{close:()=>b()})})},convertToSingle:()=>{const{close:b}=t.pushModal({title:"Convert Selected Frame to Single-layered",body:l.jsx(pC,{close:()=>b()})})},deleteFrame:()=>{const{close:b}=t.pushModal({title:"Delete Selected Frame",body:l.jsx(mC,{close:()=>b()})})},deleteSubframe:()=>{const{close:b}=t.pushModal({title:"Delete Selected Subframe",body:l.jsx(hC,{close:()=>b()})})},changeFrameDuration:b=>{const S=b?"Change frame duration of every Frame of the active Sequence":"Change frame duration of the active Frame",{close:A}=t.pushModal({title:S,body:l.jsx(AP,{applyToAll:b,close:()=>A()})})},createEntry:()=>{const{close:b}=t.pushModal({title:"Create Sequence",body:l.jsx(vC,{close:()=>b()})})},renameActiveEntry:b=>{const{close:S}=t.pushModal({title:"Rename Sequence",body:l.jsx(xC,{close:()=>S()})})},deleteActiveEntry:()=>{const{close:b}=t.pushModal({title:"Delete Sequence",body:l.jsx(gC,{close:()=>b()})})},replaceActiveFrameData:()=>{const{close:b}=t.pushModal({title:"Replace Active Image Data",body:l.jsx(jP,{close:()=>b()}),disableBackgroundClose:!0})},changeFrameDataUnknown2:b=>{const{close:S}=t.pushModal({title:"Change Unknown2",body:l.jsx(Nx,{target:b,field:"unknown2",close:()=>S()})})},changeFrameDataUnknown3:b=>{const{close:S}=t.pushModal({title:"Change Unknown3",body:l.jsx(Nx,{target:b,field:"unknown3",close:()=>S()})})},exportEveryImage:()=>{const{close:b}=t.pushModal({title:"Export every image",body:l.jsx(ZI,{onAbort:()=>b()})})},exportFrameImages:b=>{const{close:S}=t.pushModal({title:`Export ${b===void 0?"frames":"subframes"}`,body:l.jsx(YI,{frameIndex:b,onAbort:()=>S()}),disableBackgroundClose:!0})}};return l.jsx(Lt.Provider,{value:E,children:e})}const Xp=F.createContext(null);function ms({file:e,setFile:t,disabled:n,accept:r,onRemove:i}){return l.jsxs("div",{className:"flex justify-center items-center space-x-1",children:[l.jsx("div",{className:"grow",children:l.jsx(xp,{currentFile:e,onChoose:t,className:F.useCallback(RP,[]),disabled:n,accept:r})}),i&&e!==void 0&&l.jsx("div",{className:`flex justify-center items-center leading-none ${e===void 0?"invisible":""}`,children:l.jsx(oE,{icon:ie.Delete,size:30,onClick:i,disabled:e===void 0})})]})}const TP="min-w-[260px] flex justify-center items-center bg-slate-200 border border-dashed p-4";function RP(e){let t=TP;return e.hasFile?t+=" font-semibold border-emerald-500 text-emerald-600":t+=" font-normal border-slate-400 text-slate-500",e.disabled?t+=" opacity-50":t+=" cursor-pointer hover:bg-blue-100 hover:text-sky-500 transition-colors",t}function Dh({format:e,error:t,close:n}){const r=e==="gaf"?"GAF":"TAF";let i,o,a,s;if(t.kind==="error-reading-gaf")i=`Failed to parse the file provided. Are you sure this is a valid ${r} file?`,t.message!==void 0&&(o=t.message),a=Fx(t.error);else if(t.kind==="invalid-format")if(i="Invalid file format.",t.detectedFormat.mainFormat==="gaf")o=`Expected a ${r} file but got a GAF file.`;else if(e==="gaf")o="Expected a GAF file but got a TAF file.";else if(e==="taf-pair"){const c=t.detectedFormat.subFormat==="taf_1555"?"_4444":"_1555",u=t.detectedFormat.subFormat==="taf_1555"?"_1555":"_4444";o=`Expected a ${c} file but got a ${u} file.`}else o=`Didn't expect a ${t.detectedFormat.subFormat??t.detectedFormat.mainFormat} file.`;else t.kind==="tafs-out-of-sync"?(i="The TAFs provided are not compatible with each other.",o=t.error.message,s=l.jsx(PP,{error:t.error})):(i=t.message??"Unknown error.",a=Fx(t.error));return l.jsx(De,{children:l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[l.jsx("div",{className:"text-lg font-semibold",children:i}),o!==void 0&&l.jsx("div",{children:o}),a!==void 0&&l.jsx("div",{className:`text-sm text-slate-700 bg-slate-100 border border-slate-200 font-mono\r
              px-1 py-0.5`,style:{maxWidth:"50vw"},children:a}),s]})})}function Fx(e){if(e!==null&&typeof e=="object"&&"message"in e&&typeof e.message=="string")return e.message}const ul="px-1.5 py-0.5 font-mono",fl="px-1.5 py-0.5 font-semibold text-right";function PP({error:e}){return l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"text-center mb-4",children:"Here's where the difference occurred:"}),l.jsx("table",{children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("th",{className:fl,children:"Path:"}),l.jsx("td",{className:ul,children:e.path&&l.jsx("div",{className:"flex flex-wrap items-center -mb-1",style:{maxWidth:"50vw"},children:e.path.map((t,n,r)=>l.jsxs("div",{className:"flex items-center text-sm mb-1",children:[l.jsxs("div",{className:"bg-slate-100 border border-slate-300 px-1.5 py-0.5 rounded mr-1.5",children:[l.jsx("span",{children:t.name})," ",l.jsxs("span",{title:"1-indexed",children:["#",t.pos+1]})]}),n<r.length-1&&l.jsx("div",{className:"mr-1.5",children:l.jsx(ie.ArrowRight,{className:"text-slate-300",size:18})})]},n))})})]}),l.jsxs("tr",{children:[l.jsx("th",{className:fl,children:"Property:"}),l.jsx("td",{className:ul,children:e.valueName})]}),l.jsxs("tr",{children:[l.jsx("th",{className:fl,children:"Value 1555:"}),l.jsx("td",{className:ul,children:e.value1555})]}),l.jsxs("tr",{children:[l.jsx("th",{className:fl,children:"Value 4444:"}),l.jsx("td",{className:ul,children:e.value4444})]})]})})]})}var mi;(e=>{function t(s){return"0x"+s.toString(16).toUpperCase()}e.hex=t;function n(s){const c=s.split(".");return c[c.length-1]}e.getFileExtension=n;function r(s,c){return o(s)??i(c)}e.detectFormatFromResultOrFileName=r;function i(s){const c=s.split("."),u=c[0],f=c[c.length-1];return f==="gaf"?{mainFormat:"gaf"}:f!=="taf"?null:u.endsWith("_1555")?{mainFormat:"taf",subFormat:"taf_1555"}:u.endsWith("_4444")?{mainFormat:"taf",subFormat:"taf_4444"}:null}e.detectFormatFromFileName=i;function o(s){for(const c of s.entries)for(const u of c.frames){const f=a(u.frameData);if(f!==null)return f}return null}e.detectFormatFromResult=o;function a(s){if(s.kind==="single")return s.layerData.kind==="palette-idx"?{mainFormat:"gaf"}:{mainFormat:"taf",subFormat:s.layerData.colorData.format==="argb1555"?"taf_1555":"taf_4444"};for(const c of s.layers){const u=a(c);if(u!==null)return u}return null}})(mi||(mi={}));class pE{makeEntries(t){return t.map(n=>({key:Symbol(),name:n.name,unknown1:n.unknown1,unknown2:n.unknown2,frames:this.makeFrames(n.frames)}))}makeFrames(t){return t.map(n=>{const r=n.frameData;return{key:Symbol(),duration:n.duration,frameData:r.kind==="single"?this.makeFrameDataSingle(r):this.makeFrameDataMulti(r)}})}makeFrameDataSingle(t){const n=yn.makeBaseFrameData(t);return{...n,kind:"single",layerData:this.makeLayerData(t.layerData,n)}}makeFrameDataMulti(t){return{...yn.makeBaseFrameData(t),kind:"multi",layers:t.layers.map(n=>this.makeFrameDataSingle(n))}}}class DP extends pE{constructor(t,n){super(),this.palette=t,this.imageCompiler=n}makeVirtualGaf(t){return{entries:this.makeEntries(t.entries)}}makeLayerData(t,{width:n,height:r,transparencyIndex:i}){const o=Ot.createColorData(n,r,i,t.indices,this.palette),a=this.imageCompiler.compileImage(n,r,o);return{kind:"palette-idx",compress:t.decompressed,imageResource:{kind:"paletted",paletteIndices:t.indices,compiledImage:a}}}}class MP{compareObjs(t,n,r){const i=t[r],o=n[r];return i===o?null:{valueName:r+"",value1555:i+"",value4444:o+""}}compareEntries(t,n){const r=this.compareObjs(t,n,"name");if(r!==null)return{kind:"err",err:r};const i=this.compareObjs(t,n,"unknown1");if(i!==null)return{kind:"err",err:i};const o=this.compareObjs(t,n,"unknown2");return o!==null?{kind:"err",err:o}:{kind:"ok",ok:null}}compareFrames(t,n){const r=this.compareObjs(t,n,"duration");return r!==null?{kind:"err",err:r}:{kind:"ok",ok:null}}compareBaseFrameDatas(t,n){const r=["width","height","xOffset","yOffset","transparencyIndex","unknown2","unknown3"];for(const i of r){const o=this.compareObjs(t,n,i);if(o!==null)return{kind:"err",err:o}}return{kind:"ok",ok:null}}}class OP{constructor(t){Xo(this,"comparator");this.imageCompiler=t,this.comparator=new MP}makeVirtualGaf(t,n){const r=this.makeEntries(t.entries,n.entries);return r.kind==="err"?r:{kind:"ok",ok:{virtualGaf:{entries:r.ok}}}}makeEntries(t,n){if(t.length!==n.length)return{kind:"err",err:{valueName:"Number of sequences",value1555:t.length,value4444:n.length}};const r=[];for(let i=0;i<t.length;i++){const o=t[i],a=n[i],s=[{name:"Entry",pos:i}],c=this.comparator.compareEntries(o,a);if(c.kind==="err")return{kind:"err",err:{...c.err,path:s}};const u=this.makeFrames(o.frames,a.frames,s);if(u.kind==="err")return u;r.push({name:o.name,unknown1:o.unknown1,unknown2:a.unknown2,frames:u.ok})}return{kind:"ok",ok:r}}makeFrames(t,n,r){if(t.length!==n.length)return{kind:"err",err:{valueName:"Number of frames",value1555:t.length,value4444:n.length,path:r}};const i=[];for(let o=0;o<t.length;o++){const a=t[o],s=n[o],c=[...r,{name:"Frame",pos:o}],u=this.comparator.compareFrames(a,s);if(u.kind==="err")return{kind:"err",err:{...u.err,path:c}};const f=this.makeFrameData(a.frameData,s.frameData,c);if(f.kind==="err")return f;i.push({duration:a.duration,frameData:f.ok})}return{kind:"ok",ok:i}}makeFrameData(t,n,r){return t.kind==="single"?n.kind!=="single"?{kind:"err",err:{valueName:"Kind of frameData",value1555:"Single",value4444:"Multi",path:r}}:this.makeFrameDataSingle(t,n,r):n.kind!=="multi"?{kind:"err",err:{valueName:"Kind of frameData",value1555:"Multi",value4444:"Single",path:r}}:this.makeFrameDataMulti(t,n,r)}makeFrameDataSingle(t,n,r){const i=this.comparator.compareBaseFrameDatas(t,n);if(i.kind==="err")return{kind:"err",err:{...i.err,path:r}};t.layerData,n.layerData;const o=this.compileImageResource(t,"argb1555"),a=this.compileImageResource(n,"argb4444");return{kind:"ok",ok:{...yn.makeBaseFrameData(t),kind:"single",layerData:{kind:"raw-colors-pair",imageResource1555:o,imageResource4444:a}}}}makeFrameDataMulti(t,n,r){const i=this.comparator.compareBaseFrameDatas(t,n);if(i.kind==="err")return{kind:"err",err:{...i.err,path:r}};if(t.layers.length!==n.layers.length)return{kind:"err",err:{valueName:"Number of subframes",value1555:t.layers.length,value4444:n.layers.length,path:r}};const o=[];for(let s=0;s<t.layers.length;s++){const c=t.layers[s],u=n.layers[s],f=[...r,{name:"Subframe",pos:s}],d=this.makeFrameDataSingle(c,u,f);if(d.kind==="err")return d;o.push(d.ok)}return{kind:"ok",ok:{...yn.makeBaseFrameData(t),kind:"multi",layers:o}}}compileImageResource(t,n){const r=t.layerData.colorData,{width:i,height:o}=t;if(!yn.isFormat(r,n))throw new Error(`Invalid color data format. Expected: "${n}". Got: "${r.format}".`);return{kind:"colored",compiledImage:yn.compileTafImage(r,i,o,this.imageCompiler),colorData:r}}}class LP extends pE{constructor(t){super(),this.imageCompiler=t}makeVirtualGaf(t){return{entries:this.makeEntries(t.entries)}}makeLayerData(t,{width:n,height:r}){const i=t.colorData;return{kind:"raw-colors",imageResource:{kind:"colored",compiledImage:yn.compileTafImage(t.colorData,n,r,this.imageCompiler),colorData:i}}}}var ji;(e=>{const t=new Wo;function n(u){return{kind:"success",configWrapper:{format:"gaf",config:{initialGaf:{kind:"blank",format:"gaf",compiledGaf:null,virtualGaf:{entries:[]}},initialPalette:u}}}}e.initBlankGaf=n;function r(){return{kind:"success",configWrapper:{format:"taf-pair",config:{initialGaf:{kind:"blank",format:"taf-pair",compiledGafs:null,virtualGaf:{entries:[]}}}}}}e.initBlankTafPair=r;async function i(u,f){const d=await u.arrayBuffer(),p=new Uint8Array(d);let h;try{h=await c(p)}catch(x){return{kind:"error-reading-gaf",error:x}}const g=mi.detectFormatFromResultOrFileName(h.gaf,u.name);if(g!==null&&g.mainFormat!=="gaf")return{kind:"invalid-format",detectedFormat:g};const _=new DP(f.palette,t).makeVirtualGaf(h.gaf);return{kind:"success",configWrapper:{format:"gaf",config:{initialGaf:{kind:"from-file-single",fileName:u.name,fileData:p,originalGaf:h,format:"gaf",virtualGaf:_,compiledGaf:h.gaf},initialPalette:f}}}}e.initFromFileGaf=i;async function o(u,f){const d=await u.arrayBuffer(),p=new Uint8Array(d);let h;try{h=await c(p)}catch(E){return{kind:"error-reading-gaf",error:E}}const g=mi.detectFormatFromResultOrFileName(h.gaf,u.name);let w;if(g!==null){if(g.mainFormat!=="taf")return{kind:"invalid-format",detectedFormat:g};if(f!==void 0&&g.subFormat!==f)return{kind:"invalid-format",detectedFormat:g};w=g.subFormat}else{if(f===void 0)return{kind:"error-other",message:"Couldn't detect whether the file provided is a _1555 or _4444 taf file."};w=f}const y=new LP(t).makeVirtualGaf(h.gaf);return{kind:"success",configWrapper:{format:"taf-solo",config:{initialGaf:{kind:"from-file-single",fileName:u.name,fileData:p,originalGaf:h,format:"taf-solo",virtualGaf:y,compiledGaf:h.gaf},subFormat:w}}}}e.initFromFileTafSolo=o;async function a(u,f){const d=await s(u,"taf_1555");if(d.kind==="err")return d.err;const p=await s(f,"taf_4444");if(p.kind==="err")return p.err;const{fileData:h,gafResult:g}=d.ok,{fileData:w,gafResult:_}=p.ok,x=new OP(t).makeVirtualGaf(g.gaf,_.gaf);if(x.kind==="err")return{kind:"tafs-out-of-sync",error:x.err};const E=x.ok.virtualGaf;return{kind:"success",configWrapper:{format:"taf-pair",config:{initialGaf:{kind:"from-file-pair",data1555:{fileName:u.name,fileData:h,originalGaf:g},data4444:{fileName:f.name,fileData:w,originalGaf:_},format:"taf-pair",virtualGaf:E,compiledGafs:{taf1555:g.gaf,taf4444:_.gaf}}}}}}e.initFromFileTafPair=a;async function s(u,f){const d=await u.arrayBuffer(),p=new Uint8Array(d);let h;try{h=await c(p)}catch(w){return{kind:"err",err:{kind:"error-reading-gaf",which:f,message:`Error reading the ${f} file.`,error:w}}}const g=mi.detectFormatFromResultOrFileName(h.gaf,u.name);return g!==null&&(g.mainFormat!=="taf"||g.subFormat!==f)?{kind:"err",err:{kind:"invalid-format",which:f,detectedFormat:g}}:{kind:"ok",ok:{fileData:p,gafResult:h}}}async function c(u){try{return kt.Reader.readFromBuffer(u)}catch(f){throw console.error(f),f}}})(ji||(ji={}));function BP({isLoading:e,onInit:t,close:n}){const[r,i]=F.useState(!1),o=F.useContext(sr),a=F.useCallback(c=>{if(e)return;ji.initFromFileTafSolo(c,void 0).then(f=>{if(f.kind==="success"){t(f.configWrapper);return}const{close:d}=o.pushModal({title:"Error when initializing individual TAF",titleColor:"error",body:l.jsx(Dh,{format:"taf-solo",error:f,close:()=>d()})})}).catch(f=>{console.error(f),alert("Errored when loading taf.")})},[e,t,o]),s=r?l.jsx("div",{children:l.jsx(ms,{setFile:a,disabled:e,accept:".taf"})}):l.jsx(ne,{color:"danger",onClick:()=>i(!0),children:"I understand"});return l.jsx(De,{children:l.jsxs("div",{className:"flex flex-col",children:[l.jsx("div",{className:"self-stretch flex justify-center mb-2",children:l.jsx(ie.Warning,{className:"text-red-400",size:64})}),l.jsxs("div",{className:"mb-4 text-center",children:[l.jsx("p",{children:"Warning! Avoid using this option unless you know what you are doing."}),l.jsxs("p",{children:["Editing an individual TAF on its own might cause it to become ",l.jsx("b",{children:"out of sync"})," with its pair,",l.jsx("br",{}),"which would potentially render it unusable."]})]}),l.jsxs("div",{className:"flex justify-center space-x-2",children:[s,l.jsx(ne,{onClick:n,children:"Cancel"})]})]})})}function $P({isLoading:e,onInit:t,paletteStore:n}){const[r,i]=F.useState(!1),o=F.useContext(sr),a=F.useCallback(()=>{const u=ji.initBlankGaf(n.default);t(u.configWrapper)},[t,n]),s=F.useCallback(()=>{const u=ji.initBlankTafPair();t(u.configWrapper)},[t]),c=F.useCallback(()=>{if(e)return;const{close:u}=o.pushModal({title:"Loading individual TAF",body:l.jsx(BP,{isLoading:e,onInit:t,close:()=>u()})})},[o,e,t]);return l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"text-xs",children:l.jsx(Pe,{label:r?"Hide advanced":"Show advanced",onClick:()=>i(!r)})}),r&&l.jsxs("div",{className:"mt-0.5 border border-gray-400 rounded-sm text-xs",children:[l.jsx("div",{className:"bg-gray-400 text-center px-2 py-1 border-b border-gray-400",children:l.jsx("span",{className:"text-white font-semibold",children:"Advanced Options"})}),l.jsxs("div",{className:"flex flex-col items-start space-y-2 px-2 py-2",children:[l.jsx(Pe,{label:"Create empty GAF",onClick:a}),l.jsx(Pe,{label:"Create empty TAFs",onClick:s}),l.jsx(Pe,{label:"Load invidual TAF",onClick:c})]})]})]})}function UP(){return l.jsx("div",{className:"text-xs",children:l.jsx(Pe,{label:"Download for offline use",onClick:()=>alert("Coming soon!")})})}function zP(){return l.jsxs("div",{className:"flex flex-col p-4",children:[l.jsx("div",{className:"text-6xl text-slate-400 mb-1",children:"Gaf Studio Web"}),l.jsxs("div",{className:"text-right text-xs text-slate-400 font-bold",children:["v",_u.version]})]})}function GP(){return l.jsxs("div",{className:"flex justify-center m-6 relative",children:[l.jsx("div",{className:"border-r border-dotted border-slate-500"}),l.jsx("div",{className:"absolute inset-0 flex flex-col justify-center items-center",children:l.jsx("span",{className:`bg-gray-300 text-slate-400 leading-none font-semibold pt-1 pb-1.5\r
            select-none`,children:"OR"})})]})}function mE(){return l.jsx("div",{className:"text-center text-slate-400 my-4",children:l.jsx(ie.ArrowDown,{})})}function hE({children:e}){return l.jsx("div",{className:"text-3xl mb-2 text-slate-500 font-bold",children:e})}function vE(){return l.jsx("div",{className:"text-center text-slate-400 my-4",children:l.jsx(ie.Plus,{})})}function Gc({label:e,status:t}){const n=t==="ok"?"text-green-600":t==="err"?"text-red-600":"text-slate-400",r=t==="ok"?ie.CircleCheck:t==="err"?ie.CircleX:ie.CircleDot;return l.jsxs("div",{className:`${n} flex items-center font-semibold text-lg mb-2`,children:[l.jsx(r,{className:"mr-1.5",size:24}),l.jsx("span",{children:e})]})}function gE({children:e}){return l.jsx("div",{className:"text-slate-500 text-sm mb-4",children:e})}function WP({preSelectables:e,currentValue:t,setCurrentValue:n,isValid:r,isLoading:i}){return l.jsx(Cu,{options:e.map(o=>({id:o.key,label:o.label})),value:t,onChange:n,disabled:!r||i})}function HP({isLoading:e,setIsLoading:t,paletteStore:n,palMode:r,setPalMode:i,currentPal:o,setCurrentPal:a}){const[s,c]=F.useState(n.preSelectables[0]),[u,f]=F.useState(),d=F.useCallback(g=>{if(e)return;const w=n.preSelectables.find(_=>_.key===g);c(w),t(!0),n.loadPreSelectable(g).then(_=>{a({kind:"ok",ok:_})}).catch(_=>{console.error(_),a({kind:"err",err:`Error when trying to load pre-selectable palette: ${w.key}`})}).finally(()=>t(!1))},[e,t,n,a]),p=F.useCallback(g=>{t(!0),Ot.loadFromPcxFile(g).then(w=>{const _=Ot.compilePreviewImage(w);f(g),i("user-file"),a({kind:"ok",ok:{kind:"custom-file",originFile:g,palette:w,previewImage:_}})}).catch(w=>{console.error(w),a({kind:"err",err:`Error when trying to load palette from file: ${g.name}`})}).finally(()=>t(!1))},[a,t,i]),h=F.useCallback(()=>{i("pre-selectable"),f(void 0),a({kind:"ok",ok:n.default}),c(n.preSelectables[0])},[n,a,i]);return l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-center text-xs text-slate-600 font-semibold mb-0.5",children:"Built-in palettes"}),l.jsx(WP,{preSelectables:n.preSelectables,currentValue:s.key,setCurrentValue:d,isValid:r==="pre-selectable",isLoading:e})]}),l.jsx("div",{className:"text-center text-slate-500 text-sm",children:"or"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-center text-xs text-slate-600 font-semibold mb-0.5",children:"Select .pcx file"}),l.jsx(ms,{file:u,setFile:p,disabled:e,accept:".pcx",onRemove:h})]})]})}function VP({isLoading:e,setIsLoading:t,onInit:n,paletteStore:r}){const[i,o]=F.useState(),[a,s]=F.useState("pre-selectable"),[c,u]=F.useState({kind:"ok",ok:r.default}),f=F.useContext(sr),d=F.useCallback(()=>{e||i===void 0||c===void 0||c.kind!=="ok"||(t(!0),ji.initFromFileGaf(i,c.ok).then(h=>{if(h.kind==="success"){n(h.configWrapper);return}const{close:g}=f.pushModal({title:"Error when initializing GAF",titleColor:"error",body:l.jsx(Dh,{format:"gaf",error:h,close:()=>g()})});t(!1)}).catch(h=>{console.error(h),alert("Errored when loading gaf.")}))},[i,c,n,e,t,f]);let p="empty";return c!==void 0&&(p=c.kind),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(hE,{children:"GAF Mode"}),l.jsx(gE,{children:"Select a GAF file and the palette that it will use."}),l.jsx(Gc,{label:"Choose .gaf file",status:i===void 0?"empty":"ok"}),l.jsx(ms,{file:i,setFile:o,accept:".gaf"}),l.jsx(vE,{}),l.jsx(Gc,{label:"Choose palette",status:p}),l.jsx(HP,{isLoading:e,setIsLoading:t,paletteStore:r,palMode:a,setPalMode:s,currentPal:c,setCurrentPal:u}),l.jsx(mE,{}),l.jsx(ne,{disabled:e||i===void 0||p!=="ok",onClick:d,children:"Import"})]})}function KP({isLoading:e,setIsLoading:t,onInit:n}){const[r,i]=F.useState(),[o,a]=F.useState(),[s,c]=F.useState(!1),[u,f]=F.useState(!1),d=F.useContext(sr),p=F.useCallback(()=>{e||r===void 0||o===void 0||(c(!1),f(!1),ji.initFromFileTafPair(r,o).then(w=>{if(w.kind==="success"){n(w.configWrapper);return}const{close:_}=d.pushModal({title:"Error when initializing TAF Pair",titleColor:"error",body:l.jsx(Dh,{format:"taf-pair",error:w,close:()=>_()})});"which"in w&&w.which!==void 0&&(w.which==="taf_1555"&&c(!0),w.which==="taf_4444"&&f(!0)),t(!1)}).catch(w=>{console.error(w),alert("Errored when loading tafs.")}))},[e,r,o,n,d,t]),h=r===void 0?"empty":s?"err":"ok",g=o===void 0?"empty":u?"err":"ok";return l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(hE,{children:"TAF Mode"}),l.jsx(gE,{children:"Select a pair of matching TAF files."}),l.jsx(Gc,{label:"Choose _1555.taf file",status:h}),l.jsx(ms,{file:r,setFile:w=>{c(!1),i(w)},accept:".taf"}),l.jsx(vE,{}),l.jsx(Gc,{label:"Choose _4444.taf file",status:g}),l.jsx(ms,{file:o,setFile:w=>{f(!1),a(w)},accept:".taf"}),l.jsx(mE,{}),l.jsx(ne,{disabled:e||r===void 0||o===void 0,onClick:p,children:"Import"})]})}function xE({children:e}){return l.jsx("div",{className:`w-screen h-screen overflow-hidden flex flex-col justify-start items-stretch\r
        bg-white text-slate-800`,children:e})}function ZP({onInit:e}){const[t,n]=F.useState(!1),[r,i]=F.useState(!1),o=F.useContext(Xp);return o===null?"No palette store provided.":l.jsx(xE,{children:l.jsx("div",{className:"grow flex flex-col overflow-auto bg-gray-300 p-4",children:l.jsxs("div",{className:"flex flex-col justify-center items-center",children:[l.jsx("div",{className:"mb-2",children:l.jsx(zP,{})}),l.jsxs("div",{className:"grid mb-10",style:{gridTemplateColumns:"1fr auto 1fr"},children:[l.jsx("div",{className:"m-10",style:{minWidth:"20vw"},children:l.jsx(VP,{isLoading:t||r,setIsLoading:n,onInit:e,paletteStore:o})}),l.jsx(GP,{}),l.jsx("div",{className:"m-10",style:{minWidth:"20vw"},children:l.jsx(KP,{isLoading:t||r,setIsLoading:i,onInit:e})})]}),l.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[l.jsx($P,{isLoading:t||r,onInit:e,paletteStore:o}),l.jsx(UP,{})]})]})})})}function hs({value:e,setValue:t,min:n,max:r}){const i=F.useCallback(()=>{if(t===void 0)return;if(e===null){r!==void 0&&t(r);return}const a=e-1;n!==void 0&&a<n||t(a)},[n,r,e,t]),o=F.useCallback(()=>{if(t===void 0)return;if(e===null){n!==void 0&&t(n);return}const a=e+1;r!==void 0&&a>r||t(a)},[n,r,e,t]);return l.jsxs("div",{className:"inline-flex items-center space-x-0.5",children:[l.jsx(Ei,{icon:"-",onClick:t?i:void 0}),l.jsx(pb,{value:e,setValue:t,min:n,max:r}),l.jsx(Ei,{icon:"+",onClick:t?o:void 0})]})}function qP(){const e=Z.useShallowActiveEntryProps(),t=Z.useActiveFrameIndex(),n=Z.useSetActiveFrameIndex();if(e===null)return l.jsx("div",{className:"text-center text-gray-400 bg-white p-2",children:"(No sequence selected)"});const r=e.framesLength>0;return l.jsxs("div",{className:`grow flex flex-col items-center overflow-y-auto overflow-x-hidden bg-white\r
        space-y-2 px-4 py-2`,children:[l.jsxs("div",{className:"flex flex-col text-center",children:[l.jsx("div",{className:"font-bold text-gray-700",children:"Sequence selected:"}),l.jsx("div",{className:"whitespace-nowrap overflow-auto font-mono",children:e.name})]}),l.jsx("div",{className:"self-center border-b border-dotted border-slate-500 w-1/2"}),l.jsxs("div",{className:"flex flex-col space-y-1",children:[l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("div",{children:"Unknown1:"}),l.jsxs("div",{className:"grow font-mono",children:["",e.unknown1," (",mi.hex(e.unknown1),")"]})]}),l.jsxs("div",{className:"flex items-baseline",children:[l.jsx("div",{children:"Unknown2:"}),l.jsxs("div",{className:"grow font-mono",children:["",e.unknown2," (",mi.hex(e.unknown2),")"]})]})]}),l.jsx("div",{className:"self-center border-b border-dotted border-slate-500 w-1/2"}),r&&l.jsxs("div",{className:"flex items-center space-x-2 border-dashed border-gray-300 rounded-sm",children:[l.jsx("div",{className:"truncate",children:"Selected frame:"}),l.jsxs("div",{className:"flex items-center whitespace-nowrap",children:[l.jsx(hs,{value:t!==null?t+1:null,setValue:i=>n(i-1),min:1,max:e.framesLength}),l.jsxs("span",{className:"font-mono",children:["/",e.framesLength]})]})]})]})}const Zr="w-1/2 text-left px-1 py-1 text-gray-700 whitespace-nowrap",qr="w-1/2 text-left px-1 py-1 font-mono";function yE({frameData:e,isSubframe:t,isGaf:n,modify:r,collapsed:i,onToggle:o}){const{changeFrameDataUnknown2:a,changeFrameDataUnknown3:s}=F.useContext(Lt),c=He(p=>p.enableUnknownEditing),u=p=>{r({xOffset:p,yOffset:e.yOffset})},f=p=>{r({xOffset:e.xOffset,yOffset:p})},d=i!==void 0&&i?"hidden":"";return l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsxs("div",{className:"text-base text-center font-bold text-gray-700",children:[t?"Subframe Data":"Frame Data",i!==void 0&&o!==void 0&&l.jsx("div",{className:"text-xs",children:l.jsx(Pe,{label:i?"Expand":"Collapse",onClick:o})})]}),l.jsx("table",{className:d,children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("th",{className:Zr,children:"Width:"}),l.jsx("td",{className:qr,children:e.width})]}),l.jsxs("tr",{children:[l.jsx("th",{className:Zr,children:"Height:"}),l.jsx("td",{className:qr,children:e.height})]}),l.jsxs("tr",{children:[l.jsx("th",{className:Zr,children:"X offset:"}),l.jsx("td",{className:qr,children:l.jsx(hs,{value:e.xOffset,setValue:u,min:on.MIN_I32,max:on.MAX_I32})})]}),l.jsxs("tr",{children:[l.jsx("th",{className:Zr,children:"Y offset:"}),l.jsx("td",{className:qr,children:l.jsx(hs,{value:e.yOffset,setValue:f,min:on.MIN_I32,max:on.MAX_I32})})]}),l.jsxs("tr",{children:[l.jsx("th",{className:Zr,children:"Unknown2:"}),l.jsx("td",{className:qr,children:l.jsxs("div",{className:"flex items-center space-x-1.5",children:[l.jsx("span",{children:e.unknown2}),c&&l.jsx(Ei,{icon:l.jsx(ie.Edit,{size:14}),onClick:()=>{a(t?"active-subframe":"active-frame")}})]})})]}),l.jsxs("tr",{children:[l.jsx("th",{className:Zr,children:"Unknown3:"}),l.jsx("td",{className:qr,children:l.jsxs("div",{className:"flex items-center space-x-1.5",children:[l.jsx("span",{children:e.unknown3}),c&&l.jsx(Ei,{icon:l.jsx(ie.Edit,{size:14}),onClick:()=>{s(t?"active-subframe":"active-frame")}})]})})]}),n&&l.jsxs("tr",{children:[l.jsx("th",{className:Zr,title:"Transparency Index",children:"Transp. idx:"}),l.jsx("td",{className:qr,children:e.transparencyIndex})]})]})})]})}function YP(){const e=Z.useGafFormat(),t=Z.useShallowActiveFrameDataProps(),n=Z.useModifyActiveFrameData(),r=He(c=>c.showMultiFrameFrameData),i=He(c=>c.actions.setShowMultiFrameFrameData);if(t===null)throw new Error("Can't use this component when there's no active frame.");const o=t.kind,a=o==="single"?void 0:!r,s=o==="single"?void 0:()=>i(!r);return l.jsx(yE,{frameData:t,isSubframe:!1,isGaf:e==="gaf",modify:n,collapsed:a,onToggle:s})}function XP(){const e=Z.useActiveFrameDuration(),{changeFrameDuration:t}=F.useContext(Lt);if(e===null)throw new Error("Can't use this component when there's no active frame.");return l.jsxs("div",{className:"flex justify-center items-center mx-2",children:[l.jsxs("div",{className:"self-center flex items-baseline mr-1.5",children:[l.jsx("div",{children:"Frame duration:"}),l.jsxs("div",{className:"grow font-mono",children:["",e]})]}),l.jsx(Ei,{icon:l.jsx(ie.Edit,{size:14}),onClick:()=>t(!1)})]})}function QP(){const e=Z.useActiveFrameLayersLength(),t=Z.useActiveSubframeIndex(),n=Z.useSetActiveSubframeIndex(),r=e>0;return l.jsxs("div",{className:"mt-2 flex items-center space-x-2 border-dashed border-gray-300 rounded-sm",children:[l.jsx("div",{className:"truncate",children:"Selected subframe:"}),r?l.jsxs("div",{className:"flex items-center whitespace-nowrap",children:[l.jsx(hs,{value:t!==null?t+1:null,setValue:i=>n(i-1),min:1,max:e}),l.jsxs("span",{className:"font-mono",children:["/",e]})]}):l.jsx("div",{className:"whitespace-nowrap text-gray-400",children:"No subframes"})]})}function JP(){const e=Z.useActiveFrameIndex(),t=Z.useHasActiveFrameMulti();return e===null?l.jsx("div",{className:"grow text-center text-gray-400 bg-white p-2",children:"(No frame selected)"}):l.jsxs("div",{className:`grow flex flex-col items-center overflow-y-auto overflow-x-hidden bg-white\r
        space-y-2 px-4 py-2`,children:[l.jsx(XP,{}),l.jsx("div",{className:"self-center border-b border-dotted border-slate-500 w-1/2"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx(YP,{}),t&&l.jsx(QP,{})]})]})}function eD(){const e=Z.useGafFormat(),t=Z.useShallowActiveSubframeDataProps(),n=Z.useModifyActiveSubframeData();return t===null?l.jsx("div",{className:"grow text-center text-gray-400 bg-white p-2",children:"(No subframe selected)"}):l.jsx("div",{className:"grow flex flex-col overflow-y-auto overflow-x-hidden bg-white px-4 py-2",children:l.jsx(yE,{frameData:t,isSubframe:!0,isGaf:e==="gaf",modify:n})})}function Ul({children:e,expanded:t,setExpanded:n}){const r=t?"border-slate-400":"border-slate-300";return l.jsxs("button",{className:`flex items-center border ${r} p-1 bg-gradient-to-br from-slate-50 to-slate-200 text-slate-600 hover:border-slate-400 hover:text-slate-700 transition-colors`,onClick:()=>n(!t),children:[t?l.jsx(ie.CaretDown,{className:"invisible"}):l.jsx(ie.CaretUp,{className:"invisible"}),l.jsx("div",{className:"grow font-bold truncate text-sm",children:e}),t?l.jsx(ie.CaretDown,{}):l.jsx(ie.CaretUp,{})]})}function As({children:e}){return l.jsx("div",{className:"h-full flex flex-col overflow-hidden bg-slate-200 border-8 border-slate-200 box-border",children:e})}function tD(){const[e,t]=F.useState(!0),[n,r]=F.useState(!0),[i,o]=F.useState(!0),a=Z.useHasActiveEntry(),s=Z.useHasActiveFrameMulti();return l.jsx(As,{children:l.jsx("div",{className:"grow flex flex-col overflow-hidden",children:l.jsxs("div",{className:"h-full grow flex flex-col overflow-hidden text-sm space-y-2",children:[l.jsxs("div",{className:"flex flex-col overflow-hidden",children:[l.jsx(Ul,{expanded:e,setExpanded:t,children:"Sequence Control"}),e&&l.jsx(qP,{})]}),l.jsxs("div",{className:"flex flex-col overflow-hidden",children:[l.jsx(Ul,{expanded:n,setExpanded:r,children:"Frame Control"}),a&&n&&l.jsx(JP,{})]}),s&&l.jsxs("div",{className:"flex flex-col overflow-hidden",children:[l.jsx(Ul,{expanded:i,setExpanded:o,children:"Subframe Control"}),i&&l.jsx(eD,{})]})]})})})}var Ye={BASE_URL:"/gaf-studio-web",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let nD=0;function zl(e,t){const n=`atom${++nD}`,r={toString:()=>n};return typeof e=="function"?r.read=e:(r.init=e,r.read=rD,r.write=iD),t&&(r.write=t),r}function rD(e){return e(this)}function iD(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const ad=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,sd=e=>"init"in e,ld=e=>!!e.write,Wc=new WeakMap,oD=(e,t)=>{Wc.set(e,t),e.catch(()=>{}).finally(()=>Wc.delete(e))},Tx=(e,t)=>{const n=Wc.get(e);n&&(Wc.delete(e),n(t))},Rx=(e,t)=>{e.status="fulfilled",e.value=t},Px=(e,t)=>{e.status="rejected",e.reason=t},aD=e=>typeof(e==null?void 0:e.then)=="function",ua=(e,t)=>!!e&&"v"in e&&"v"in t&&Object.is(e.v,t.v),Dx=(e,t)=>!!e&&"e"in e&&"e"in t&&Object.is(e.e,t.e),$i=e=>!!e&&"v"in e&&e.v instanceof Promise,sD=(e,t)=>"v"in e&&"v"in t&&e.v.orig&&e.v.orig===t.v.orig,dl=e=>{if("e"in e)throw e.e;return e.v},wE=()=>{const e=new WeakMap,t=new WeakMap,n=[],r=new WeakMap;let i,o;(Ye?"production":void 0)!=="production"&&(i=new Set,o=new Set);const a=C=>e.get(C),s=(C,T)=>{T.d.forEach((N,L)=>{var $;if(!r.has(L)){const O=a(L);($=n[n.length-1])==null||$.add(L),r.set(L,[O,new Set]),O&&s(L,O)}r.get(L)[1].add(C)})},c=(C,T)=>{var N;(Ye?"production":void 0)!=="production"&&Object.freeze(T);const L=a(C);if(e.set(C,T),r.has(C)||((N=n[n.length-1])==null||N.add(C),r.set(C,[L,new Set]),s(C,T)),$i(L)){const $="v"in T?T.v instanceof Promise?T.v:Promise.resolve(T.v):Promise.reject(T.e);L.v!==$&&Tx(L.v,$)}},u=(C,T,N,L)=>{const $=new Map(L?T.d:null);let O=!1;N.forEach((P,M)=>{!P&&ad(C,M)&&(P=T),P?($.set(M,P),T.d.get(M)!==P&&(O=!0)):(Ye?"production":void 0)!=="production"&&console.warn("[Bug] atom state not found")}),(O||T.d.size!==$.size)&&(T.d=$)},f=(C,T,N,L)=>{const $=a(C),O={d:($==null?void 0:$.d)||new Map,v:T};if(N&&u(C,O,N,L),ua($,O)&&$.d===O.d)return $;if($i($)&&$i(O)&&sD($,O)){if($.d===O.d)return $;O.v=$.v}return c(C,O),O},d=(C,T,N,L)=>{if(aD(T)){let $;const O=()=>{const M=a(C);if(!$i(M)||M.v!==P)return;const V=f(C,P,N);t.has(C)&&M.d!==V.d&&S(C,V,M.d)},P=new Promise((M,V)=>{let W=!1;T.then(I=>{W||(W=!0,Rx(P,I),M(I),O())},I=>{W||(W=!0,Px(P,I),V(I),O())}),$=I=>{W||(W=!0,I.then(U=>Rx(P,U),U=>Px(P,U)),M(I))}});return P.orig=T,P.status="pending",oD(P,M=>{M&&$(M),L==null||L()}),f(C,P,N,!0)}return f(C,T,N)},p=(C,T,N)=>{const L=a(C),$={d:(L==null?void 0:L.d)||new Map,e:T};return N&&u(C,$,N),Dx(L,$)&&L.d===$.d?L:(c(C,$),$)},h=(C,T)=>{const N=a(C);if(!T&&N&&(t.has(C)||Array.from(N.d).every(([W,I])=>{if(W===C)return!0;const U=h(W);return U===I||ua(U,I)})))return N;const L=new Map;let $=!0;const O=W=>{if(ad(C,W)){const U=a(W);if(U)return L.set(W,U),dl(U);if(sd(W))return L.set(W,void 0),W.init;throw new Error("no atom init")}const I=h(W);return L.set(W,I),dl(I)};let P,M;const V={get signal(){return P||(P=new AbortController),P.signal},get setSelf(){return(Ye?"production":void 0)!=="production"&&!ld(C)&&console.warn("setSelf function cannot be used with read-only atom"),!M&&ld(C)&&(M=(...W)=>{if((Ye?"production":void 0)!=="production"&&$&&console.warn("setSelf function cannot be called in sync"),!$)return y(C,...W)}),M}};try{const W=C.read(O,V);return d(C,W,L,()=>P==null?void 0:P.abort())}catch(W){return p(C,W,L)}finally{$=!1}},g=C=>dl(h(C)),w=C=>{const T=P=>{var M,V;const W=new Set((M=t.get(P))==null?void 0:M.t);return(V=r.get(P))==null||V[1].forEach(I=>{W.add(I)}),W},N=new Array,L=new Set,$=P=>{if(!L.has(P)){L.add(P);for(const M of T(P))P!==M&&$(M);N.push(P)}};$(C);const O=new Set([C]);for(let P=N.length-1;P>=0;--P){const M=N[P],V=a(M);if(!V)continue;let W=!1;for(const I of V.d.keys())if(I!==M&&O.has(I)){W=!0;break}if(W){const I=h(M,!0);ua(V,I)||O.add(M)}}},_=(C,...T)=>{const N=O=>dl(h(O)),L=(O,...P)=>{const M=n.length>0;M||n.push(new Set([O]));let V;if(ad(C,O)){if(!sd(O))throw new Error("atom not writable");const W=a(O),I=d(O,P[0]);ua(W,I)||w(O)}else V=_(O,...P);if(!M){const W=A(n.pop());(Ye?"production":void 0)!=="production"&&i.forEach(I=>I({type:"async-write",flushed:W}))}return V};return C.write(N,L,...T)},y=(C,...T)=>{n.push(new Set([C]));const N=_(C,...T),L=A(n.pop());return(Ye?"production":void 0)!=="production"&&i.forEach($=>$({type:"write",flushed:L})),N},x=(C,T,N)=>{var L;const $=t.get(C);if($)return T&&$.t.add(T),$;const O=N||[];(L=a(C))==null||L.d.forEach((M,V)=>{V!==C&&x(V,C,O)}),h(C);const P={t:new Set(T&&[T]),l:new Set};if(t.set(C,P),(Ye?"production":void 0)!=="production"&&o.add(C),ld(C)&&C.onMount){const{onMount:M}=C;O.push(()=>{const V=M((...W)=>y(C,...W));V&&(P.u=V)})}return N||O.forEach(M=>M()),P},E=(C,T)=>!T.l.size&&(!T.t.size||T.t.size===1&&T.t.has(C)),b=(C,T)=>{if(!E(C,T))return;const N=T.u;N&&N(),t.delete(C),(Ye?"production":void 0)!=="production"&&o.delete(C);const L=a(C);L?($i(L)&&Tx(L.v),L.d.forEach(($,O)=>{if(O!==C){const P=t.get(O);P&&(P.t.delete(C),b(O,P))}})):(Ye?"production":void 0)!=="production"&&console.warn("[Bug] could not find atom state to unmount",C)},S=(C,T,N)=>{const L=new Set(T.d.keys()),$=new Set;N==null||N.forEach((O,P)=>{if(L.has(P)){L.delete(P);return}$.add(P);const M=t.get(P);M&&M.t.delete(C)}),L.forEach(O=>{x(O,C)}),$.forEach(O=>{const P=t.get(O);P&&b(O,P)})},A=C=>{let T;(Ye?"production":void 0)!=="production"&&(T=new Set);const N=[],L=$=>{var O;if(!r.has($))return;const[P,M]=r.get($);r.delete($),N.push([$,P]),M.forEach(L),(O=a($))==null||O.d.forEach((V,W)=>L(W))};if(C.forEach(L),N.forEach(([$,O])=>{const P=a($);if(!P){(Ye?"production":void 0)!=="production"&&console.warn("[Bug] no atom state to flush");return}if(P!==O){const M=t.get($);M&&P.d!==(O==null?void 0:O.d)&&S($,P,O==null?void 0:O.d),M&&!(!$i(O)&&(ua(O,P)||Dx(O,P)))&&(M.l.forEach(V=>V()),(Ye?"production":void 0)!=="production"&&T.add($))}}),(Ye?"production":void 0)!=="production")return T},R=(C,T)=>{const N=x(C),L=A([C]),$=N.l;return $.add(T),(Ye?"production":void 0)!=="production"&&i.forEach(O=>O({type:"sub",flushed:L})),()=>{$.delete(T),b(C,N),(Ye?"production":void 0)!=="production"&&i.forEach(O=>O({type:"unsub"}))}};return(Ye?"production":void 0)!=="production"?{get:g,set:y,sub:R,dev_subscribe_store:(C,T)=>{if(T!==2)throw new Error("The current StoreListener revision is 2.");return i.add(C),()=>{i.delete(C)}},dev_get_mounted_atoms:()=>o.values(),dev_get_atom_state:C=>e.get(C),dev_get_mounted:C=>t.get(C),dev_restore_atoms:C=>{n.push(new Set);for(const[N,L]of C)sd(N)&&(d(N,L),w(N));const T=A(n.pop());i.forEach(N=>N({type:"restore",flushed:T}))}}:{get:g,set:y,sub:R}};let fa;const lD=()=>(fa||(fa=wE(),(Ye?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=fa),globalThis.__JOTAI_DEFAULT_STORE__!==fa&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),fa);var cD={BASE_URL:"/gaf-studio-web",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const bE=B.createContext(void 0),kE=e=>{const t=B.useContext(bE);return(e==null?void 0:e.store)||t||lD()},uD=({children:e,store:t})=>{const n=B.useRef();return!t&&!n.current&&(n.current=wE()),B.createElement(bE.Provider,{value:t||n.current},e)},fD=e=>typeof(e==null?void 0:e.then)=="function",dD=F.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)});function Pu(e,t){const n=kE(t),[[r,i,o],a]=B.useReducer(u=>{const f=n.get(e);return Object.is(u[0],f)&&u[1]===n&&u[2]===e?u:[f,n,e]},void 0,()=>[n.get(e),n,e]);let s=r;(i!==n||o!==e)&&(a(),s=n.get(e));const c=t==null?void 0:t.delay;return B.useEffect(()=>{const u=n.sub(e,()=>{if(typeof c=="number"){setTimeout(a,c);return}a()});return a(),u},[n,e,c]),B.useDebugValue(s),fD(s)?dD(s):s}function Du(e,t){const n=kE(t);return B.useCallback((...i)=>{if((cD?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...i)},[n,e])}function pD(e,t){return[Pu(e,t),Du(e,t)]}var Qp;(e=>{function t(n){const r=zl(n),i=zl([]);return[zl(s=>s(r),(s,c,u)=>{const f=s(r);c(r,u);const d=s(r);s(i).forEach(p=>{p(s,c,d,f)})}),s=>{const c=Du(i);B.useEffect(()=>(c(u=>[...u,s]),()=>c(u=>{const f=u.indexOf(s);return[...u.slice(0,f),...u.slice(f+1)]})),[c,s])}]}e.atomWithListeners=t})(Qp||(Qp={}));var Or;(e=>{[e.pan,e.usePanListener]=Qp.atomWithListeners([0,0]),e.lastPanReset=zl(0)})(Or||(Or={}));function mD(){const e=ht(r=>r.background),[t,n]=Pu(Or.pan);return l.jsx("div",{className:"absolute inset-0",style:{background:e,backgroundPositionX:t,backgroundPositionY:n}})}function hD(){const e=He(n=>n.activePairSubFormat),t=He(n=>n.actions.setActivePairSubFormat);return l.jsxs("div",{className:"flex space-x-1",children:[l.jsx("div",{className:"self-center text-xs text-slate-500 font-semibold",children:"View:"}),l.jsx(Mx,{subFormat:"taf_1555",isActive:e==="taf_1555",onClick:()=>t("taf_1555")}),l.jsx(Mx,{subFormat:"taf_4444",isActive:e==="taf_4444",onClick:()=>t("taf_4444")})]})}function Mx({subFormat:e,isActive:t,onClick:n}){let r=e==="taf_1555"?"border-emerald-400 from-emerald-300 to-emerald-400 text-emerald-800":"border-cyan-400 from-cyan-300 to-cyan-400 text-cyan-800";return t||(r+=" opacity-50 hover:opacity-70 transition-opacity"),l.jsxs("button",{className:`p-1 flex items-stretch text-xs font-bold bg-gradient-to-b border transition-colors ${r}`,onClick:i=>{i.stopPropagation(),n()},children:[l.jsx("input",{className:"cursor-pointer mr-1",type:"radio",checked:t,onChange:()=>{}}),l.jsx("div",{className:"grow flex justify-center items-center",children:e==="taf_1555"?"1555":"4444"})]})}function vD({onClick:e,disabled:t,compact:n}){const r=t?"text-sky-600 opacity-30 cursor-not-allowed":"text-sky-600 hover:bg-slate-50",i=n?"":"rounded-tl rounded-tr px-1.5 py-1";return l.jsxs("button",{className:`${r} ${i} flex items-center text-xs font-semibold`,onClick:()=>{t||e()},children:[l.jsx(ie.ExportImage,{className:"mr-1",size:n?14:16}),"Export"]})}function gD(){const{entryIndex:e,frameIndex:t,subframeIndex:n}=Z.useCursor(),r=Z.useActiveEntryName(),i=Z.useActiveFrameFrameData(),o=He(c=>c.activePairSubFormat);if(e===null||t===null||r===void 0||i===void 0)return;let a;i.kind==="single"?a=i.layerData:n!==null&&(a=i.layers[n].layerData);const s=bc.nameFrameOrSubframe({ext:"png",entryNameOrIndex:r,frameIndex:t,subframeIndex:n??void 0});return l.jsx(vD,{disabled:a===void 0,onClick:()=>{if(a===void 0)return;let c;a.kind==="palette-idx"||a.kind==="raw-colors"?c=a.imageResource.compiledImage:c=(o==="taf_1555"?a.imageResource1555:a.imageResource4444).compiledImage,Co.saveImageDataAsPng(c,s)}})}function xD({close:e}){const t=ht(r=>r.background),n=ht(r=>r.actions.setBackground);return l.jsxs(De,{children:[l.jsx("div",{className:"flex flex-wrap -m-2.5 mb-4",children:kc.map((r,i)=>{const o=t===r,a=o?"outline outline-4 outline-blue-500":"hover:outline outline-4 outline-blue-400 cursor-pointer";return l.jsx("div",{className:`${a} flex justify-center items-center rounded-lg p-1 m-2`,onClick:()=>{o||n(r)},children:l.jsx("div",{className:"border border-slate-300 rounded-lg",style:{width:100,height:100,background:r}})},i)})}),l.jsx("div",{className:"flex justify-center",children:l.jsx(ne,{onClick:e,children:"OK"})})]})}function or(e){return EE(e)?(e.nodeName||"").toLowerCase():"#document"}function Kt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function lr(e){var t;return(t=(EE(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function EE(e){return e instanceof Node||e instanceof Kt(e).Node}function Oe(e){return e instanceof Element||e instanceof Kt(e).Element}function xt(e){return e instanceof HTMLElement||e instanceof Kt(e).HTMLElement}function Jp(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Kt(e).ShadowRoot}function Ns(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=qt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function yD(e){return["table","td","th"].includes(or(e))}function Mh(e){const t=Oh(),n=qt(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function wD(e){let t=Ci(e);for(;xt(t)&&!Oo(t);){if(Mh(t))return t;t=Ci(t)}return null}function Oh(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Oo(e){return["html","body","#document"].includes(or(e))}function qt(e){return Kt(e).getComputedStyle(e)}function Mu(e){return Oe(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ci(e){if(or(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Jp(e)&&e.host||lr(e);return Jp(t)?t.host:t}function SE(e){const t=Ci(e);return Oo(t)?e.ownerDocument?e.ownerDocument.body:e.body:xt(t)&&Ns(t)?t:SE(t)}function Rr(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=SE(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),a=Kt(i);return o?t.concat(a,a.visualViewport||[],Ns(i)?i:[],a.frameElement&&n?Rr(a.frameElement):[]):t.concat(i,Rr(i,[],n))}function gr(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function et(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Jp(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function _E(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function jE(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function CE(e){return e.mozInputSource===0&&e.isTrusted?!0:em()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function IE(e){return kD()?!1:!em()&&e.width===0&&e.height===0||em()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function AE(){return/apple/i.test(navigator.vendor)}function em(){const e=/android/i;return e.test(_E())||e.test(jE())}function bD(){return _E().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function kD(){return jE().includes("jsdom/")}function Hc(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function ED(e){return"nativeEvent"in e}function SD(e){return e.matches("html,body")}function Ft(e){return(e==null?void 0:e.ownerDocument)||document}function cd(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function ti(e){return"composedPath"in e?e.composedPath()[0]:e.target}const _D="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function NE(e){return xt(e)&&e.matches(_D)}function st(e){e.preventDefault(),e.stopPropagation()}function FE(e){return e?e.getAttribute("role")==="combobox"&&NE(e):!1}const Vc=Math.min,hi=Math.max,Kc=Math.round,so=Math.floor,Lr=e=>({x:e,y:e}),jD={left:"right",right:"left",bottom:"top",top:"bottom"},CD={start:"end",end:"start"};function Ox(e,t,n){return hi(e,Vc(t,n))}function Ou(e,t){return typeof e=="function"?e(t):e}function Ii(e){return e.split("-")[0]}function Lu(e){return e.split("-")[1]}function TE(e){return e==="x"?"y":"x"}function RE(e){return e==="y"?"height":"width"}function Bu(e){return["top","bottom"].includes(Ii(e))?"y":"x"}function PE(e){return TE(Bu(e))}function ID(e,t,n){n===void 0&&(n=!1);const r=Lu(e),i=PE(e),o=RE(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Zc(a)),[a,Zc(a)]}function AD(e){const t=Zc(e);return[tm(e),t,tm(t)]}function tm(e){return e.replace(/start|end/g,t=>CD[t])}function ND(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:a;default:return[]}}function FD(e,t,n,r){const i=Lu(e);let o=ND(Ii(e),n==="start",r);return i&&(o=o.map(a=>a+"-"+i),t&&(o=o.concat(o.map(tm)))),o}function Zc(e){return e.replace(/left|right|bottom|top/g,t=>jD[t])}function TD(e){return{top:0,right:0,bottom:0,left:0,...e}}function RD(e){return typeof e!="number"?TD(e):{top:e,right:e,bottom:e,left:e}}function qc(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function Lx(e,t,n){let{reference:r,floating:i}=e;const o=Bu(t),a=PE(t),s=RE(a),c=Ii(t),u=o==="y",f=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,p=r[s]/2-i[s]/2;let h;switch(c){case"top":h={x:f,y:r.y-i.height};break;case"bottom":h={x:f,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Lu(t)){case"start":h[a]-=p*(n&&u?-1:1);break;case"end":h[a]+=p*(n&&u?-1:1);break}return h}const PD=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,s=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:d}=Lx(u,r,c),p=r,h={},g=0;for(let w=0;w<s.length;w++){const{name:_,fn:y}=s[w],{x,y:E,data:b,reset:S}=await y({x:f,y:d,initialPlacement:r,placement:p,strategy:i,middlewareData:h,rects:u,platform:a,elements:{reference:e,floating:t}});f=x??f,d=E??d,h={...h,[_]:{...h[_],...b}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(u=S.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:f,y:d}=Lx(u,p,c)),w=-1)}return{x:f,y:d,placement:p,strategy:i,middlewareData:h}};async function DE(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:p=!1,padding:h=0}=Ou(t,e),g=RD(h),_=s[p?d==="floating"?"reference":"floating":d],y=qc(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(_)))==null||n?_:_.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:u,rootBoundary:f,strategy:c})),x=d==="floating"?{...a.floating,x:r,y:i}:a.reference,E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),b=await(o.isElement==null?void 0:o.isElement(E))?await(o.getScale==null?void 0:o.getScale(E))||{x:1,y:1}:{x:1,y:1},S=qc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:x,offsetParent:E,strategy:c}):x);return{top:(y.top-S.top+g.top)/b.y,bottom:(S.bottom-y.bottom+g.bottom)/b.y,left:(y.left-S.left+g.left)/b.x,right:(S.right-y.right+g.right)/b.x}}const DD=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:w=!0,..._}=Ou(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const y=Ii(i),x=Ii(s)===s,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),b=p||(x||!w?[Zc(s)]:AD(s));!p&&g!=="none"&&b.push(...FD(s,w,g,E));const S=[s,...b],A=await DE(t,_),R=[];let C=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&R.push(A[y]),d){const $=ID(i,a,E);R.push(A[$[0]],A[$[1]])}if(C=[...C,{placement:i,overflows:R}],!R.every($=>$<=0)){var T,N;const $=(((T=o.flip)==null?void 0:T.index)||0)+1,O=S[$];if(O)return{data:{index:$,overflows:C},reset:{placement:O}};let P=(N=C.filter(M=>M.overflows[0]<=0).sort((M,V)=>M.overflows[1]-V.overflows[1])[0])==null?void 0:N.placement;if(!P)switch(h){case"bestFit":{var L;const M=(L=C.map(V=>[V.placement,V.overflows.filter(W=>W>0).reduce((W,I)=>W+I,0)]).sort((V,W)=>V[1]-W[1])[0])==null?void 0:L[0];M&&(P=M);break}case"initialPlacement":P=s;break}if(i!==P)return{reset:{placement:P}}}return{}}}};async function MD(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=Ii(n),s=Lu(n),c=Bu(n)==="y",u=["left","top"].includes(a)?-1:1,f=o&&c?-1:1,d=Ou(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&typeof g=="number"&&(h=s==="end"?g*-1:g),c?{x:h*f,y:p*u}:{x:p*u,y:h*f}}const OD=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:a,middlewareData:s}=t,c=await MD(t,e);return a===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:a}}}}},LD=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:_=>{let{x:y,y:x}=_;return{x:y,y:x}}},...c}=Ou(e,t),u={x:n,y:r},f=await DE(t,c),d=Bu(Ii(i)),p=TE(d);let h=u[p],g=u[d];if(o){const _=p==="y"?"top":"left",y=p==="y"?"bottom":"right",x=h+f[_],E=h-f[y];h=Ox(x,h,E)}if(a){const _=d==="y"?"top":"left",y=d==="y"?"bottom":"right",x=g+f[_],E=g-f[y];g=Ox(x,g,E)}const w=s.fn({...t,[p]:h,[d]:g});return{...w,data:{x:w.x-n,y:w.y-r}}}}};function ME(e){const t=qt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=xt(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,s=Kc(n)!==o||Kc(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function Lh(e){return Oe(e)?e:e.contextElement}function xo(e){const t=Lh(e);if(!xt(t))return Lr(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=ME(t);let a=(o?Kc(n.width):n.width)/r,s=(o?Kc(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const BD=Lr(0);function OE(e){const t=Kt(e);return!Oh()||!t.visualViewport?BD:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $D(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Kt(e)?!1:t}function Ai(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=Lh(e);let a=Lr(1);t&&(r?Oe(r)&&(a=xo(r)):a=xo(e));const s=$D(o,n,r)?OE(o):Lr(0);let c=(i.left+s.x)/a.x,u=(i.top+s.y)/a.y,f=i.width/a.x,d=i.height/a.y;if(o){const p=Kt(o),h=r&&Oe(r)?Kt(r):r;let g=p,w=g.frameElement;for(;w&&r&&h!==g;){const _=xo(w),y=w.getBoundingClientRect(),x=qt(w),E=y.left+(w.clientLeft+parseFloat(x.paddingLeft))*_.x,b=y.top+(w.clientTop+parseFloat(x.paddingTop))*_.y;c*=_.x,u*=_.y,f*=_.x,d*=_.y,c+=E,u+=b,g=Kt(w),w=g.frameElement}}return qc({width:f,height:d,x:c,y:u})}const UD=[":popover-open",":modal"];function LE(e){return UD.some(t=>{try{return e.matches(t)}catch{return!1}})}function zD(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",a=lr(r),s=t?LE(t.floating):!1;if(r===a||s&&o)return n;let c={scrollLeft:0,scrollTop:0},u=Lr(1);const f=Lr(0),d=xt(r);if((d||!d&&!o)&&((or(r)!=="body"||Ns(a))&&(c=Mu(r)),xt(r))){const p=Ai(r);u=xo(r),f.x=p.x+r.clientLeft,f.y=p.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x,y:n.y*u.y-c.scrollTop*u.y+f.y}}function GD(e){return Array.from(e.getClientRects())}function BE(e){return Ai(lr(e)).left+Mu(e).scrollLeft}function WD(e){const t=lr(e),n=Mu(e),r=e.ownerDocument.body,i=hi(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=hi(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+BE(e);const s=-n.scrollTop;return qt(r).direction==="rtl"&&(a+=hi(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}function HD(e,t){const n=Kt(e),r=lr(e),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,c=0;if(i){o=i.width,a=i.height;const u=Oh();(!u||u&&t==="fixed")&&(s=i.offsetLeft,c=i.offsetTop)}return{width:o,height:a,x:s,y:c}}function VD(e,t){const n=Ai(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=xt(e)?xo(e):Lr(1),a=e.clientWidth*o.x,s=e.clientHeight*o.y,c=i*o.x,u=r*o.y;return{width:a,height:s,x:c,y:u}}function Bx(e,t,n){let r;if(t==="viewport")r=HD(e,n);else if(t==="document")r=WD(lr(e));else if(Oe(t))r=VD(t,n);else{const i=OE(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return qc(r)}function $E(e,t){const n=Ci(e);return n===t||!Oe(n)||Oo(n)?!1:qt(n).position==="fixed"||$E(n,t)}function KD(e,t){const n=t.get(e);if(n)return n;let r=Rr(e,[],!1).filter(s=>Oe(s)&&or(s)!=="body"),i=null;const o=qt(e).position==="fixed";let a=o?Ci(e):e;for(;Oe(a)&&!Oo(a);){const s=qt(a),c=Mh(a);!c&&s.position==="fixed"&&(i=null),(o?!c&&!i:!c&&s.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Ns(a)&&!c&&$E(e,a))?r=r.filter(f=>f!==a):i=s,a=Ci(a)}return t.set(e,r),r}function ZD(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n==="clippingAncestors"?KD(t,this._c):[].concat(n),r],s=a[0],c=a.reduce((u,f)=>{const d=Bx(t,f,i);return u.top=hi(d.top,u.top),u.right=Vc(d.right,u.right),u.bottom=Vc(d.bottom,u.bottom),u.left=hi(d.left,u.left),u},Bx(t,s,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function qD(e){const{width:t,height:n}=ME(e);return{width:t,height:n}}function YD(e,t,n){const r=xt(t),i=lr(t),o=n==="fixed",a=Ai(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const c=Lr(0);if(r||!r&&!o)if((or(t)!=="body"||Ns(i))&&(s=Mu(t)),r){const d=Ai(t,!0,o,t);c.x=d.x+t.clientLeft,c.y=d.y+t.clientTop}else i&&(c.x=BE(i));const u=a.left+s.scrollLeft-c.x,f=a.top+s.scrollTop-c.y;return{x:u,y:f,width:a.width,height:a.height}}function $x(e,t){return!xt(e)||qt(e).position==="fixed"?null:t?t(e):e.offsetParent}function UE(e,t){const n=Kt(e);if(!xt(e)||LE(e))return n;let r=$x(e,t);for(;r&&yD(r)&&qt(r).position==="static";)r=$x(r,t);return r&&(or(r)==="html"||or(r)==="body"&&qt(r).position==="static"&&!Mh(r))?n:r||wD(e)||n}const XD=async function(e){const t=this.getOffsetParent||UE,n=this.getDimensions;return{reference:YD(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}};function QD(e){return qt(e).direction==="rtl"}const JD={convertOffsetParentRelativeRectToViewportRelativeRect:zD,getDocumentElement:lr,getClippingRect:ZD,getOffsetParent:UE,getElementRects:XD,getClientRects:GD,getDimensions:qD,getScale:xo,isElement:Oe,isRTL:QD};function e8(e,t){let n=null,r;const i=lr(e);function o(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function a(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),o();const{left:u,top:f,width:d,height:p}=e.getBoundingClientRect();if(s||t(),!d||!p)return;const h=so(f),g=so(i.clientWidth-(u+d)),w=so(i.clientHeight-(f+p)),_=so(u),x={rootMargin:-h+"px "+-g+"px "+-w+"px "+-_+"px",threshold:hi(0,Vc(1,c))||1};let E=!0;function b(S){const A=S[0].intersectionRatio;if(A!==c){if(!E)return a();A?a(!1,A):r=setTimeout(()=>{a(!1,1e-7)},100)}E=!1}try{n=new IntersectionObserver(b,{...x,root:i.ownerDocument})}catch{n=new IntersectionObserver(b,x)}n.observe(e)}return a(!0),o}function t8(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Lh(e),f=i||o?[...u?Rr(u):[],...Rr(t)]:[];f.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),o&&y.addEventListener("resize",n)});const d=u&&s?e8(u,n):null;let p=-1,h=null;a&&(h=new ResizeObserver(y=>{let[x]=y;x&&x.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=h)==null||E.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let g,w=c?Ai(e):null;c&&_();function _(){const y=Ai(e);w&&(y.x!==w.x||y.y!==w.y||y.width!==w.width||y.height!==w.height)&&n(),w=y,g=requestAnimationFrame(_)}return n(),()=>{var y;f.forEach(x=>{i&&x.removeEventListener("scroll",n),o&&x.removeEventListener("resize",n)}),d==null||d(),(y=h)==null||y.disconnect(),h=null,c&&cancelAnimationFrame(g)}}const n8=LD,r8=DD,i8=(e,t,n)=>{const r=new Map,i={platform:JD,...n},o={...i.platform,_c:r};return PD(e,t,{...i,platform:o})};var Gl=typeof document<"u"?B.useLayoutEffect:B.useEffect;function Yc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Yc(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!Yc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function zE(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ux(e,t){const n=zE(e);return Math.round(t*n)/n}function zx(e){const t=B.useRef(e);return Gl(()=>{t.current=e}),t}function o8(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:c,open:u}=e,[f,d]=B.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=B.useState(r);Yc(p,r)||h(r);const[g,w]=B.useState(null),[_,y]=B.useState(null),x=B.useCallback(W=>{W!==A.current&&(A.current=W,w(W))},[]),E=B.useCallback(W=>{W!==R.current&&(R.current=W,y(W))},[]),b=o||g,S=a||_,A=B.useRef(null),R=B.useRef(null),C=B.useRef(f),T=c!=null,N=zx(c),L=zx(i),$=B.useCallback(()=>{if(!A.current||!R.current)return;const W={placement:t,strategy:n,middleware:p};L.current&&(W.platform=L.current),i8(A.current,R.current,W).then(I=>{const U={...I,isPositioned:!0};O.current&&!Yc(C.current,U)&&(C.current=U,xu.flushSync(()=>{d(U)}))})},[p,t,n,L]);Gl(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(W=>({...W,isPositioned:!1})))},[u]);const O=B.useRef(!1);Gl(()=>(O.current=!0,()=>{O.current=!1}),[]),Gl(()=>{if(b&&(A.current=b),S&&(R.current=S),b&&S){if(N.current)return N.current(b,S,$);$()}},[b,S,$,N,T]);const P=B.useMemo(()=>({reference:A,floating:R,setReference:x,setFloating:E}),[x,E]),M=B.useMemo(()=>({reference:b,floating:S}),[b,S]),V=B.useMemo(()=>{const W={position:n,left:0,top:0};if(!M.floating)return W;const I=Ux(M.floating,f.x),U=Ux(M.floating,f.y);return s?{...W,transform:"translate("+I+"px, "+U+"px)",...zE(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:I,top:U}},[n,s,M.floating,f.x,f.y]);return B.useMemo(()=>({...f,update:$,refs:P,elements:M,floatingStyles:V}),[f,$,P,M,V])}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var a8=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],nm=a8.join(","),GE=typeof Element>"u",vs=GE?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Xc=!GE&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Qc=function e(t,n){var r;n===void 0&&(n=!0);var i=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=i===""||i==="true",a=o||n&&t&&e(t.parentNode);return a},s8=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},l8=function(t,n,r){if(Qc(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(nm));return n&&vs.call(t,nm)&&i.unshift(t),i=i.filter(r),i},c8=function e(t,n,r){for(var i=[],o=Array.from(t);o.length;){var a=o.shift();if(!Qc(a,!1))if(a.tagName==="SLOT"){var s=a.assignedElements(),c=s.length?s:a.children,u=e(c,!0,r);r.flatten?i.push.apply(i,u):i.push({scopeParent:a,candidates:u})}else{var f=vs.call(a,nm);f&&r.filter(a)&&(n||!t.includes(a))&&i.push(a);var d=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),p=!Qc(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(d&&p){var h=e(d===!0?a.children:d.children,!0,r);r.flatten?i.push.apply(i,h):i.push({scopeParent:a,candidates:h})}else o.unshift.apply(o,a.children)}}return i},WE=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},HE=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||s8(t))&&!WE(t)?0:t.tabIndex},u8=function(t,n){var r=HE(t);return r<0&&n&&!WE(t)?0:r},f8=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},VE=function(t){return t.tagName==="INPUT"},d8=function(t){return VE(t)&&t.type==="hidden"},p8=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},m8=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},h8=function(t){if(!t.name)return!0;var n=t.form||Xc(t),r=function(s){return n.querySelectorAll('input[type="radio"][name="'+s+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(t.name));else try{i=r(t.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var o=m8(i,t.form);return!o||o===t},v8=function(t){return VE(t)&&t.type==="radio"},g8=function(t){return v8(t)&&!h8(t)},x8=function(t){var n,r=t&&Xc(t),i=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==t){var a,s,c;for(o=!!((a=i)!==null&&a!==void 0&&(s=a.ownerDocument)!==null&&s!==void 0&&s.contains(i)||t!=null&&(c=t.ownerDocument)!==null&&c!==void 0&&c.contains(t));!o&&i;){var u,f,d;r=Xc(i),i=(u=r)===null||u===void 0?void 0:u.host,o=!!((f=i)!==null&&f!==void 0&&(d=f.ownerDocument)!==null&&d!==void 0&&d.contains(i))}}return o},Gx=function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},y8=function(t,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=vs.call(t,"details>summary:first-of-type"),a=o?t.parentElement:t;if(vs.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var s=t;t;){var c=t.parentElement,u=Xc(t);if(c&&!c.shadowRoot&&i(c)===!0)return Gx(t);t.assignedSlot?t=t.assignedSlot:!c&&u!==t.ownerDocument?t=u.host:t=c}t=s}if(x8(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Gx(t);return!1},w8=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return vs.call(n,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}n=n.parentElement}return!1},b8=function(t,n){return!(n.disabled||Qc(n)||d8(n)||y8(n,t)||p8(n)||w8(n))},Wx=function(t,n){return!(g8(n)||HE(n)<0||!b8(t,n))},k8=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},E8=function e(t){var n=[],r=[];return t.forEach(function(i,o){var a=!!i.scopeParent,s=a?i.scopeParent:i,c=u8(s,a),u=a?e(i.candidates):s;c===0?a?n.push.apply(n,u):n.push(s):r.push({documentOrder:o,tabIndex:c,item:i,isScope:a,content:u})}),r.sort(f8).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(n)},Bh=function(t,n){n=n||{};var r;return n.getShadowRoot?r=c8([t],n.includeContainer,{filter:Wx.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:k8}):r=l8(t,n.includeContainer,Wx.bind(null,n)),E8(r)};function KE(e){return B.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}const S8=Cy.useInsertionEffect,_8=S8||(e=>e());function Tn(e){const t=B.useRef(()=>{});return _8(()=>{t.current=e}),B.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}const $h="ArrowUp",Fs="ArrowDown",Lo="ArrowLeft",Yo="ArrowRight";function pl(e,t,n){return Math.floor(e/t)!==n}function Oa(e,t){return t<0||t>=e.current.length}function ud(e,t){return pt(e,{disabledIndices:t})}function Hx(e,t){return pt(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function pt(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:o=1}=t===void 0?{}:t;const a=e.current,s=i?u=>i.includes(u):u=>{const f=a[u];return f==null||f.hasAttribute("disabled")||f.getAttribute("aria-disabled")==="true"};let c=n;do c+=r?-o:o;while(c>=0&&c<=a.length-1&&s(c));return c}function j8(e,t){let{event:n,orientation:r,loop:i,cols:o,disabledIndices:a,minIndex:s,maxIndex:c,prevIndex:u,stopEvent:f=!1}=t,d=u;if(n.key===$h){if(f&&st(n),u===-1)d=c;else if(d=pt(e,{startingIndex:d,amount:o,decrement:!0,disabledIndices:a}),i&&(u-o<s||d<0)){const p=u%o,h=c%o,g=c-(h-p);h===p?d=c:d=h>p?g:g-o}Oa(e,d)&&(d=u)}if(n.key===Fs&&(f&&st(n),u===-1?d=s:(d=pt(e,{startingIndex:u,amount:o,disabledIndices:a}),i&&u+o>c&&(d=pt(e,{startingIndex:u%o-o,amount:o,disabledIndices:a}))),Oa(e,d)&&(d=u)),r==="both"){const p=so(u/o);n.key===Yo&&(f&&st(n),u%o!==o-1?(d=pt(e,{startingIndex:u,disabledIndices:a}),i&&pl(d,o,p)&&(d=pt(e,{startingIndex:u-u%o-1,disabledIndices:a}))):i&&(d=pt(e,{startingIndex:u-u%o-1,disabledIndices:a})),pl(d,o,p)&&(d=u)),n.key===Lo&&(f&&st(n),u%o!==0?(d=pt(e,{startingIndex:u,disabledIndices:a,decrement:!0}),i&&pl(d,o,p)&&(d=pt(e,{startingIndex:u+(o-u%o),decrement:!0,disabledIndices:a}))):i&&(d=pt(e,{startingIndex:u+(o-u%o),decrement:!0,disabledIndices:a})),pl(d,o,p)&&(d=u));const h=so(c/o)===p;Oa(e,d)&&(i&&h?d=n.key===Lo?c:pt(e,{startingIndex:u-u%o-1,disabledIndices:a}):d=u)}return d}function C8(e,t,n){const r=[];let i=0;return e.forEach((o,a)=>{let{width:s,height:c}=o,u=!1;for(n&&(i=0);!u;){const f=[];for(let d=0;d<s;d++)for(let p=0;p<c;p++)f.push(i+d+p*t);i%t+s<=t&&f.every(d=>r[d]==null)?(f.forEach(d=>{r[d]=a}),u=!0):i++}}),[...r]}function I8(e,t,n,r,i){if(e===-1)return-1;const o=n.indexOf(e);switch(i){case"tl":return o;case"tr":return o+t[e].width-1;case"bl":return o+(t[e].height-1)*r;case"br":return n.lastIndexOf(e)}}function A8(e,t){return t.flatMap((n,r)=>e.includes(n)?[r]:[])}let Vx=0;function Wn(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=t;r&&cancelAnimationFrame(Vx);const o=()=>e==null?void 0:e.focus({preventScroll:n});i?o():Vx=requestAnimationFrame(o)}var _e=typeof document<"u"?B.useLayoutEffect:B.useEffect;function N8(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}function F8(e,t){if(e.size!==t.size)return!1;for(const[n,r]of e.entries())if(r!==t.get(n))return!1;return!0}const ZE=B.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function T8(e){let{children:t,elementsRef:n,labelsRef:r}=e;const[i,o]=B.useState(()=>new Map),a=B.useCallback(c=>{o(u=>new Map(u).set(c,null))},[]),s=B.useCallback(c=>{o(u=>{const f=new Map(u);return f.delete(c),f})},[]);return _e(()=>{const c=new Map(i);Array.from(c.keys()).sort(N8).forEach((f,d)=>{c.set(f,d)}),F8(i,c)||o(c)},[i]),B.createElement(ZE.Provider,{value:B.useMemo(()=>({register:a,unregister:s,map:i,elementsRef:n,labelsRef:r}),[a,s,i,n,r])},t)}function qE(e){let{label:t}=e===void 0?{}:e;const[n,r]=B.useState(null),i=B.useRef(null),{register:o,unregister:a,map:s,elementsRef:c,labelsRef:u}=B.useContext(ZE),f=B.useCallback(d=>{if(i.current=d,n!==null&&(c.current[n]=d,u)){var p;const h=t!==void 0;u.current[n]=h?t:(p=d==null?void 0:d.textContent)!=null?p:null}},[n,c,u,t]);return _e(()=>{const d=i.current;if(d)return o(d),()=>{a(d)}},[o,a]),_e(()=>{const d=i.current?s.get(i.current):null;d!=null&&r(d)},[s]),B.useMemo(()=>({ref:f,index:n??-1}),[n,f])}function Jc(){return Jc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jc.apply(this,arguments)}let fd=!1,R8=0;const Kx=()=>"floating-ui-"+R8++;function P8(){const[e,t]=B.useState(()=>fd?Kx():void 0);return _e(()=>{e==null&&t(Kx())},[]),B.useEffect(()=>{fd||(fd=!0)},[]),e}const D8=Cy.useId,$u=D8||P8;function YE(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const XE=B.createContext(null),QE=B.createContext(null),Hr=()=>{var e;return((e=B.useContext(XE))==null?void 0:e.id)||null},Vr=()=>B.useContext(QE);function M8(e){const t=$u(),n=Vr(),r=Hr(),i=e||r;return _e(()=>{const o={id:t,parentId:i};return n==null||n.addNode(o),()=>{n==null||n.removeNode(o)}},[n,t,i]),t}function O8(e){let{children:t,id:n}=e;const r=Hr();return B.createElement(XE.Provider,{value:B.useMemo(()=>({id:n,parentId:r}),[n,r])},t)}function L8(e){let{children:t}=e;const n=B.useRef([]),r=B.useCallback(a=>{n.current=[...n.current,a]},[]),i=B.useCallback(a=>{n.current=n.current.filter(s=>s!==a)},[]),o=B.useState(()=>YE())[0];return B.createElement(QE.Provider,{value:B.useMemo(()=>({nodesRef:n,addNode:r,removeNode:i,events:o}),[r,i,o])},t)}function Bo(e){return"data-floating-ui-"+e}function Ln(e){const t=B.useRef(e);return _e(()=>{t.current=e}),t}const Zx=Bo("safe-polygon");function dd(e,t,n){return n&&!Hc(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function B8(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:o,elements:{domReference:a,floating:s},refs:c}=e,{enabled:u=!0,delay:f=0,handleClose:d=null,mouseOnly:p=!1,restMs:h=0,move:g=!0}=t,w=Vr(),_=Hr(),y=Ln(d),x=Ln(f),E=B.useRef(),b=B.useRef(),S=B.useRef(),A=B.useRef(),R=B.useRef(!0),C=B.useRef(!1),T=B.useRef(()=>{}),N=B.useCallback(()=>{var P;const M=(P=i.current.openEvent)==null?void 0:P.type;return(M==null?void 0:M.includes("mouse"))&&M!=="mousedown"},[i]);B.useEffect(()=>{if(!u)return;function P(M){let{open:V}=M;V||(clearTimeout(b.current),clearTimeout(A.current),R.current=!0)}return o.on("openchange",P),()=>{o.off("openchange",P)}},[u,o]),B.useEffect(()=>{if(!u||!y.current||!n)return;function P(V){N()&&r(!1,V,"hover")}const M=Ft(s).documentElement;return M.addEventListener("mouseleave",P),()=>{M.removeEventListener("mouseleave",P)}},[s,n,r,u,y,N]);const L=B.useCallback(function(P,M,V){M===void 0&&(M=!0),V===void 0&&(V="hover");const W=dd(x.current,"close",E.current);W&&!S.current?(clearTimeout(b.current),b.current=setTimeout(()=>r(!1,P,V),W)):M&&(clearTimeout(b.current),r(!1,P,V))},[x,r]),$=B.useCallback(()=>{T.current(),S.current=void 0},[]),O=B.useCallback(()=>{if(C.current){const P=Ft(c.floating.current).body;P.style.pointerEvents="",P.removeAttribute(Zx),C.current=!1}},[c]);return B.useEffect(()=>{if(!u)return;function P(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function M(I){if(clearTimeout(b.current),R.current=!1,p&&!Hc(E.current)||h>0&&dd(x.current,"open")===0)return;const U=dd(x.current,"open",E.current);U?b.current=setTimeout(()=>{r(!0,I,"hover")},U):r(!0,I,"hover")}function V(I){if(P())return;T.current();const U=Ft(s);if(clearTimeout(A.current),y.current){n||clearTimeout(b.current),S.current=y.current({...e,tree:w,x:I.clientX,y:I.clientY,onClose(){O(),$(),L(I,!0,"safe-polygon")}});const q=S.current;U.addEventListener("mousemove",q),T.current=()=>{U.removeEventListener("mousemove",q)};return}(E.current==="touch"?!et(s,I.relatedTarget):!0)&&L(I)}function W(I){P()||y.current==null||y.current({...e,tree:w,x:I.clientX,y:I.clientY,onClose(){O(),$(),L(I)}})(I)}if(Oe(a)){const I=a;return n&&I.addEventListener("mouseleave",W),s==null||s.addEventListener("mouseleave",W),g&&I.addEventListener("mousemove",M,{once:!0}),I.addEventListener("mouseenter",M),I.addEventListener("mouseleave",V),()=>{n&&I.removeEventListener("mouseleave",W),s==null||s.removeEventListener("mouseleave",W),g&&I.removeEventListener("mousemove",M),I.removeEventListener("mouseenter",M),I.removeEventListener("mouseleave",V)}}},[a,s,u,e,p,h,g,L,$,O,r,n,w,x,y,i]),_e(()=>{var P;if(u&&n&&(P=y.current)!=null&&P.__options.blockPointerEvents&&N()){const V=Ft(s).body;if(V.setAttribute(Zx,""),V.style.pointerEvents="none",C.current=!0,Oe(a)&&s){var M;const W=a,I=w==null||(M=w.nodesRef.current.find(U=>U.id===_))==null||(M=M.context)==null?void 0:M.elements.floating;return I&&(I.style.pointerEvents=""),W.style.pointerEvents="auto",s.style.pointerEvents="auto",()=>{W.style.pointerEvents="",s.style.pointerEvents=""}}}},[u,n,_,s,a,w,y,N]),_e(()=>{n||(E.current=void 0,$(),O())},[n,$,O]),B.useEffect(()=>()=>{$(),clearTimeout(b.current),clearTimeout(A.current),O()},[u,a,$,O]),B.useMemo(()=>{if(!u)return{};function P(M){E.current=M.pointerType}return{reference:{onPointerDown:P,onPointerEnter:P,onMouseMove(M){n||h===0||(clearTimeout(A.current),A.current=setTimeout(()=>{R.current||r(!0,M.nativeEvent,"hover")},h))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(M){L(M.nativeEvent,!1)}}}},[u,h,n,r,L])}function $8(e,t){var n;let r=[],i=(n=e.find(o=>o.id===t))==null?void 0:n.parentId;for(;i;){const o=e.find(a=>a.id===i);i=o==null?void 0:o.parentId,o&&(r=r.concat(o))}return r}function vi(e,t){let n=e.filter(i=>{var o;return i.parentId===t&&((o=i.context)==null?void 0:o.open)}),r=n;for(;r.length;)r=e.filter(i=>{var o;return(o=r)==null?void 0:o.some(a=>{var s;return i.parentId===a.id&&((s=i.context)==null?void 0:s.open)})}),n=n.concat(r);return n}function U8(e,t){let n,r=-1;function i(o,a){a>r&&(n=o,r=a),vi(e,o).forEach(c=>{i(c.id,a+1)})}return i(t,0),e.find(o=>o.id===n)}let Ui=new WeakMap,ml=new WeakSet,hl={},pd=0;const z8=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,JE=e=>e&&(e.host||JE(e.parentNode)),G8=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=JE(n);return e.contains(r)?r:null}).filter(n=>n!=null);function W8(e,t,n,r){const i="data-floating-ui-inert",o=r?"inert":n?"aria-hidden":null,a=G8(t,e),s=new Set,c=new Set(a),u=[];hl[i]||(hl[i]=new WeakMap);const f=hl[i];a.forEach(d),p(t),s.clear();function d(h){!h||s.has(h)||(s.add(h),h.parentNode&&d(h.parentNode))}function p(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,g=>{if(s.has(g))p(g);else{const w=o?g.getAttribute(o):null,_=w!==null&&w!=="false",y=(Ui.get(g)||0)+1,x=(f.get(g)||0)+1;Ui.set(g,y),f.set(g,x),u.push(g),y===1&&_&&ml.add(g),x===1&&g.setAttribute(i,""),!_&&o&&g.setAttribute(o,"true")}})}return pd++,()=>{u.forEach(h=>{const g=(Ui.get(h)||0)-1,w=(f.get(h)||0)-1;Ui.set(h,g),f.set(h,w),g||(!ml.has(h)&&o&&h.removeAttribute(o),ml.delete(h)),w||h.removeAttribute(i)}),pd--,pd||(Ui=new WeakMap,Ui=new WeakMap,ml=new WeakSet,hl={})}}function qx(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=Ft(e[0]).body;return W8(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const Uh=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function eS(e,t){const n=Bh(e,Uh());t==="prev"&&n.reverse();const r=n.indexOf(gr(Ft(e)));return n.slice(r+1)[0]}function tS(){return eS(document.body,"next")}function nS(){return eS(document.body,"prev")}function La(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!et(n,r)}function H8(e){Bh(e,Uh()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function V8(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const zh={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let K8;function Yx(e){e.key==="Tab"&&(e.target,clearTimeout(K8))}const eu=B.forwardRef(function(t,n){const[r,i]=B.useState();_e(()=>(AE()&&i("button"),document.addEventListener("keydown",Yx),()=>{document.removeEventListener("keydown",Yx)}),[]);const o={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Bo("focus-guard")]:"",style:zh};return B.createElement("span",Jc({},t,o))}),rS=B.createContext(null),Xx=Bo("portal");function Z8(e){let{id:t,root:n}=e===void 0?{}:e;const[r,i]=B.useState(null),o=$u(),a=iS(),s=B.useRef(null);return _e(()=>()=>{r==null||r.remove(),queueMicrotask(()=>{s.current=null})},[r]),_e(()=>{if(s.current)return;const c=t?document.getElementById(t):null;if(!c)return;const u=document.createElement("div");u.id=o,u.setAttribute(Xx,""),c.appendChild(u),s.current=u,i(u)},[t,o]),_e(()=>{if(s.current)return;let c=n||(a==null?void 0:a.portalNode);c&&!Oe(c)&&(c=c.current),c=c||document.body;let u=null;t&&(u=document.createElement("div"),u.id=t,c.appendChild(u));const f=document.createElement("div");f.id=o,f.setAttribute(Xx,""),c=u||c,c.appendChild(f),s.current=f,i(f)},[t,n,o,a]),r}function q8(e){let{children:t,id:n,root:r=null,preserveTabOrder:i=!0}=e;const o=Z8({id:n,root:r}),[a,s]=B.useState(null),c=B.useRef(null),u=B.useRef(null),f=B.useRef(null),d=B.useRef(null),p=!!a&&!a.modal&&a.open&&i&&!!(r||o);return B.useEffect(()=>{if(!o||!i||a!=null&&a.modal)return;function h(g){o&&La(g)&&(g.type==="focusin"?V8:H8)(o)}return o.addEventListener("focusin",h,!0),o.addEventListener("focusout",h,!0),()=>{o.removeEventListener("focusin",h,!0),o.removeEventListener("focusout",h,!0)}},[o,i,a==null?void 0:a.modal]),B.createElement(rS.Provider,{value:B.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:c,afterOutsideRef:u,beforeInsideRef:f,afterInsideRef:d,portalNode:o,setFocusManagerState:s}),[i,o])},p&&o&&B.createElement(eu,{"data-type":"outside",ref:c,onFocus:h=>{if(La(h,o)){var g;(g=f.current)==null||g.focus()}else{const w=nS()||(a==null?void 0:a.refs.domReference.current);w==null||w.focus()}}}),p&&o&&B.createElement("span",{"aria-owns":o.id,style:zh}),o&&xu.createPortal(t,o),p&&o&&B.createElement(eu,{"data-type":"outside",ref:u,onFocus:h=>{if(La(h,o)){var g;(g=d.current)==null||g.focus()}else{const w=tS()||(a==null?void 0:a.refs.domReference.current);w==null||w.focus(),a!=null&&a.closeOnFocusOut&&(a==null||a.onOpenChange(!1,h.nativeEvent))}}}))}const iS=()=>B.useContext(rS),Qx=20;let Jr=[];function md(e){Jr=Jr.filter(t=>t.isConnected),e&&or(e)!=="body"&&(Jr.push(e),Jr.length>Qx&&(Jr=Jr.slice(-Qx)))}function Jx(){return Jr.slice().reverse().find(e=>e.isConnected)}const Y8=B.forwardRef(function(t,n){return B.createElement("button",Jc({},t,{type:"button",ref:n,tabIndex:-1,style:zh}))});function X8(e){const{context:t,children:n,disabled:r=!1,order:i=["content"],guards:o=!0,initialFocus:a=0,returnFocus:s=!0,modal:c=!0,visuallyHiddenDismiss:u=!1,closeOnFocusOut:f=!0}=e,{open:d,refs:p,nodeId:h,onOpenChange:g,events:w,dataRef:_,elements:{domReference:y,floating:x}}=t,E=typeof a=="number"&&a<0,b=FE(y)&&E,S=z8()?o:!0,A=Ln(i),R=Ln(a),C=Ln(s),T=Vr(),N=iS(),L=B.useRef(null),$=B.useRef(null),O=B.useRef(!1),P=B.useRef(!1),M=N!=null,V=B.useCallback(function(H){return H===void 0&&(H=x),H?Bh(H,Uh()):[]},[x]),W=B.useCallback(H=>{const q=V(H);return A.current.map(Y=>y&&Y==="reference"?y:x&&Y==="floating"?x:q).filter(Boolean).flat()},[y,x,A,V]);B.useEffect(()=>{if(r||!c)return;function H(Y){if(Y.key==="Tab"){et(x,gr(Ft(x)))&&V().length===0&&!b&&st(Y);const ee=W(),re=ti(Y);A.current[0]==="reference"&&re===y&&(st(Y),Y.shiftKey?Wn(ee[ee.length-1]):Wn(ee[1])),A.current[1]==="floating"&&re===x&&Y.shiftKey&&(st(Y),Wn(ee[0]))}}const q=Ft(x);return q.addEventListener("keydown",H),()=>{q.removeEventListener("keydown",H)}},[r,y,x,c,A,b,V,W]),B.useEffect(()=>{if(r||!f)return;function H(){P.current=!0,setTimeout(()=>{P.current=!1})}function q(Y){const ee=Y.relatedTarget;queueMicrotask(()=>{const re=!(et(y,ee)||et(x,ee)||et(ee,x)||et(N==null?void 0:N.portalNode,ee)||ee!=null&&ee.hasAttribute(Bo("focus-guard"))||T&&(vi(T.nodesRef.current,h).find(ae=>{var pe,ge;return et((pe=ae.context)==null?void 0:pe.elements.floating,ee)||et((ge=ae.context)==null?void 0:ge.elements.domReference,ee)})||$8(T.nodesRef.current,h).find(ae=>{var pe,ge;return((pe=ae.context)==null?void 0:pe.elements.floating)===ee||((ge=ae.context)==null?void 0:ge.elements.domReference)===ee})));ee&&re&&!P.current&&ee!==Jx()&&(O.current=!0,g(!1,Y))})}if(x&&xt(y))return y.addEventListener("focusout",q),y.addEventListener("pointerdown",H),!c&&x.addEventListener("focusout",q),()=>{y.removeEventListener("focusout",q),y.removeEventListener("pointerdown",H),!c&&x.removeEventListener("focusout",q)}},[r,y,x,c,h,T,N,g,f]),B.useEffect(()=>{var H;if(r)return;const q=Array.from((N==null||(H=N.portalNode)==null?void 0:H.querySelectorAll("["+Bo("portal")+"]"))||[]);if(x){const Y=[x,...q,L.current,$.current,A.current.includes("reference")||b?y:null].filter(re=>re!=null),ee=c||b?qx(Y,S,!S):qx(Y);return()=>{ee()}}},[r,y,x,c,A,N,b,S]),_e(()=>{if(r||!x)return;const H=Ft(x),q=gr(H);queueMicrotask(()=>{const Y=W(x),ee=R.current,re=(typeof ee=="number"?Y[ee]:ee.current)||x,ae=et(x,q);!E&&!ae&&d&&Wn(re,{preventScroll:re===x})})},[r,d,x,E,W,R]),_e(()=>{if(r||!x)return;let H=!1;const q=Ft(x),Y=gr(q),ee=_.current;md(Y);function re(ae){let{reason:pe,event:ge,nested:ce}=ae;pe==="escape-key"&&p.domReference.current&&md(p.domReference.current),pe==="hover"&&ge.type==="mouseleave"&&(O.current=!0),pe==="outside-press"&&(ce?(O.current=!1,H=!0):O.current=!(CE(ge)||IE(ge)))}return w.on("openchange",re),()=>{w.off("openchange",re);const ae=gr(q),pe=et(x,ae)||T&&vi(T.nodesRef.current,h).some(ye=>{var Ze;return et((Ze=ye.context)==null?void 0:Ze.elements.floating,ae)});(pe||ee.openEvent&&["click","mousedown"].includes(ee.openEvent.type))&&p.domReference.current&&md(p.domReference.current);const ce=Jx();C.current&&!O.current&&xt(ce)&&(!(ce!==ae&&ae!==q.body)||pe)&&Wn(ce,{cancelPrevious:!1,preventScroll:H})}},[r,x,C,_,p,w,T,h]),_e(()=>{if(!(r||!N))return N.setFocusManagerState({modal:c,closeOnFocusOut:f,open:d,onOpenChange:g,refs:p}),()=>{N.setFocusManagerState(null)}},[r,N,c,d,g,p,f]),_e(()=>{if(r||!x||typeof MutationObserver!="function"||E)return;const H=()=>{const Y=x.getAttribute("tabindex");A.current.includes("floating")||gr(Ft(x))!==p.domReference.current&&V().length===0?Y!=="0"&&x.setAttribute("tabindex","0"):Y!=="-1"&&x.setAttribute("tabindex","-1")};H();const q=new MutationObserver(H);return q.observe(x,{childList:!0,subtree:!0,attributes:!0}),()=>{q.disconnect()}},[r,x,p,A,V,E]);function I(H){return r||!u||!c?null:B.createElement(Y8,{ref:H==="start"?L:$,onClick:q=>g(!1,q.nativeEvent)},typeof u=="string"?u:"Dismiss")}const U=!r&&S&&(M||c);return B.createElement(B.Fragment,null,U&&B.createElement(eu,{"data-type":"inside",ref:N==null?void 0:N.beforeInsideRef,onFocus:H=>{if(c){const Y=W();Wn(i[0]==="reference"?Y[0]:Y[Y.length-1])}else if(N!=null&&N.preserveTabOrder&&N.portalNode)if(O.current=!1,La(H,N.portalNode)){const Y=tS()||y;Y==null||Y.focus()}else{var q;(q=N.beforeOutsideRef.current)==null||q.focus()}}}),!b&&I("start"),n,I("end"),U&&B.createElement(eu,{"data-type":"inside",ref:N==null?void 0:N.afterInsideRef,onFocus:H=>{if(c)Wn(W()[0]);else if(N!=null&&N.preserveTabOrder&&N.portalNode)if(f&&(O.current=!0),La(H,N.portalNode)){const Y=nS()||y;Y==null||Y.focus()}else{var q;(q=N.afterOutsideRef.current)==null||q.focus()}}}))}function ey(e){return xt(e.target)&&e.target.tagName==="BUTTON"}function ty(e){return NE(e)}function Q8(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:o}}=e,{enabled:a=!0,event:s="click",toggle:c=!0,ignoreMouse:u=!1,keyboardHandlers:f=!0}=t,d=B.useRef(),p=B.useRef(!1);return B.useMemo(()=>a?{reference:{onPointerDown(h){d.current=h.pointerType},onMouseDown(h){h.button===0&&(Hc(d.current,!0)&&u||s!=="click"&&(n&&c&&(!i.current.openEvent||i.current.openEvent.type==="mousedown")?r(!1,h.nativeEvent,"click"):(h.preventDefault(),r(!0,h.nativeEvent,"click"))))},onClick(h){if(s==="mousedown"&&d.current){d.current=void 0;return}Hc(d.current,!0)&&u||(n&&c&&(!i.current.openEvent||i.current.openEvent.type==="click")?r(!1,h.nativeEvent,"click"):r(!0,h.nativeEvent,"click"))},onKeyDown(h){d.current=void 0,!(h.defaultPrevented||!f||ey(h))&&(h.key===" "&&!ty(o)&&(h.preventDefault(),p.current=!0),h.key==="Enter"&&r(!(n&&c),h.nativeEvent,"click"))},onKeyUp(h){h.defaultPrevented||!f||ey(h)||ty(o)||h.key===" "&&p.current&&(p.current=!1,r(!(n&&c),h.nativeEvent,"click"))}}}:{},[a,i,s,u,f,o,c,n,r])}const J8={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},eM={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},ny=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function tM(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,nodeId:i,elements:{reference:o,domReference:a,floating:s},dataRef:c}=e,{enabled:u=!0,escapeKey:f=!0,outsidePress:d=!0,outsidePressEvent:p="pointerdown",referencePress:h=!1,referencePressEvent:g="pointerdown",ancestorScroll:w=!1,bubbles:_,capture:y}=t,x=Vr(),E=Tn(typeof d=="function"?d:()=>!1),b=typeof d=="function"?E:d,S=B.useRef(!1),A=B.useRef(!1),{escapeKey:R,outsidePress:C}=ny(_),{escapeKey:T,outsidePress:N}=ny(y),L=Tn(M=>{if(!n||!u||!f||M.key!=="Escape")return;const V=x?vi(x.nodesRef.current,i):[];if(!R&&(M.stopPropagation(),V.length>0)){let W=!0;if(V.forEach(I=>{var U;if((U=I.context)!=null&&U.open&&!I.context.dataRef.current.__escapeKeyBubbles){W=!1;return}}),!W)return}r(!1,ED(M)?M.nativeEvent:M,"escape-key")}),$=Tn(M=>{var V;const W=()=>{var I;L(M),(I=ti(M))==null||I.removeEventListener("keydown",W)};(V=ti(M))==null||V.addEventListener("keydown",W)}),O=Tn(M=>{const V=S.current;S.current=!1;const W=A.current;if(A.current=!1,p==="click"&&W||V||typeof b=="function"&&!b(M))return;const I=ti(M),U="["+Bo("inert")+"]",H=Ft(s).querySelectorAll(U);let q=Oe(I)?I:null;for(;q&&!Oo(q);){const re=Ci(q);if(Oo(re)||!Oe(re))break;q=re}if(H.length&&Oe(I)&&!SD(I)&&!et(I,s)&&Array.from(H).every(re=>!et(q,re)))return;if(xt(I)&&s){const re=I.clientWidth>0&&I.scrollWidth>I.clientWidth,ae=I.clientHeight>0&&I.scrollHeight>I.clientHeight;let pe=ae&&M.offsetX>I.clientWidth;if(ae&&qt(I).direction==="rtl"&&(pe=M.offsetX<=I.offsetWidth-I.clientWidth),pe||re&&M.offsetY>I.clientHeight)return}const Y=x&&vi(x.nodesRef.current,i).some(re=>{var ae;return cd(M,(ae=re.context)==null?void 0:ae.elements.floating)});if(cd(M,s)||cd(M,a)||Y)return;const ee=x?vi(x.nodesRef.current,i):[];if(ee.length>0){let re=!0;if(ee.forEach(ae=>{var pe;if((pe=ae.context)!=null&&pe.open&&!ae.context.dataRef.current.__outsidePressBubbles){re=!1;return}}),!re)return}r(!1,M,"outside-press")}),P=Tn(M=>{var V;const W=()=>{var I;O(M),(I=ti(M))==null||I.removeEventListener(p,W)};(V=ti(M))==null||V.addEventListener(p,W)});return B.useEffect(()=>{if(!n||!u)return;c.current.__escapeKeyBubbles=R,c.current.__outsidePressBubbles=C;function M(I){r(!1,I,"ancestor-scroll")}const V=Ft(s);f&&V.addEventListener("keydown",T?$:L,T),b&&V.addEventListener(p,N?P:O,N);let W=[];return w&&(Oe(a)&&(W=Rr(a)),Oe(s)&&(W=W.concat(Rr(s))),!Oe(o)&&o&&o.contextElement&&(W=W.concat(Rr(o.contextElement)))),W=W.filter(I=>{var U;return I!==((U=V.defaultView)==null?void 0:U.visualViewport)}),W.forEach(I=>{I.addEventListener("scroll",M,{passive:!0})}),()=>{f&&V.removeEventListener("keydown",T?$:L,T),b&&V.removeEventListener(p,N?P:O,N),W.forEach(I=>{I.removeEventListener("scroll",M)})}},[c,s,a,o,f,b,p,n,r,w,u,R,C,L,T,$,O,N,P]),B.useEffect(()=>{S.current=!1},[b,p]),B.useMemo(()=>u?{reference:{onKeyDown:L,[J8[g]]:M=>{h&&r(!1,M.nativeEvent,"reference-press")}},floating:{onKeyDown:L,onMouseDown(){A.current=!0},onMouseUp(){A.current=!0},[eM[p]]:()=>{S.current=!0}}}:{},[u,h,p,g,r,L])}function nM(e){var t;e===void 0&&(e={});const{open:n=!1,onOpenChange:r,nodeId:i}=e,[o,a]=B.useState(null),s=((t=e.elements)==null?void 0:t.reference)||o,c=o8(e),u=Vr(),f=Hr()!=null,d=Tn((S,A,R)=>{S&&(h.current.openEvent=A),g.emit("openchange",{open:S,event:A,reason:R,nested:f}),r==null||r(S,A,R)}),p=B.useRef(null),h=B.useRef({}),g=B.useState(()=>YE())[0],w=$u(),_=B.useCallback(S=>{const A=Oe(S)?{getBoundingClientRect:()=>S.getBoundingClientRect(),contextElement:S}:S;c.refs.setReference(A)},[c.refs]),y=B.useCallback(S=>{(Oe(S)||S===null)&&(p.current=S,a(S)),(Oe(c.refs.reference.current)||c.refs.reference.current===null||S!==null&&!Oe(S))&&c.refs.setReference(S)},[c.refs]),x=B.useMemo(()=>({...c.refs,setReference:y,setPositionReference:_,domReference:p}),[c.refs,y,_]),E=B.useMemo(()=>({...c.elements,domReference:s}),[c.elements,s]),b=B.useMemo(()=>({...c,refs:x,elements:E,dataRef:h,nodeId:i,floatingId:w,events:g,open:n,onOpenChange:d}),[c,i,w,g,n,d,x,E]);return _e(()=>{const S=u==null?void 0:u.nodesRef.current.find(A=>A.id===i);S&&(S.context=b)}),B.useMemo(()=>({...c,context:b,refs:x,elements:E}),[c,x,E,b])}const ry="active",iy="selected";function hd(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[ry]:a,[iy]:s,...c}=e;o=c}return{...n==="floating"&&{tabIndex:-1},...o,...t.map(a=>{const s=a?a[n]:null;return typeof s=="function"?e?s(e):null:s}).concat(e).reduce((a,s)=>(s&&Object.entries(s).forEach(c=>{let[u,f]=c;if(!(i&&[ry,iy].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof f=="function"){var d;(d=r.get(u))==null||d.push(f),a[u]=function(){for(var p,h=arguments.length,g=new Array(h),w=0;w<h;w++)g[w]=arguments[w];return(p=r.get(u))==null?void 0:p.map(_=>_(...g)).find(_=>_!==void 0)}}}else a[u]=f}),a),{})}}function rM(e){e===void 0&&(e=[]);const t=e,n=B.useCallback(o=>hd(o,e,"reference"),t),r=B.useCallback(o=>hd(o,e,"floating"),t),i=B.useCallback(o=>hd(o,e,"item"),e.map(o=>o==null?void 0:o.item));return B.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}let oy=!1;function Uu(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function ay(e,t){return Uu(t,e===$h||e===Fs,e===Lo||e===Yo)}function vd(e,t,n){return Uu(t,e===Fs,n?e===Lo:e===Yo)||e==="Enter"||e===" "||e===""}function iM(e,t,n){return Uu(t,n?e===Lo:e===Yo,e===Fs)}function sy(e,t,n){return Uu(t,n?e===Yo:e===Lo,e===$h)}function oM(e,t){const{open:n,onOpenChange:r,refs:i,elements:{domReference:o,floating:a}}=e,{listRef:s,activeIndex:c,onNavigate:u=()=>{},enabled:f=!0,selectedIndex:d=null,allowEscape:p=!1,loop:h=!1,nested:g=!1,rtl:w=!1,virtual:_=!1,focusItemOnOpen:y="auto",focusItemOnHover:x=!0,openOnArrowKeyDown:E=!0,disabledIndices:b=void 0,orientation:S="vertical",cols:A=1,scrollItemIntoView:R=!0,virtualItemRef:C,itemSizes:T,dense:N=!1}=t,L=Hr(),$=Vr(),O=Tn(u),P=B.useRef(y),M=B.useRef(d??-1),V=B.useRef(null),W=B.useRef(!0),I=B.useRef(O),U=B.useRef(!!a),H=B.useRef(!1),q=B.useRef(!1),Y=Ln(b),ee=Ln(n),re=Ln(R),[ae,pe]=B.useState(),[ge,ce]=B.useState(),ye=Tn(function(se,Ae,be){be===void 0&&(be=!1);const ke=se.current[Ae.current];ke&&(_?(pe(ke.id),$==null||$.events.emit("virtualfocus",ke),C&&(C.current=ke)):Wn(ke,{preventScroll:!0,sync:bD()&&AE()?oy||H.current:!1}),requestAnimationFrame(()=>{const Qt=re.current;Qt&&ke&&(be||!W.current)&&(ke.scrollIntoView==null||ke.scrollIntoView(typeof Qt=="boolean"?{block:"nearest",inline:"nearest"}:Qt))}))});_e(()=>{document.createElement("div").focus({get preventScroll(){return oy=!0,!1}})},[]),_e(()=>{f&&(n&&a?P.current&&d!=null&&(q.current=!0,M.current=d,O(d)):U.current&&(M.current=-1,I.current(null)))},[f,n,a,d,O]),_e(()=>{if(f&&n&&a)if(c==null){if(H.current=!1,d!=null)return;if(U.current&&(M.current=-1,ye(s,M)),!U.current&&P.current&&(V.current!=null||P.current===!0&&V.current==null)){let se=0;const Ae=()=>{s.current[0]==null?(se<2&&(se?requestAnimationFrame:queueMicrotask)(Ae),se++):(M.current=V.current==null||vd(V.current,S,w)||g?ud(s,Y.current):Hx(s,Y.current),V.current=null,O(M.current))};Ae()}}else Oa(s,c)||(M.current=c,ye(s,M,q.current),q.current=!1)},[f,n,a,c,d,g,s,S,w,O,ye,Y]),_e(()=>{var se;if(!f||a||!$||_||!U.current)return;const Ae=$.nodesRef.current,be=(se=Ae.find(Bt=>Bt.id===L))==null||(se=se.context)==null?void 0:se.elements.floating,ke=gr(Ft(a)),Qt=Ae.some(Bt=>Bt.context&&et(Bt.context.elements.floating,ke));be&&!Qt&&W.current&&be.focus({preventScroll:!0})},[f,a,$,L,_]),_e(()=>{if(!f||!$||!_||L)return;function se(Ae){ce(Ae.id),C&&(C.current=Ae)}return $.events.on("virtualfocus",se),()=>{$.events.off("virtualfocus",se)}},[f,$,_,L,C]),_e(()=>{I.current=O,U.current=!!a}),_e(()=>{n||(V.current=null)},[n]);const Ze=c!=null,At=B.useMemo(()=>{function se(be){if(!n)return;const ke=s.current.indexOf(be);ke!==-1&&O(ke)}return{onFocus(be){let{currentTarget:ke}=be;se(ke)},onClick:be=>{let{currentTarget:ke}=be;return ke.focus({preventScroll:!0})},...x&&{onMouseMove(be){let{currentTarget:ke}=be;se(ke)},onPointerLeave(be){let{pointerType:ke}=be;!W.current||ke==="touch"||(M.current=-1,ye(s,M),O(null),_||Wn(i.floating.current,{preventScroll:!0}))}}}},[n,i,ye,x,s,O,_]);return B.useMemo(()=>{if(!f)return{};const se=Y.current;function Ae(oe){if(W.current=!1,H.current=!0,!ee.current&&oe.currentTarget===i.floating.current)return;if(g&&sy(oe.key,S,w)){st(oe),r(!1,oe.nativeEvent,"list-navigation"),xt(o)&&!_&&o.focus();return}const yt=M.current,wt=ud(s,se),G=Hx(s,se);if(oe.key==="Home"&&(st(oe),M.current=wt,O(M.current)),oe.key==="End"&&(st(oe),M.current=G,O(M.current)),A>1){const Q=T||Array.from({length:s.current.length},()=>({width:1,height:1})),he=C8(Q,A,N),qe=he.findIndex(rt=>rt!=null&&!(se!=null&&se.includes(rt))),Ee=he.reduce((rt,k,m)=>k!=null&&!(se!=null&&se.includes(k))?m:rt,-1);if(M.current=he[j8({current:he.map(rt=>rt!=null?s.current[rt]:null)},{event:oe,orientation:S,loop:h,cols:A,disabledIndices:A8([...se||[],void 0],he),minIndex:qe,maxIndex:Ee,prevIndex:I8(M.current,Q,he,A,oe.key===Fs?"bl":oe.key===Yo?"tr":"tl"),stopEvent:!0})],O(M.current),S==="both")return}if(ay(oe.key,S)){if(st(oe),n&&!_&&gr(oe.currentTarget.ownerDocument)===oe.currentTarget){M.current=vd(oe.key,S,w)?wt:G,O(M.current);return}vd(oe.key,S,w)?h?M.current=yt>=G?p&&yt!==s.current.length?-1:wt:pt(s,{startingIndex:yt,disabledIndices:se}):M.current=Math.min(G,pt(s,{startingIndex:yt,disabledIndices:se})):h?M.current=yt<=wt?p&&yt!==-1?s.current.length:G:pt(s,{startingIndex:yt,decrement:!0,disabledIndices:se}):M.current=Math.max(wt,pt(s,{startingIndex:yt,decrement:!0,disabledIndices:se})),Oa(s,M.current)?O(null):O(M.current)}}function be(oe){y==="auto"&&CE(oe.nativeEvent)&&(P.current=!0)}function ke(oe){P.current=y,y==="auto"&&IE(oe.nativeEvent)&&(P.current=!0)}const Qt=_&&n&&Ze&&{"aria-activedescendant":ge||ae},Bt=s.current.find(oe=>(oe==null?void 0:oe.id)===ae);return{reference:{...Qt,onKeyDown(oe){W.current=!1;const yt=oe.key.indexOf("Arrow")===0,wt=iM(oe.key,S,w),G=sy(oe.key,S,w),Q=ay(oe.key,S),he=(g?wt:Q)||oe.key==="Enter"||oe.key.trim()==="";if(_&&n){const k=$==null?void 0:$.nodesRef.current.find(v=>v.parentId==null),m=$&&k?U8($.nodesRef.current,k.id):null;if(yt&&m&&C){const v=new KeyboardEvent("keydown",{key:oe.key,bubbles:!0});if(wt||G){var qe,Ee;const j=((qe=m.context)==null?void 0:qe.elements.domReference)===oe.currentTarget,D=G&&!j?(Ee=m.context)==null?void 0:Ee.elements.domReference:wt?Bt:null;D&&(st(oe),D.dispatchEvent(v),ce(void 0))}if(Q&&m.context&&m.context.open&&m.parentId&&oe.currentTarget!==m.context.elements.domReference){var rt;st(oe),(rt=m.context.elements.domReference)==null||rt.dispatchEvent(v);return}}return Ae(oe)}if(!(!n&&!E&&yt)){if(he&&(V.current=g&&Q?null:oe.key),g){wt&&(st(oe),n?(M.current=ud(s,se),O(M.current)):r(!0,oe.nativeEvent,"list-navigation"));return}Q&&(d!=null&&(M.current=d),st(oe),!n&&E?r(!0,oe.nativeEvent,"list-navigation"):Ae(oe),n&&O(M.current))}},onFocus(){n&&O(null)},onPointerDown:ke,onMouseDown:be,onClick:be},floating:{"aria-orientation":S==="both"?void 0:S,...!FE(o)&&Qt,onKeyDown:Ae,onPointerMove(){W.current=!0}},item:At}},[o,i,ae,ge,Y,ee,s,f,S,w,_,n,Ze,g,d,E,p,A,h,y,O,r,At,$,C,T,N])}const aM=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function sM(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:o=!0,role:a="dialog"}=t,s=(n=aM.get(a))!=null?n:a,c=$u(),f=Hr()!=null;return B.useMemo(()=>{if(!o)return{};const d={id:i,...s&&{role:s}};return s==="tooltip"||a==="label"?{reference:{["aria-"+(a==="label"?"labelledby":"describedby")]:r?i:void 0},floating:d}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":s==="alertdialog"?"dialog":s,"aria-controls":r?i:void 0,...s==="listbox"&&{role:"combobox"},...s==="menu"&&{id:c},...s==="menu"&&f&&{role:"menuitem"},...a==="select"&&{"aria-autocomplete":"none"},...a==="combobox"&&{"aria-autocomplete":"list"}},floating:{...d,...s==="menu"&&{"aria-labelledby":c}},item(p){let{active:h,selected:g}=p;const w={role:"option",...h&&{id:i+"-option"}};switch(a){case"select":return{...w,"aria-selected":h&&g};case"combobox":return{...w,...h&&{"aria-selected":!0}}}return{}}}},[o,a,s,r,i,c,f])}function lM(e,t){var n;const{open:r,dataRef:i}=e,{listRef:o,activeIndex:a,onMatch:s,onTypingChange:c,enabled:u=!0,findMatch:f=null,resetMs:d=750,ignoreKeys:p=[],selectedIndex:h=null}=t,g=B.useRef(),w=B.useRef(""),_=B.useRef((n=h??a)!=null?n:-1),y=B.useRef(null),x=Tn(s),E=Tn(c),b=Ln(f),S=Ln(p);return _e(()=>{r&&(clearTimeout(g.current),y.current=null,w.current="")},[r]),_e(()=>{if(r&&w.current===""){var A;_.current=(A=h??a)!=null?A:-1}},[r,h,a]),B.useMemo(()=>{if(!u)return{};function A(T){T?i.current.typing||(i.current.typing=T,E(T)):i.current.typing&&(i.current.typing=T,E(T))}function R(T,N,L){const $=b.current?b.current(N,L):N.find(O=>(O==null?void 0:O.toLocaleLowerCase().indexOf(L.toLocaleLowerCase()))===0);return $?T.indexOf($):-1}function C(T){const N=o.current;if(w.current.length>0&&w.current[0]!==" "&&(R(N,N,w.current)===-1?A(!1):T.key===" "&&st(T)),N==null||S.current.includes(T.key)||T.key.length!==1||T.ctrlKey||T.metaKey||T.altKey)return;r&&T.key!==" "&&(st(T),A(!0)),N.every(P=>{var M,V;return P?((M=P[0])==null?void 0:M.toLocaleLowerCase())!==((V=P[1])==null?void 0:V.toLocaleLowerCase()):!0})&&w.current===T.key&&(w.current="",_.current=y.current),w.current+=T.key,clearTimeout(g.current),g.current=setTimeout(()=>{w.current="",_.current=y.current,A(!1)},d);const $=_.current,O=R(N,[...N.slice(($||0)+1),...N.slice(0,($||0)+1)],w.current);O!==-1?(x(O),y.current=O):T.key!==" "&&(w.current="",A(!1))}return{reference:{onKeyDown:C},floating:{onKeyDown:C,onKeyUp(T){T.key===" "&&A(!1)}}}},[u,r,i,o,d,S,b,x,E])}function ly(e,t){const[n,r]=e;let i=!1;const o=t.length;for(let a=0,s=o-1;a<o;s=a++){const[c,u]=t[a]||[0,0],[f,d]=t[s]||[0,0];u>=r!=d>=r&&n<=(f-c)*(r-u)/(d-u)+c&&(i=!i)}return i}function cM(e,t){return e[0]>=t.x&&e[0]<=t.x+t.width&&e[1]>=t.y&&e[1]<=t.y+t.height}function uM(e){e===void 0&&(e={});const{buffer:t=.5,blockPointerEvents:n=!1,requireIntent:r=!0}=e;let i,o=!1,a=null,s=null,c=performance.now();function u(d,p){const h=performance.now(),g=h-c;if(a===null||s===null||g===0)return a=d,s=p,c=h,null;const w=d-a,_=p-s,x=Math.sqrt(w*w+_*_)/g;return a=d,s=p,c=h,x}const f=d=>{let{x:p,y:h,placement:g,elements:w,onClose:_,nodeId:y,tree:x}=d;return function(b){function S(){clearTimeout(i),_()}if(clearTimeout(i),!w.domReference||!w.floating||g==null||p==null||h==null)return;const{clientX:A,clientY:R}=b,C=[A,R],T=ti(b),N=b.type==="mouseleave",L=et(w.floating,T),$=et(w.domReference,T),O=w.domReference.getBoundingClientRect(),P=w.floating.getBoundingClientRect(),M=g.split("-")[0],V=p>P.right-P.width/2,W=h>P.bottom-P.height/2,I=cM(C,O),U=P.width>O.width,H=P.height>O.height,q=(U?O:P).left,Y=(U?O:P).right,ee=(H?O:P).top,re=(H?O:P).bottom;if(L&&(o=!0,!N))return;if($&&(o=!1),$&&!N){o=!0;return}if(N&&Oe(b.relatedTarget)&&et(w.floating,b.relatedTarget)||x&&vi(x.nodesRef.current,y).some(ge=>{let{context:ce}=ge;return ce==null?void 0:ce.open}))return;if(M==="top"&&h>=O.bottom-1||M==="bottom"&&h<=O.top+1||M==="left"&&p>=O.right-1||M==="right"&&p<=O.left+1)return S();let ae=[];switch(M){case"top":ae=[[q,O.top+1],[q,P.bottom-1],[Y,P.bottom-1],[Y,O.top+1]];break;case"bottom":ae=[[q,P.top+1],[q,O.bottom-1],[Y,O.bottom-1],[Y,P.top+1]];break;case"left":ae=[[P.right-1,re],[P.right-1,ee],[O.left+1,ee],[O.left+1,re]];break;case"right":ae=[[O.right-1,re],[O.right-1,ee],[P.left+1,ee],[P.left+1,re]];break}function pe(ge){let[ce,ye]=ge;switch(M){case"top":{const Ze=[U?ce+t/2:V?ce+t*4:ce-t*4,ye+t+1],At=[U?ce-t/2:V?ce+t*4:ce-t*4,ye+t+1],se=[[P.left,V||U?P.bottom-t:P.top],[P.right,V?U?P.bottom-t:P.top:P.bottom-t]];return[Ze,At,...se]}case"bottom":{const Ze=[U?ce+t/2:V?ce+t*4:ce-t*4,ye-t],At=[U?ce-t/2:V?ce+t*4:ce-t*4,ye-t],se=[[P.left,V||U?P.top+t:P.bottom],[P.right,V?U?P.top+t:P.bottom:P.top+t]];return[Ze,At,...se]}case"left":{const Ze=[ce+t+1,H?ye+t/2:W?ye+t*4:ye-t*4],At=[ce+t+1,H?ye-t/2:W?ye+t*4:ye-t*4];return[...[[W||H?P.right-t:P.left,P.top],[W?H?P.right-t:P.left:P.right-t,P.bottom]],Ze,At]}case"right":{const Ze=[ce-t,H?ye+t/2:W?ye+t*4:ye-t*4],At=[ce-t,H?ye-t/2:W?ye+t*4:ye-t*4],se=[[W||H?P.left+t:P.right,P.top],[W?H?P.left+t:P.right:P.left+t,P.bottom]];return[Ze,At,...se]}}}if(!ly([A,R],ae)){if(o&&!I)return S();if(!N&&r){const ge=u(b.clientX,b.clientY);if(ge!==null&&ge<.1)return S()}ly([A,R],pe([p,h]))?!o&&r&&(i=window.setTimeout(S,40)):S()}}};return f.__options={blockPointerEvents:n},f}const fM="_RootMenu_grrn6_11",dM="_Menu_grrn6_41",pM="_MenuItem_grrn6_63",Ba={RootMenu:fM,Menu:dM,MenuItem:pM},rm=B.createContext({getItemProps:()=>({}),activeIndex:null,setActiveIndex:()=>{},setHasFocusInside:()=>{},isOpen:!1}),cy=B.forwardRef(({children:e,label:t,icon:n,...r},i)=>{const[o,a]=B.useState(!1),[s,c]=B.useState(!1),[u,f]=B.useState(null),d=B.useRef([]),p=B.useRef([]),h=B.useContext(rm),g=Vr(),w=M8(),_=Hr(),y=qE(),x=_!=null,{floatingStyles:E,refs:b,context:S}=nM({nodeId:w,open:o,onOpenChange:a,placement:x?"right-start":"bottom-start",middleware:[OD({mainAxis:x?0:4,alignmentAxis:x?-4:0}),r8(),n8()],whileElementsMounted:t8}),A=B8(S,{enabled:x,delay:{open:75},handleClose:uM({blockPointerEvents:!0})}),R=Q8(S,{event:"mousedown",toggle:!x,ignoreMouse:x}),C=sM(S,{role:"menu"}),T=tM(S,{bubbles:!0}),N=oM(S,{listRef:d,activeIndex:u,nested:x,onNavigate:f}),L=lM(S,{listRef:p,onMatch:o?f:void 0,activeIndex:u}),{getReferenceProps:$,getFloatingProps:O,getItemProps:P}=rM([A,R,C,T,N,L]);return B.useEffect(()=>{if(!g)return;function M(){a(!1)}function V(W){W.nodeId!==w&&W.parentId===_&&a(!1)}return g.events.on("click",M),g.events.on("menuopen",V),()=>{g.events.off("click",M),g.events.off("menuopen",V)}},[g,w,_]),B.useEffect(()=>{o&&g&&g.events.emit("menuopen",{parentId:_,nodeId:w})},[g,o,w,_]),l.jsxs(O8,{id:w,children:[l.jsxs("button",{ref:KE([b.setReference,y.ref,i]),tabIndex:x?h.activeIndex===y.index?0:-1:void 0,role:x?"menuitem":void 0,"data-open":o?"":void 0,"data-nested":x?"":void 0,"data-focus-inside":s?"":void 0,className:r.className??(x?Ba.MenuItem:Ba.RootMenu),...$(h.getItemProps({...r,onFocus(M){var V;(V=r.onFocus)==null||V.call(r,M),c(!1),h.setHasFocusInside(!0)}})),children:[n&&l.jsx(n,{className:"mr-1",size:18}),l.jsx("span",{className:"grow",children:t}),x&&l.jsx("span",{className:"j","aria-hidden":!0,style:{marginLeft:10,fontSize:10},children:""})]}),l.jsx(rm.Provider,{value:{activeIndex:u,setActiveIndex:f,getItemProps:P,setHasFocusInside:c,isOpen:o},children:l.jsx(T8,{elementsRef:d,labelsRef:p,children:o&&l.jsx(q8,{children:l.jsx(X8,{context:S,modal:!1,initialFocus:x?-1:0,returnFocus:!x,children:l.jsx("div",{ref:b.setFloating,className:Ba.Menu,style:E,...O(),children:e})})})})})]})}),lt=B.forwardRef(({label:e,preContent:t,disabled:n,...r},i)=>{const o=B.useContext(rm),a=qE({label:n?null:e}),s=Vr(),c=a.index===o.activeIndex;return l.jsxs("button",{...r,ref:KE([a.ref,i]),type:"button",role:"menuitem",className:Ba.MenuItem,tabIndex:c?0:-1,disabled:n,...o.getItemProps({onClick(u){var f;(f=r.onClick)==null||f.call(r,u),s==null||s.events.emit("click")},onFocus(u){var f;(f=r.onFocus)==null||f.call(r,u),o.setHasFocusInside(!0)}}),children:[t,e]})}),En=B.forwardRef((e,t)=>Hr()===null?l.jsx(L8,{children:l.jsx(cy,{...e,ref:t})}):l.jsx(cy,{...e,ref:t}));function Ts(){return l.jsx("button",{className:Ba.MenuItem,disabled:!0,children:l.jsx("div",{className:"border-b border-slate-200 w-full my-1",style:{height:1}})})}function vl({label:e,checked:t,onChange:n,disabled:r}){const i=l.jsx("div",{className:"mr-1.5",children:l.jsx("input",{className:"cursor-pointer",type:"checkbox",checked:t,onChange:()=>{},disabled:r})});return l.jsx(lt,{label:e,disabled:r,preContent:i,onClick:()=>{r||n(!t)}})}function zi({label:e,checked:t,onChange:n,disabled:r}){const i=l.jsx("div",{className:"mr-1.5",children:l.jsx("input",{className:"cursor-pointer",type:"radio",checked:t,onChange:()=>{},disabled:r})});return l.jsx(lt,{label:e,disabled:r,preContent:i,onClick:()=>{r||n(!t)}})}function mM(){const e=F.useContext(sr),t=F.useContext(Lt),n=F.useCallback(async()=>{const{close:o}=e.pushModal({title:"Change Background",body:l.jsx(xD,{close:()=>o()})})},[e]),r=ht(o=>o.mainCanvasLayerVisibility),i=ht(o=>o.actions.setMainCanvasLayerVisibility);return l.jsxs(En,{label:"Options",icon:ie.Options,className:`inline-flex items-center bg-slate-400 text-slate-100 px-1.5 py-1\r
        rounded-tl rounded-tr hover:bg-slate-500 hover:text-white text-xs font-bold`,children:[l.jsx(lt,{label:"Change background",onClick:n}),l.jsx(vl,{label:"Show grid",checked:r.GRID,onChange:o=>i({...r,GRID:o})}),l.jsx(vl,{label:"Show crosshair",checked:r.CROSS,onChange:o=>i({...r,CROSS:o})}),l.jsx(vl,{label:"Show offset bounds",checked:r.BOUNDS,onChange:o=>i({...r,BOUNDS:o})}),l.jsx(vl,{label:"Show origin bounds",checked:r.O_BOUNDS,onChange:o=>i({...r,O_BOUNDS:o})}),l.jsx(Ts,{}),l.jsx(lt,{label:"Replace image data",onClick:()=>t.replaceActiveFrameData()})]})}function hM(){const[[e,t],n]=pD(Or.pan),r=Du(Or.lastPanReset),{numberPrompt:i}=F.useContext(ks),o=async()=>{const s=await i({title:"Set camera X",label:"Value",defaultValue:e});s!==null&&(n([s,t]),r(c=>c+1))},a=async()=>{const s=await i({title:"Set camera Y",label:"Value",defaultValue:t});s!==null&&(n([e,s]),r(c=>c+1))};return l.jsx("div",{className:"h-full flex items-center justify-center text-xs",children:l.jsxs("div",{className:"flex items-center space-x-1 font-mono",children:[l.jsx("span",{className:"font-bold",title:"Middle-click and drag on the image to move camera",children:"Camera:"}),l.jsx("span",{className:"cursor-pointer",onClick:o,children:e}),",",l.jsx("span",{className:"cursor-pointer",onClick:a,children:t}),l.jsx(Ei,{icon:l.jsx(ie.Reset,{size:12}),onClick:()=>{n([0,0]),r(s=>s+1)}})]})})}function vM(){const e=Z.useFormat();return l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("div",{className:"flex-1",children:e==="taf-pair"&&l.jsx(hD,{})}),l.jsx("div",{className:"flex-1",children:l.jsx(hM,{})}),l.jsxs("div",{className:"flex-1 flex justify-end space-x-2",children:[l.jsx(gD,{}),l.jsx(mM,{})]})]})}function Rs({onRender:e}){const t=F.useRef(null),n=Pu(Or.pan),r=F.useCallback(()=>{if(t.current!==null){const[a,s]=n;e(t.current,a,s)}},[e,n]),i=F.useCallback(a=>{const{width:s,height:c}=a.getBoundingClientRect();a.width=s,a.height=c,r()},[r]);return F.useEffect(()=>{const a=t.current;if(a===null)return;i(a);let s=!0;const c=new ResizeObserver(()=>{if(s){s=!1;return}i(a)});return c.observe(a,{box:"device-pixel-content-box"}),()=>{c.disconnect()}},[i]),F.useMemo(()=>l.jsx("div",{className:"absolute inset-0",children:l.jsx("canvas",{ref:t,className:"w-full h-full",style:{imageRendering:"pixelated"}})}),[])}var $o;(e=>{function t(o,a,s,c,u){const f=o.canvas.width,d=o.canvas.height;for(let p=0;p<=Math.floor(f/a);p++){const h=p*a+s%a;o.pixelPerfectLine(h,0,h,d,u)}for(let p=0;p<=Math.floor(d/a);p++){const h=p*a+c%a;o.pixelPerfectLine(0,h,f,h,u)}}e.drawGrid=t;function n(o,a,s,c){const u=o.canvas.width,f=o.canvas.height,d=Math.floor(u/2)+a,p=Math.floor(f/2)+s;o.pixelPerfectLine(d,0,d,f,c),o.pixelPerfectLine(0,p,u,p,c)}e.drawCross=n;function r(o,a,s,c,u,f,d,p){const h=Math.floor(o.canvas.width/2),g=Math.floor(o.canvas.height/2);o.pixelPerfectRectangle(h-c+f,g-u+d,a,s,p)}e.drawBounds=r;function i(o,a,s,c,u,f){const d=Math.floor(o.canvas.width/2),p=Math.floor(o.canvas.height/2);o.pixelPerfectRectangle(d+c,p+u,a,s,f)}e.drawOriginBounds=i})($o||($o={}));let gd;class Ps{constructor(t){Xo(this,"canvas");Xo(this,"ctx");Xo(this,"pixelRatio");if(this.canvas=t,this.ctx=t.getContext("2d"),gd===void 0){const n=window.devicePixelRatio||1,r=this.ctx,i=r.webkitBackingStorePixelRatio??r.mozBackingStorePixelRatio??r.msBackingStorePixelRatio??r.oBackingStorePixelRatio??r.backingStorePixelRatio??1;gd=n/i}this.pixelRatio=gd,this.start()}start(){this.ctx.imageSmoothingEnabled=!1,this.ctx.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}getSharpPixel(t,n){return n%2==0?t:t+this.pixelRatio/2}pixelPerfectLine(t,n,r,i,o){this.ctx.save(),this.ctx.beginPath();const a=1;this.ctx.lineWidth=a*this.pixelRatio,this.ctx.strokeStyle=o,this.ctx.moveTo(this.getSharpPixel(t,a),this.getSharpPixel(n,a)),this.ctx.lineTo(this.getSharpPixel(r,a),this.getSharpPixel(i,a)),this.ctx.stroke(),this.ctx.restore()}pixelPerfectRectangle(t,n,r,i,o){this.ctx.save(),this.ctx.beginPath();const a=1;this.ctx.lineWidth=a*this.pixelRatio,this.ctx.strokeStyle=o,this.ctx.strokeRect(this.getSharpPixel(t,a),this.getSharpPixel(n,a),Math.floor(r),Math.floor(i)),this.ctx.restore()}drawImage(t,n,r){this.ctx.putImageData(t,n,r)}}function gM({frameData:e}){const t=ht(i=>i.mainCanvasLayerVisibility.BOUNDS),n=ht(i=>i.boundsStyle);if(!t)return;const r=e.kind==="multi"?e.layers:[e];return l.jsx(Rs,{onRender:(i,o,a)=>{const s=new Ps(i);r.forEach(c=>{$o.drawBounds(s,c.width,c.height,c.xOffset,c.yOffset,o,a,n)})}})}function xM(){const e=ht(n=>n.mainCanvasLayerVisibility.CROSS),t=ht(n=>n.crossStyle);if(e)return l.jsx(Rs,{onRender:(n,r,i)=>{const o=new Ps(n);$o.drawCross(o,r,i,t)}})}function yM(){const e=ht(r=>r.mainCanvasLayerVisibility.GRID),t=ht(r=>r.gridSpacing),n=ht(r=>r.gridStyle);if(e)return l.jsx(Rs,{onRender:(r,i,o)=>{const a=new Ps(r);$o.drawGrid(a,t,i,o,n)}})}function wM({frameData:e}){const t=He(r=>r.activePairSubFormat);return(e.kind==="multi"?e.layers:[e]).map((r,i)=>l.jsx(Rs,{onRender:(o,a,s)=>{const c=new Ps(o);let u;r.layerData.kind==="raw-colors-pair"?u=t==="taf_1555"?r.layerData.imageResource1555.compiledImage:r.layerData.imageResource4444.compiledImage:u=r.layerData.imageResource.compiledImage,ir.assertEq(r.width,u.width),ir.assertEq(r.height,u.height);const f=Math.floor(c.canvas.width/2),d=Math.floor(c.canvas.height/2);c.drawImage(u,f-r.xOffset+a,d-r.yOffset+s)}},i))}function bM(){const e=Du(Or.pan),t=Pu(Or.lastPanReset),n=F.useRef(null);return F.useEffect(()=>{const r=n.current;if(r===null)return;let i,o=[0,0],a=[0,0],s;const c=p=>{s!==void 0&&cancelAnimationFrame(s),s=requestAnimationFrame(()=>{e(p)})},u=p=>{p.preventDefault(),p.button===1&&(i=[p.clientX,p.clientY])},f=p=>{if(i===void 0)return;const[h,g]=i,[w,_]=o,y=p.clientX-h,x=p.clientY-g;a=[w+y,_+x],c(a)},d=()=>{i=void 0,o=[...a]};return r.addEventListener("mousedown",u),document.body.addEventListener("mousemove",f),document.body.addEventListener("mouseup",d),window.addEventListener("blur",d),()=>{r.removeEventListener("mousedown",u),document.body.removeEventListener("mousemove",f),document.body.removeEventListener("mouseup",d),window.removeEventListener("blur",d),s!==void 0&&cancelAnimationFrame(s)}},[t,e]),l.jsx("div",{ref:n,className:"absolute inset-0"})}function kM({frameData:e}){const t=ht(i=>i.mainCanvasLayerVisibility.O_BOUNDS),n=ht(i=>i.originBoundsStyle);if(!t)return;const r=e.kind==="multi"?e.layers:[e];return l.jsx(Rs,{onRender:(i,o,a)=>{const s=new Ps(i);r.forEach(c=>{$o.drawOriginBounds(s,c.width,c.height,o,a,n)})}})}function EM({frameData:e}){const t=F.useMemo(()=>l.jsx(yM,{}),[]),n=F.useMemo(()=>l.jsx(wM,{frameData:e}),[e]),r=F.useMemo(()=>l.jsx(xM,{}),[]),i=F.useMemo(()=>l.jsx(gM,{frameData:e}),[e]),o=F.useMemo(()=>l.jsx(kM,{frameData:e}),[e]),a=ht(s=>s.mainCanvasLayerOrder);return l.jsxs("div",{className:"absolute inset-0",children:[[...a].map(s=>l.jsx(F.Fragment,{children:s==="GRID"?t:s==="IMAGE"?n:s==="CROSS"?r:s==="BOUNDS"?i:s==="O_BOUNDS"?o:(()=>{throw new Error(`Unknown layer key: ${s}`)})()},s)),l.jsx(bM,{})]})}function SM({frameData:e}){return l.jsxs("div",{className:"w-full h-full flex flex-col",children:[l.jsx(vM,{}),l.jsx("div",{className:"grow border border-slate-300 overflow-hidden",children:l.jsxs("div",{className:"w-full h-full relative",children:[l.jsx(mD,{}),l.jsx(EM,{frameData:e})]})})]})}function _M(){const e=Z.useActiveFrame(),t=Z.useActiveSubframeIndex();if(e===null)return l.jsx("div",{className:"w-full h-full flex justify-center items-center text-gray-400",children:"No frame selected"});let n=e.frameData;return n.kind==="multi"&&t!==null&&(n=n.layers[t]),l.jsx(SM,{frameData:n})}function oS({type:e,index:t,onClick:n}){const r=F.useRef(null),i=Z.useIsFrameOrSubframeSelectedAt(e,t);F.useEffect(()=>{const u=r.current;!i||u===null||u.scrollIntoView({behavior:"smooth"})},[i]);const o=Z.useSubframesCountAtFrameOrSubframe(e,t),a=i?"border-blue-500":"border-gray-300",s=i?"text-blue-500":"text-gray-400",c=i?"cursor-default":"cursor-pointer";return l.jsxs("div",{ref:r,className:`shrink-0 bg-white border-2 text-xs flex flex-col justify-center items-center overflow-hidden select-none leading-none ${a} ${c} ${s}`,style:{width:ch,height:ju},onClick:i?void 0:n,children:[l.jsx("div",{className:"font-bold",style:{marginBottom:1},children:t+1}),o!==null?l.jsxs("div",{children:["x",o]}):l.jsx("div",{className:"invisible",children:"0"})]})}function aS({children:e}){return l.jsx("div",{className:"flex space-x-1.5 overflow-x-auto",children:e})}function sS({children:e,minHeight:t}){return l.jsx("div",{className:"grow flex space-x-1.5",style:{minHeight:t+10},children:e})}function jM(){const e=Z.useHasActiveSubframe()===!1,t=Z.useSetActiveSubframeIndex(),n=()=>t(null),r=e?"border-blue-500":"border-gray-300",i=e?"text-blue-500":"text-gray-400",o=e?"cursor-default":"cursor-pointer";return l.jsx("div",{className:`shrink-0 bg-white border-2 text-xs flex flex-col justify-center items-center overflow-hidden select-none leading-none ${r} ${o} ${i}`,style:{width:ch,height:ju},onClick:e?void 0:n,children:l.jsx(ie.CompositeSubframes,{size:20})})}function CM({type:e}){const t=F.useContext(Lt);return l.jsx("div",{className:`group shrink-0 border-2 border-gray-300 hover:border-blue-500 text-xs flex\r
        flex-col justify-center items-center overflow-hidden cursor-pointer transition-colors`,style:{width:ch,height:ju},onClick:()=>t.importImages(e),children:l.jsx(ie.Plus,{className:"text-gray-400 group-hover:text-blue-500 transition-colors",size:20})})}function lS({type:e,itemLength:t,renderItem:n,showCompositeItem:r}){return l.jsxs(sS,{minHeight:ju,children:[r&&l.jsx(jM,{}),t>0&&l.jsx(aS,{children:Array.from({length:t}).map((i,o)=>n(o))}),l.jsx(CM,{type:e})]})}function xd({frameData:e}){const t=He(i=>i.activePairSubFormat),r=(e.kind==="multi"?e.layers:[e]).map((i,o)=>{let a;return i.layerData.kind==="raw-colors-pair"?a=t==="taf_1555"?i.layerData.imageResource1555.compiledImage:i.layerData.imageResource4444.compiledImage:a=i.layerData.imageResource.compiledImage,l.jsx("div",{className:"absolute inset-0 flex justify-center items-center overflow-hidden",children:l.jsx(sh,{image:a,width:i.width,height:i.height,contain:!0,smoothing:!0})},o)});return l.jsx("div",{className:"relative",style:{width:e.width,height:e.height,maxWidth:"100%",maxHeight:"100%"},children:r})}function cS({index:e,frameData:t,isSelected:n,onClick:r}){const i=F.useRef(null);F.useEffect(()=>{const u=i.current;!n||u===null||u.scrollIntoView({behavior:"smooth"})},[n]);const o=n?"border-blue-500":"border-gray-300",a=n?"text-blue-500":"text-gray-400",s=n?"cursor-default":"cursor-pointer";let c;if(t.kind==="single")c=l.jsx(xd,{frameData:t});else if(t.layers.length===0)c=l.jsx(xd,{frameData:t});else{const u=t.layers[0];c=l.jsx(xd,{frameData:u})}return l.jsx("div",{ref:i,className:`shrink-0 bg-white border-2 ${o} ${s}`,style:{width:lh,height:Es},onClick:n?void 0:r,children:l.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden",children:[l.jsx("div",{className:`${a} font-bold font-mono text-xs text-center px-1 py-0.5`,children:l.jsxs("span",{children:["#",e+1]})}),l.jsx("div",{className:"basis-0 grow overflow-hidden flex justify-center items-center",children:c}),l.jsx("div",{className:`${a} font-bold font-mono text-xs px-1 py-0.5 truncate`,children:t.kind==="multi"?l.jsxs("div",{className:"flex justify-center items-center space-x-1",title:"Multi-layered",children:[l.jsx(ie.MultiLayered,{size:14})," (x",t.layers.length,")"]}):l.jsxs("div",{className:"flex justify-center items-center space-x-1 invisible",title:"Single-layered",children:[l.jsx(ie.SingleLayered,{size:14})," (None)"]})})]})})}function IM({frameIndex:e,setActiveFrameIndex:t}){const n=Z.useFrameDataAt(e),r=Z.useIsFrameSelectedAt(e);return l.jsx(cS,{index:e,frameData:n,isSelected:r,onClick:()=>t(e)})}function AM({isSelected:e,onClick:t}){const n=e?"border-blue-500":"border-gray-300",r=e?"text-blue-500":"text-slate-400",i=e?"cursor-default":"cursor-pointer";return l.jsx("div",{className:`shrink-0 bg-white border-2 ${n} ${i}`,style:{width:lh,height:Es},onClick:e?void 0:t,children:l.jsx("div",{className:"w-full h-full flex justify-center items-center",children:l.jsx("span",{className:`font-bold font-mono ${r} text-xs text-center`,children:"(composite)"})})})}function NM(){const e=Z.useHasActiveSubframe()===!1,t=Z.useSetActiveSubframeIndex();return l.jsx(AM,{isSelected:e,onClick:()=>t(null)})}function FM({type:e}){const t=F.useContext(Lt);return l.jsx("div",{className:`group shrink-0 border-2 border-gray-300 hover:border-blue-500\r
        cursor-pointer transition-colors`,style:{width:lh,height:Es},onClick:()=>t.importImages(e),children:l.jsx("div",{className:"w-full h-full flex justify-center items-center overflow-hidden",children:l.jsx(ie.Plus,{className:"text-gray-400 group-hover:text-blue-500 transition-colors",size:24})})})}function uS({type:e,itemLength:t,renderItem:n,showCompositeItem:r}){return l.jsxs(sS,{minHeight:Es,children:[r&&l.jsx(NM,{}),t>0&&l.jsx(aS,{children:Array.from({length:t}).map((i,o)=>n(o))}),l.jsx(FM,{type:e})]})}function TM({activeEntryFramesLength:e,setActiveFrameIndex:t}){const n=He(r=>r.frameListMode);return n==="thumbs"?l.jsx(uS,{type:"frames",itemLength:e,renderItem:r=>l.jsx(IM,{frameIndex:r,setActiveFrameIndex:t},r)}):n==="minimal"?l.jsx(lS,{type:"frames",itemLength:e,renderItem:r=>l.jsx(oS,{type:"frame",index:r,onClick:()=>t(r)},r)}):null}function RM({type:e}){const t=He(r=>(e==="frames"?r.frameListMode:r.subframeListMode)==="collapsed"),n=He(r=>e==="frames"?r.actions.setFrameListMode:r.actions.setSubframeListMode);if(t)return l.jsx(Pe,{label:"Hidden (Show)",onClick:()=>n("thumbs")})}function PM(){const e=Z.useActiveEntryIndex(),t=Z.useActiveEntryFramesCount(),{exportFrameImages:n}=F.useContext(Lt);if(e!==null)return l.jsx("div",{className:"text-xs",children:l.jsx(Pe,{label:"Export all",onClick:n,disabled:t===0})})}function DM(){const e=Z.useActiveFrameIndex(),t=Z.useActiveFrameSubframesCount(),{exportFrameImages:n}=F.useContext(Lt);if(e!==null)return l.jsx("div",{className:"text-xs",children:l.jsx(Pe,{label:"Export all",onClick:()=>n(e),disabled:t===void 0||t===0})})}function fS({type:e,children:t}){return l.jsxs("div",{className:"w-full flex flex-col",children:[l.jsxs("div",{className:"flex justify-between~ items-baseline text-sm space-x-1.5 mb-0.5",children:[l.jsxs("div",{className:"font-bold text-gray-700",children:[e==="frames"?"Frames":"Subframes",":"]}),e==="frames"&&l.jsx(PM,{}),e==="subframes"&&l.jsx(DM,{}),l.jsx(RM,{type:e})]}),t]})}function MM(){const e=Z.useOptionalActiveEntryFramesLength(),t=Z.useSetActiveFrameIndex();return e===void 0?null:l.jsx(fS,{type:"frames",children:l.jsx(TM,{activeEntryFramesLength:e,setActiveFrameIndex:t})})}function OM({frameIndex:e,subframeIndex:t,setActiveSubframeIndex:n}){const r=Z.useSubframeDataAt(e,t),i=Z.useIsSubframeSelectedAt(t);return l.jsx(cS,{index:t,frameData:r,isSelected:i,onClick:()=>n(t)})}function LM({activeFrameLayersLength:e,activeFrameIndex:t,setActiveSubframeIndex:n}){const r=He(i=>i.subframeListMode);return r==="thumbs"?l.jsx(uS,{type:"subframes",itemLength:e??0,renderItem:i=>l.jsx(OM,{frameIndex:t,subframeIndex:i,setActiveSubframeIndex:n},i),showCompositeItem:e!==null}):r==="minimal"?l.jsx(lS,{type:"subframes",itemLength:e??0,renderItem:i=>l.jsx(oS,{type:"subframe",index:i,onClick:()=>n(i)},i),showCompositeItem:e!==null}):null}function BM(){const e=Z.useOptionalActiveFrameLayersLength(),t=Z.useActiveFrameIndex(),n=Z.useSetActiveSubframeIndex();return t===null?null:l.jsx(fS,{type:"subframes",children:l.jsx(LM,{activeFrameLayersLength:e,activeFrameIndex:t,setActiveSubframeIndex:n})})}function uy(){return l.jsx("div",{style:{height:Ec,width:Ec}})}function $M(){const e=Z.useHasActiveEntry(),t=Z.useHasActiveFrame();return l.jsx(As,{children:l.jsxs("div",{className:"grow flex flex-col overflow-hidden",children:[l.jsx("div",{className:"flex flex-col",children:l.jsx(MM,{})}),l.jsx(uy,{}),l.jsx("div",{className:"grow overflow-hidden",children:e&&l.jsx(_M,{})}),l.jsx(uy,{}),l.jsx("div",{className:"flex flex-col",children:t&&l.jsx(BM,{})})]})})}const gl="px-2 py-1 text-left border~ border-gray-300",xl="px-2 py-1";function UM(){const e=Z.useEntries(),t=Z.useActiveEntryIndex(),n=Z.useSetActiveEntryIndex();return l.jsxs("table",{className:"text-xs text-black",children:[l.jsx("thead",{className:"sticky top-0 bg-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:`${gl}`,children:"#"}),l.jsx("th",{className:`${gl} w-full`,children:"Name"}),l.jsx("th",{className:`${gl}`,children:"Frames"}),l.jsx("th",{className:`${gl}`,children:"Subframes"})]})}),l.jsx("tbody",{children:e.map((r,i)=>{const o=i===t,a=r.frames.reduce((c,u)=>{const f=u.frameData.kind==="multi"?u.frameData.layers.length:0;return c+f},0);let s;return o?s="bg-sky-200":s=i%2===0?"bg-white hover:bg-sky-100":"bg-gray-50 hover:bg-sky-100",l.jsxs("tr",{className:`${s} cursor-pointer`,onClick:()=>{n(i)},children:[l.jsx("td",{className:`${xl}`,children:i+1}),l.jsx("td",{title:r.name,className:`${xl} w-full truncate`,style:{maxWidth:150},children:r.name}),l.jsx("td",{className:`${xl}`,children:r.frames.length}),l.jsx("td",{className:`${xl}`,children:a})]},i)})})]})}function zM(){const e=Z.useEntriesLength();return l.jsx(As,{children:l.jsxs("div",{className:"grow flex flex-col overflow-hidden bg-white",children:[l.jsxs("div",{className:"text-center text-sm font-bold text-slate-600 py-1",children:["Sequences (",e,")"]}),l.jsx("div",{className:"grow overflow-auto",children:l.jsx("div",{className:"relative",children:l.jsx(UM,{})})})]})})}function GM(){const e=Z.useFormat(),t=e==="gaf"?"border-orange-300 bg-orange-200 text-orange-700":e==="taf-pair"?"border-violet-300 bg-violet-200 text-violet-700":"border-red-300 bg-red-200 text-red-700";return l.jsx(As,{children:l.jsxs("div",{className:`p-1 text-center text-sm font-bold bg-gradient-to-b border-2 ${t}`,children:[l.jsxs("span",{children:["Current format:"," "]}),l.jsx("span",{children:e==="gaf"?"GAF":e==="taf-pair"?"TAF Pair":l.jsx(WM,{})})]})})}function WM(){return`TAF Solo (${Io.useSubFormat()==="taf_1555"?"1555":"4444"})`}const yd="px-1 py-0.5 text-left",wd="px-1 py-0.5";function HM({currentPalette:e,setCurrentPalette:t}){const[n,r]=F.useState(!1),i=F.useRef(null),o=F.useCallback(async f=>{if(!n){r(!0);try{const d=await Ot.loadFromPcxFile(f),p=Ot.compilePreviewImage(d);t({kind:"custom-file",palette:d,originFile:f,previewImage:p})}catch{}finally{r(!1)}}},[n,r,t]),a=F.useCallback(()=>{i.current!==null&&i.current.click()},[]);let s,c,u;switch(e.kind){case"raw":s="(None)",c=null,u=e.customName??"(Raw bytes)";break;case"custom-file":s=e.originFile.name,c="TODO",u="(Custom file)";break;case"world":s=e.fileName,c="TODO",u=e.world;break;default:throw new Error("")}return l.jsx("table",{className:"text-xs",children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("th",{className:`${yd}`,children:"File:"}),l.jsx("td",{className:`${wd}`,children:c===null?l.jsx("span",{children:s}):l.jsx(ub,{href:c,newTab:!0,children:s})})]}),l.jsxs("tr",{children:[l.jsx("th",{className:`${yd}`,children:"Name:"}),l.jsx("td",{className:`${wd}`,children:u})]}),l.jsxs("tr",{children:[l.jsx("th",{className:`${yd}`,children:"Options:"}),l.jsxs("td",{className:`${wd}`,children:[l.jsx(Pe,{label:"Change",onClick:a}),l.jsx("input",{ref:i,style:{display:"none"},type:"file",onChange:f=>{f.preventDefault();const d=f.target.files;d&&d.length===1&&o(d[0])},accept:".pcx"})]})]})]})})}function VM(){const e=Mr.useCurrentPalette(),t=Mr.useSetCurrentPalette();return l.jsx("div",{className:"flex flex-col overflow-auto p-1",children:l.jsxs("div",{className:"flex flex-wrap",children:[l.jsx("div",{className:"m-1",children:l.jsx(HM,{currentPalette:e,setCurrentPalette:t})}),l.jsx("div",{className:"m-1",children:l.jsx(fb,{currentPalette:e})})]})})}function KM(){const[e,t]=F.useState(!0);return l.jsxs(As,{children:[l.jsx(Ul,{expanded:e,setExpanded:t,children:"Workspace Palette"}),e&&l.jsx("div",{className:"grow flex flex-col overflow-hidden bg-white",children:l.jsx(VM,{})})]})}function im({dir:e,resizable:t,handleRef:n}){const r=t?`hover:bg-slate-400 ${e==="H"?"cursor-col-resize":"cursor-row-resize"}`:"";return l.jsx("div",{ref:n,className:`${r} flex justify-center items-center bg-slate-300`,style:{minWidth:Ec,minHeight:Ec},children:t&&l.jsx("div",{className:"bg-white rounded-sm",style:{width:e==="H"?vg:gg,height:e==="H"?gg:vg}})})}function ZM(){const e=Z.useGafFormat()==="gaf";return l.jsxs("div",{className:"grow flex flex-col overflow-hidden",children:[l.jsx("div",{className:"flex flex-col",children:l.jsx(GM,{})}),e&&l.jsxs(l.Fragment,{children:[l.jsx(im,{dir:"V"}),l.jsx("div",{className:"flex flex-col",children:l.jsx(KM,{})})]}),l.jsx(im,{dir:"V"}),l.jsx("div",{className:"grow flex flex-col overflow-hidden",children:l.jsx(zM,{})})]})}function fy({dir:e,childA:t,childB:n,dominantChild:r,subordinateChildMinSize:i,subordinateChildMaxSize:o}){const a=F.useRef(null),s=F.useRef(null);F.useEffect(()=>{const u=a.current,f=s.current;if(u===null||f===null)return;let d,p;const h=_=>{_.preventDefault(),d=e==="H"?_.clientX:_.clientY,p=e==="H"?u.clientWidth:u.clientHeight},g=_=>{if(d===void 0||p===void 0)return;const x=r==="B"?1:-1;if(e==="H"){const E=_.clientX-d;u.style.width=p+E*x+"px"}else{const E=_.clientY-d;u.style.height=p+E*x+"px"}},w=()=>{d=void 0};return f.addEventListener("mousedown",h),document.body.addEventListener("mousemove",g),document.body.addEventListener("mouseup",w),window.addEventListener("blur",w),()=>{f.removeEventListener("mousedown",h),document.body.removeEventListener("mousemove",g),document.body.removeEventListener("mouseup",w),window.removeEventListener("blur",w)}},[e,r]);const c=e==="H"?"flex-row":"flex-col";return l.jsxs("div",{className:`${c} h-full flex overflow-hidden`,children:[l.jsx("div",{ref:r!=="A"?a:void 0,className:`${r==="A"?"grow":""} max-w-full flex flex-col overflow-hidden`,style:{minWidth:r!=="A"&&e==="H"?i:void 0,minHeight:r!=="A"&&e==="V"?i:void 0,maxWidth:r!=="A"&&e==="H"?o:void 0,maxHeight:r!=="A"&&e==="V"?o:void 0},children:t}),l.jsx(im,{dir:e,resizable:!0,handleRef:s}),l.jsx("div",{ref:r!=="B"?a:void 0,className:`${r==="B"?"grow basis-0":""} max-w-full flex flex-col overflow-hidden`,style:{minWidth:r!=="B"&&e==="H"?i:void 0,minHeight:r!=="B"&&e==="V"?i:void 0,maxWidth:r!=="B"&&e==="H"?o:void 0,maxHeight:r!=="B"&&e==="V"?o:void 0},children:n})]})}function qM(){const e=l.jsx(ZM,{}),t=l.jsx(tD,{}),n=l.jsx($M,{}),r=l.jsx(fy,{dir:"H",childA:t,childB:n,dominantChild:"B",subordinateChildMinSize:300,subordinateChildMaxSize:"50%"});return l.jsx("div",{className:"h-full flex flex-col",children:l.jsx("div",{className:"grow flex flex-col overflow-hidden",children:l.jsx(fy,{dir:"H",childA:e,childB:r,dominantChild:"B",subordinateChildMinSize:320,subordinateChildMaxSize:"50%"})})})}const YM=300,XM="50vw";function QM({config:e,close:t}){const n=e.titleColor==="error"?"bg-red-800":"bg-sky-700";return l.jsxs("div",{className:"grow flex flex-col overflow-hidden",style:{minWidth:YM,maxWidth:XM},children:[l.jsxs("div",{className:`${n} flex text-white font-bold rounded-tl-sm rounded-tr-sm`,children:[l.jsx("div",{className:"overflow-hidden grow flex items-center p-2",children:l.jsx("div",{className:"truncate",children:e.title})}),t!==void 0&&l.jsx("button",{className:"flex items-center p-2 hover:bg-[#00000020]",onClick:t,children:l.jsx(ie.Close,{size:20})})]}),l.jsx("div",{className:"overflow-auto bg-white text-slate-700 rounded-bl-sm rounded-br-sm",children:e.body})]})}const JM=100;function eO({children:e,zOffset:t,close:n}){const r=t===0?"bg-[#00000060]":"bg-[#0000004F]";return l.jsx("div",{style:{zIndex:JM+t},className:`absolute inset-0 flex flex-col justify-center items-center max-h-screen overflow-hidden px-4 py-4 ${r}`,onClick:n,children:l.jsx("div",{className:"flex flex-col overflow-hidden shadow",onClick:i=>i.stopPropagation(),children:e})})}function tO({controllerRef:e}){const[t,n]=F.useState([]),r=F.useCallback(s=>{n(c=>c.filter(u=>u.config===s?(u.onClosed(),!1):!0))},[]),i=F.useCallback(s=>{const c=new Promise(u=>{const f={config:s,onClosed:u};n(d=>[...d,f])});return{close:()=>r(s),hasClosed:c}},[r]),o=F.useCallback(()=>{t.length!==0&&n(t.slice(0,-1))},[t]);e.current={pushModal:i,popModal:o};const a=t.map((s,c)=>{const u=s.config,f=()=>r(u);return l.jsx(eO,{zOffset:c,close:u.disableBackgroundClose?void 0:f,children:l.jsx(QM,{config:s.config,close:u.disableXClose?void 0:f})},c)});return xu.createPortal(a,document.body)}function nO({label:e,confirmLabel:t,cancelLabel:n,defaultColor:r,enableAlpha:i,resolve:o}){const[a,s]=F.useState(r),c=`rgba(${a.r}, ${a.g}, ${a.b}, ${i?a.a/255:1})`;return l.jsxs("div",{className:"flex flex-col items-center p-4",children:[l.jsx("div",{className:"mb-2 font-semibold",children:e}),l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"mr-4",style:{background:c,width:48,height:48}}),l.jsxs("div",{className:"flex flex-col space-y-1",children:[l.jsx(yl,{sample:"r",color:a,setColor:s}),l.jsx(yl,{sample:"g",color:a,setColor:s}),l.jsx(yl,{sample:"b",color:a,setColor:s}),i&&l.jsx(yl,{sample:"a",color:a,setColor:s})]})]}),l.jsxs("div",{className:"flex justify-center space-x-4",children:[l.jsx(ne,{color:"success",onClick:()=>o(a),children:t??"Confirm"}),l.jsx(ne,{color:"danger",onClick:()=>o(null),children:n??"Cancel"})]})]})}function yl({sample:e,color:t,setColor:n}){const r=t[e];return l.jsxs("div",{className:"flex",children:[l.jsxs("div",{className:"font-mono mr-2",children:[e.toUpperCase(),":"]}),l.jsx(hs,{min:0,max:255,value:r,setValue:i=>{n({...t,[e]:i})}})]})}const rO=e=>t=>{let n=!1;return new Promise(r=>{const{hasClosed:i,close:o}=e.pushModal({disableBackgroundClose:t.disableBackgroundClose,disableXClose:t.disableXClose,title:t.title,body:l.jsx(nO,{label:t.label,confirmLabel:t.confirmLabel,cancelLabel:t.cancelLabel,defaultColor:t.defaultColor,enableAlpha:t.enableAlpha,resolve:a=>{n||(n=!0,r(a),o())}})});i.then(()=>{n||(n=!0,r(null))})})};function iO({resolve:e,text:t,confirmLabel:n,rejectLabel:r,confirmColor:i,rejectColor:o}){return l.jsxs("div",{className:"flex flex-col p-4",children:[l.jsx("div",{className:"mb-4",children:t}),l.jsxs("div",{className:"flex justify-center space-x-4",children:[l.jsx(ne,{color:i??"success",onClick:()=>e(!0),children:n}),l.jsx(ne,{color:o??"danger",onClick:()=>e(!1),children:r})]})]})}const oO=e=>t=>{let n=!1;return new Promise(r=>{const{hasClosed:i,close:o}=e.pushModal({disableBackgroundClose:t.disableBackgroundClose,disableXClose:t.disableXClose,title:t.title,body:l.jsx(iO,{confirmLabel:t.confirmLabel??"Yes",rejectLabel:t.rejectLabel??"No",confirmColor:t.confirmColor,rejectColor:t.rejectColor,text:t.text,resolve:a=>{n||(n=!0,r(a),o())}})});i.then(()=>{n||(n=!0,r(null))})})},aO=e=>t=>{let n=!1;return new Promise(r=>{const{hasClosed:i,close:o}=e.pushModal({disableBackgroundClose:t.disableBackgroundClose,disableXClose:t.disableXClose,title:t.title,body:t.makeModalBody({resolve:(...a)=>{r(...a),o()},close:()=>o()})});i.then(()=>{n||(n=!0,r(null))})})},sO=e=>t=>{let n=!1;return new Promise(r=>{const{hasClosed:i,close:o}=e.pushModal({disableBackgroundClose:t.disableBackgroundClose,disableXClose:t.disableXClose,title:t.title,body:l.jsx(Ph,{label:t.label,submitLabel:t.submitLabel,cancelLabel:t.cancelLabel,min:t.min,max:t.max,isFloat:t.isFloat,defaultValue:t.defaultValue,resolve:a=>{n||(n=!0,r(a),o())}})});i.then(()=>{n||(n=!0,r(null))})})};function dy({children:e}){const t=F.useRef(null),n=F.useCallback(o=>t.current!==null?t.current.pushModal(o):{close:()=>{},hasClosed:Promise.resolve()},[]),r=F.useCallback(()=>{t.current!==null&&t.current.popModal()},[]),i=F.useMemo(()=>{const o={pushModal:n,popModal:r};return{confirmPrompt:oO(o),customPrompt:aO(o),numberPrompt:sO(o),colorPrompt:rO(o)}},[n,r]);return l.jsx(l.Fragment,{children:l.jsx(sr.Provider,{value:{pushModal:n,popModal:r},children:l.jsxs(ks.Provider,{value:i,children:[e,l.jsx(tO,{controllerRef:t})]})})})}const py=["xOffset","yOffset","unknown2","unknown3"],Gh=(e,t,n)=>({cursor:{entryIndex:null,frameIndex:null,subframeIndex:null},commonActions:{setCursor:r=>e({cursor:r}),getEntries:()=>t().abstractActions.getCurrentGaf().virtualGaf.entries,setEntries:r=>{const i=t().abstractActions.getCurrentGaf();t().abstractActions.setCurrentGaf({...i,virtualGaf:{...i.virtualGaf,entries:r}})},setActiveEntryIndex:r=>{if(r===t().cursor.entryIndex)return;const i={entryIndex:r,frameIndex:null,subframeIndex:null};if(r===null){e({cursor:i});return}const o=t().commonActions.getEntries()[r];if(o.frames.length===0){e({cursor:i});return}i.frameIndex=0;const a=o.frames[0];if(a.frameData.kind==="single"||a.frameData.layers.length===0){e({cursor:i});return}i.subframeIndex=0,e({cursor:i})},setActiveFrameIndex:r=>{const{entryIndex:i}=t().cursor;if(i===null)throw new Error("No active entry.");const o={entryIndex:i,frameIndex:r,subframeIndex:null};if(r===null){e({cursor:o});return}const s=t().commonActions.getEntries()[i].frames[r];if(s.frameData.kind==="single"||s.frameData.layers.length===0){e({cursor:o});return}o.subframeIndex=0,e({cursor:o})},setActiveSubframeIndex:r=>{const{entryIndex:i,frameIndex:o}=t().cursor;if(i===null)throw new Error("No active entry.");if(o===null)throw new Error("No active frame.");e({cursor:{entryIndex:i,frameIndex:o,subframeIndex:r}})},getActiveEntry:()=>{const{entryIndex:r}=t().cursor;return r===null?null:t().commonActions.getEntries()[r]},getActiveFrame:()=>{const{frameIndex:r}=t().cursor;return r===null?null:t().commonActions.getActiveEntry().frames[r]},getActiveSubframe:()=>{const{subframeIndex:r}=t().cursor;if(r===null)return null;const i=t().commonActions.getActiveFrame();if(i.frameData.kind==="single")throw new Error("Active frame doesn't have subframes.");return i.frameData.layers[r]},replaceEntry:(r,i)=>{const o=t().commonActions.getEntries(),a=go.update(o,r,i);t().commonActions.setEntries(a)},replaceFrame:(r,i,o)=>{const a=t().commonActions.getEntries()[r],s={...a,frames:go.update(a.frames,i,o)};t().commonActions.replaceEntry(r,s)},replaceSubframe:(r,i,o,a)=>{const c=t().commonActions.getEntries()[r].frames[i],u=c.frameData;if(u.kind==="single")throw new Error("Frame doesn't have subframes.");const f={...u,layers:go.update(u.layers,o,a)},d={...c,frameData:f};t().commonActions.replaceFrame(r,i,d)},replaceFrameImageData:(r,i,o)=>{const c=t().commonActions.getEntries()[r].frames[i];if(c.frameData.kind==="multi")throw new Error("Frame is not single-layered.");const u={...c,frameData:o};t().commonActions.replaceFrame(r,i,u)},replaceSubframeImageData:(r,i,o,a)=>{t().commonActions.replaceSubframe(r,i,o,a)},modifyActiveFrameData:r=>{r=ps.select(r,py);const{entryIndex:i,frameIndex:o}=t().cursor;if(i===null)throw new Error("No active entry.");if(o===null)throw new Error("No active frame.");const s=t().commonActions.getEntries()[i].frames[o],c={...s,frameData:{...s.frameData,...r}};t().commonActions.replaceFrame(i,o,c)},modifyActiveSubframeData:r=>{r=ps.select(r,py);const{entryIndex:i,frameIndex:o,subframeIndex:a}=t().cursor;if(a===null)throw new Error("No active subframe.");const s=t().commonActions.getActiveFrame();if(s.frameData.kind==="single")throw new Error("Active frame doesn't have subframes.");const f={...s.frameData.layers[a],...r};t().commonActions.replaceSubframe(i,o,a,f)},modifyActiveFrameDuration:r=>{const{entryIndex:i,frameIndex:o}=t().cursor;if(i===null)throw new Error("No active entry.");if(o===null)throw new Error("No active frame.");const s={...t().commonActions.getEntries()[i].frames[o],duration:r};t().commonActions.replaceFrame(i,o,s)},modifyActiveSequenceFrameDuration:r=>{const{entryIndex:i}=t().cursor;if(i===null)throw new Error("No active entry.");const o=t().commonActions.getEntries()[i],a={...o,frames:o.frames.map(s=>({...s,duration:r}))};t().commonActions.replaceEntry(i,a)},convertSingleFrameToMultiFrame:(r,i)=>{const s=t().commonActions.getEntries()[r].frames[i];if(s.frameData.kind==="multi")throw new Error("Frame is already multi-layered.");const c={...s.frameData,kind:"multi",layers:[{...s.frameData}]},u={...s,frameData:c};t().commonActions.replaceFrame(r,i,u),t().commonActions.setCursor({entryIndex:r,frameIndex:i,subframeIndex:0})},convertMultiFrameToSingleFrame:(r,i)=>{const s=t().commonActions.getEntries()[r].frames[i];if(s.frameData.kind==="single")throw new Error("Frame is already single-layered.");if(s.frameData.layers.length!==1)throw new Error("Frame must have exactly 1 subframe to be converted to single-layered.");const c=s.frameData.layers[0],u={...s,frameData:c};t().commonActions.replaceFrame(r,i,u),t().commonActions.setCursor({entryIndex:r,frameIndex:i,subframeIndex:null})},convertActiveFrameToMultiFrame:r=>{const i=t().commonActions.getActiveFrame();if(i===null)throw new Error("No active frame.");if(i.frameData.kind==="multi"&&r)return!1;const{entryIndex:a,frameIndex:s}=t().cursor;return t().commonActions.convertSingleFrameToMultiFrame(a,s),!0},convertActiveFrameToSingleFrame:r=>{const i=t().commonActions.getActiveFrame();if(i===null)throw new Error("No active frame.");if(i.frameData.kind==="single"&&r)return!1;const{entryIndex:a,frameIndex:s}=t().cursor;return t().commonActions.convertMultiFrameToSingleFrame(a,s),!0},createEntry:r=>{const i=t().commonActions.getEntries();if(i.some(c=>c.name===r))throw new Error("An entry with this name already exists.");const a={name:r,frames:[],unknown1:kt.Constants.USUAL_ENTRY_UNKNOWN1,unknown2:kt.Constants.USUAL_ENTRY_UNKNOWN2},s=[...i,a];t().commonActions.setEntries(s),t().commonActions.setCursor({entryIndex:s.length-1,frameIndex:null,subframeIndex:null})},renameEntry:(r,i)=>{const o=t().commonActions.getEntries();if(o.some((u,f)=>f!==r&&u.name===i))throw new Error("An entry with this name already exists.");const c={...o[r],name:i};t().commonActions.replaceEntry(r,c)},renameActiveEntry:r=>{const i=t().cursor.entryIndex;if(i===null)throw new Error("No active entry.");t().commonActions.renameEntry(i,r)},deleteEntry:r=>{const o=[...t().commonActions.getEntries()];o.splice(r,1),t().commonActions.setEntries(o),e({cursor:{entryIndex:null,frameIndex:null,subframeIndex:null}})},deleteActiveEntry:()=>{const r=t().cursor.entryIndex;if(r===null)throw new Error("No active entry.");t().commonActions.deleteEntry(r)},addFrames:(r,i)=>{const o=t().commonActions.getEntries()[r],a={...o,frames:[...o.frames,...i]};t().commonActions.replaceEntry(r,a),t().commonActions.setActiveFrameIndex(a.frames.length-1)},addFramesToActiveEntry:r=>{const{entryIndex:i}=t().cursor;t().commonActions.addFrames(i,r)},addSubframes:(r,i,o)=>{const a=t().commonActions.getEntries()[r].frames[i];if(a.frameData.kind==="single")throw new Error("Frame does not have subframes.");const s=[...a.frameData.layers,...o],c={...a,frameData:{...a.frameData,layers:s}};t().commonActions.replaceFrame(r,i,c),t().commonActions.setActiveSubframeIndex(s.length-1)},addSubframesToActiveFrame:r=>{const{entryIndex:i,frameIndex:o}=t().cursor;t().commonActions.addSubframes(i,o,r)},deleteFrame:(r,i)=>{const a=t().commonActions.getEntries()[r],s=[...a.frames];s.splice(i,1);const c={...a,frames:s};t().commonActions.replaceEntry(r,c),t().commonActions.setCursor({entryIndex:r,frameIndex:null,subframeIndex:null})},deleteSubframe:(r,i,o)=>{const c=t().commonActions.getEntries()[r].frames[i];if(c.frameData.kind!=="multi")throw new Error("Frame is not multi-layered.");const u=[...c.frameData.layers];u.splice(o,1);const f={...c,frameData:{...c.frameData,layers:u}};t().commonActions.replaceFrame(r,i,f),t().commonActions.setCursor({entryIndex:r,frameIndex:i,subframeIndex:null})},deleteActiveFrame:()=>{const{entryIndex:r,frameIndex:i}=t().cursor;if(r===null)throw new Error("No entry selected.");if(i===null)throw new Error("No frame selected");t().commonActions.deleteFrame(r,i)},deleteActiveSubframe:()=>{const{entryIndex:r,frameIndex:i,subframeIndex:o}=t().cursor;if(r===null)throw new Error("No entry selected.");if(i===null)throw new Error("No frame selected");if(o===null)throw new Error("No subframe selected");t().commonActions.deleteSubframe(r,i,o)}}});var om;(e=>{function t(o,a){return a.map(s=>({...s,frames:s.frames.map(c=>({...c,frameData:c.frameData.kind==="single"?n(o,c.frameData):r(o,c.frameData)}))}))}e.recompileVirtualGafEntries=t;function n(o,a){return{...a,layerData:i(o,a.layerData,a)}}function r(o,a){return{...a,layers:a.layers.map(s=>n(o,s))}}function i(o,a,{width:s,height:c,transparencyIndex:u}){const f=Ot.createColorData(s,c,u,a.imageResource.paletteIndices,o.palette),d=o.imageCompiler.compileImage(s,c,f);return{...a,imageResource:{...a.imageResource,compiledImage:d}}}})(om||(om={}));const lO=e=>yu((t,n,r)=>{const i=Gh(t,n);return{format:"gaf",gafFormat:"gaf",currentGaf:e.initialGaf,currentPalette:e.initialPalette,cursor:i.cursor,abstractActions:{getCurrentGaf:()=>n().currentGaf,setCurrentGaf:o=>t({currentGaf:o})},commonActions:{...i.commonActions},gafOnlyActions:{setCurrentPalette:o=>{if(n().currentPalette.palette===o.palette)return;const s=performance.now(),c=n().currentGaf;if(c.format!=="gaf")throw new Error(`Expected a GAF format but got: ${c.format}`);const u=om.recompileVirtualGafEntries({palette:o.palette,imageCompiler:new Wo},c.virtualGaf.entries),f={...c.virtualGaf,entries:u},d=performance.now()-s;console.log(`Took ${d}ms to create recompile the Virtual Gaf tree.`),t({currentPalette:o,currentGaf:{...c,virtualGaf:f}})}}}}),cO=e=>yu((t,n,r)=>{const i=Gh(t,n);return{format:"taf-solo",gafFormat:"taf",mode:"solo",currentTaf:e.initialGaf,subFormat:e.subFormat,cursor:i.cursor,abstractActions:{getCurrentGaf:()=>n().currentTaf,setCurrentGaf:o=>t({currentTaf:o})},commonActions:{...i.commonActions},tafSoloOnlyActions:{}}}),uO=_u.baseUrl+"/palettes/",my=[{key:"ara_textures.pcx",label:"Aramon Units"},{key:"aramon_features.pcx",label:"Aramon Features"},{key:"tar_textures.pcx",label:"Taros Units"},{key:"taros_features.pcx",label:"Taros Features"},{key:"ver_textures.pcx",label:"Veruna Units"},{key:"veruna_features.pcx",label:"Veruna Features"},{key:"zhon_features.pcx",label:"Zhon Units"},{key:"zon_textures.pcx",label:"Zhon Features"},{key:"cre_textures.pcx",label:"Creon Units"},{key:"creon_features.pcx",label:"Creon Features"}],dS="black-to-white",pS="white-to-black",fO=[{key:dS,label:"(Black-to-white)"},{key:pS,label:"(White-to-black)"}];function dO(){const e=new Wo,t=hy(!1),n=hy(!0),r=vy("Black-to-white",t,e),i=vy("White-to-black",n,e);async function o(s){if(s===dS)return r;if(s===pS)return i;const c=my.find(g=>g.key===s);if(c===void 0)throw new Error(`Unknown pre-selectable palette key: ${s}`);const u=uO+c.key,f=await fetch(u).then(g=>g.arrayBuffer()),d=new Uint8Array(f),p=Ot.loadFromPcxFileData(d),h=Ot.compilePreviewImage(p);return{kind:"world",fileName:s,palette:p,previewImage:h,world:c.label}}const a=[...fO,...my];return{default:r,preSelectables:a,loadPreSelectable:o}}function hy(e){const t=new Uint8Array(768);for(let n=0;n<256;n++){const r=e?255-n:n;t[n*3+0]=r,t[n*3+1]=r,t[n*3+2]=r}return{rgbData:t}}function vy(e,t,n){return{kind:"raw",palette:t,previewImage:Ot.compilePreviewImage(t,n),customName:e}}function gy({icon:e,label:t,disabled:n,onClick:r,title:i}){const o=n?"text-slate-400":"text-slate-500 hover:bg-slate-300 active:bg-slate-300";return l.jsxs("button",{className:`${o} flex items-center px-1 py-0.5 whitespace-nowrap`,disabled:n,title:i,onClick:a=>{a.preventDefault(),r()},children:[l.jsx(e,{}),t!==void 0&&l.jsx("span",{className:"ml-0.5 text-xs font-bold",children:t})]})}function mS(){return l.jsx("div",{className:"self-stretch border-l border-slate-300 my-1 mx-1"})}function pO(){const t=Z.useFormat()==="gaf"?"GAF":"TAF",{createNewProject:n,exportResult:r}=F.useContext(Lt);return l.jsxs("div",{className:"flex items-center p-0.5",children:[l.jsx(gy,{icon:ie.NewFile,label:"New project",onClick:n}),l.jsx(mS,{}),l.jsx(gy,{icon:ie.ExportFile,label:`Export ${t}`,onClick:r})]})}function mO(){const e=Z.useCurrentGafFileName();return l.jsx("div",{className:"flex items-center px-1 py-0.5",children:l.jsxs("div",{className:"text-xs",children:[l.jsxs("span",{className:"text-slate-500 font-medium",children:["Loaded from file:"," "]}),e===null?l.jsx("span",{className:"text-slate-400 italic",children:"(None)"}):l.jsx("span",{className:"text-slate-500",children:e})]})})}function hO(){return l.jsxs("div",{className:"flex w-full overflow-x-auto overflow-y-hidden bg-slate-200",children:[l.jsx(pO,{}),l.jsx(mS,{}),l.jsx(mO,{})]})}function vO(){const e=Z.useActiveEntryIndex(),t=Z.useActiveFrameIndex(),n=Z.useOptionalActiveFrameDataKind(),r=F.useContext(Lt);return l.jsxs(En,{label:"Frame",children:[l.jsx(lt,{label:"Create frame(s)",disabled:e===null,onClick:()=>r.importImages("frames")}),l.jsx(Ts,{}),l.jsxs(En,{label:"Convert frame to...",disabled:t===null,children:[l.jsx(lt,{label:"Single-layered",disabled:n===null||n==="single",onClick:()=>r.convertToSingle()}),l.jsx(lt,{label:"Multi-layered",disabled:n===null||n==="multi",onClick:()=>r.convertToMulti()})]}),l.jsx(lt,{label:"Delete frame",disabled:t===null,onClick:()=>r.deleteFrame()})]})}function gO({label:e}){return l.jsx("div",{className:`px-2 py-1 font-bold text-slate-400 hover:text-slate-500 transition-colors\r
        whitespace-nowrap`,children:e})}function xO({label:e,onClick:t}){return l.jsx("button",{className:"bg-slate-100 hover:bg-slate-200 active:bg-slate-200 px-2 py-1 whitespace-nowrap",onClick:n=>{n.preventDefault(),t()},children:e})}function yO(){const e=Z.useActiveEntryIndex(),{changeFrameDuration:t,exportEveryImage:n}=F.useContext(Lt);return l.jsxs(En,{label:"Tools",children:[l.jsx(En,{label:"Helper functions",children:l.jsx(lt,{label:"Change frame duration for sequence",disabled:e===null,onClick:()=>t(!0)})}),l.jsx(lt,{label:"Export every image",onClick:n})]})}function wO(){const e=Z.useActiveFrameIndex(),t=Z.useActiveSubframeIndex(),n=F.useContext(Lt);return l.jsxs(En,{label:"Subframe",children:[l.jsx(lt,{label:"Create subframe(s)",disabled:e===null,onClick:()=>n.importImages("subframes")}),l.jsx(Ts,{}),l.jsx(lt,{label:"Delete subframe",disabled:t===null,onClick:()=>n.deleteSubframe()})]})}function bO(){const e=He(i=>i.frameListMode),t=He(i=>i.actions.setFrameListMode),n=He(i=>i.subframeListMode),r=He(i=>i.actions.setSubframeListMode);return l.jsxs(En,{label:"View",children:[l.jsxs(En,{label:"Frame selector",children:[l.jsx(zi,{label:"Thumbnails",checked:e==="thumbs",onChange:()=>t("thumbs")}),l.jsx(zi,{label:"Minimalist",checked:e==="minimal",onChange:()=>t("minimal")}),l.jsx(zi,{label:"Hidden",checked:e==="collapsed",onChange:()=>t("collapsed")})]}),l.jsxs(En,{label:"Subframe selector",children:[l.jsx(zi,{label:"Thumbnails",checked:n==="thumbs",onChange:()=>r("thumbs")}),l.jsx(zi,{label:"Minimalist",checked:n==="minimal",onChange:()=>r("minimal")}),l.jsx(zi,{label:"Hidden",checked:n==="collapsed",onChange:()=>r("collapsed")})]})]})}function kO(){const e=Z.useActiveEntryIndex(),t=F.useContext(Lt);return l.jsxs(En,{label:"Sequence",children:[l.jsx(lt,{label:"Create sequence",onClick:()=>t.createEntry()}),l.jsx(Ts,{}),l.jsx(lt,{label:"Rename sequence",disabled:e===null,onClick:()=>t.renameActiveEntry()}),l.jsx(lt,{label:"Delete sequence",disabled:e===null,onClick:()=>t.deleteActiveEntry()})]})}function EO(){const t=Z.useFormat()==="gaf"?"GAF":"TAF",{createNewProject:n,exportResult:r}=F.useContext(Lt);return l.jsxs(En,{label:"File",children:[l.jsx(lt,{label:"New project...",onClick:n}),l.jsx(Ts,{}),l.jsx(lt,{label:`Export ${t}...`,onClick:r})]})}function SO(){return l.jsxs("div",{className:"flex items-stretch w-full overflow-x-auto overflow-y-hidden bg-slate-100 p-0.5",children:[l.jsx(EO,{}),l.jsx(kO,{}),l.jsx(vO,{}),l.jsx(wO,{}),l.jsx(bO,{}),l.jsx(yO,{}),l.jsx(xO,{label:"Help",onClick:()=>{}}),l.jsx("div",{className:"grow flex justify-end",children:l.jsx(gO,{label:"GAF Studio Web v"+_u.version})})]})}function _O({children:e}){return l.jsx(xE,{children:l.jsxs("div",{className:"grow flex flex-col justify-start items-stretch overflow-hidden",children:[l.jsxs("div",{children:[l.jsx(SO,{}),l.jsx("div",{className:"border-b border-slate-300"}),l.jsx(hO,{}),l.jsx("div",{className:"border-b border-slate-400"})]}),l.jsx("div",{className:"grow overflow-hidden bg-window-panel",children:e})]})})}const jO=e=>yu((t,n,r)=>{const i=Gh(t,n);return{format:"taf-pair",gafFormat:"taf",mode:"pair",currentTaf:e.initialGaf,cursor:i.cursor,abstractActions:{getCurrentGaf:()=>n().currentTaf,setCurrentGaf:o=>t({currentTaf:o})},commonActions:{...i.commonActions},tafPairOnlyActions:{}}});function CO(){const[e,t]=F.useState();F.useEffect(()=>{JI()},[]);const n=F.useMemo(()=>dO(),[]),r=F.useCallback(i=>{if(i.format==="gaf")t({format:"gaf",store:lO(i.config)});else if(i.format==="taf-solo")t({format:"taf-solo",store:cO(i.config)});else if(i.format==="taf-pair")t({format:"taf-pair",store:jO(i.config)});else throw new Error("Unknown format.")},[]);return e===void 0?l.jsx(dy,{children:l.jsx(Xp.Provider,{value:n,children:l.jsx(ZP,{onInit:r})})}):l.jsx(Tw.Provider,{value:{resetWorkspace:()=>t(void 0)},children:l.jsx(ku.Provider,{value:e,children:l.jsx(dy,{children:l.jsx(FP,{children:l.jsx(Xp.Provider,{value:n,children:l.jsx(_O,{children:l.jsx(uD,{children:l.jsx(qM,{})})})})})})})})}var hS={},zu={};zu.byteLength=NO;zu.toByteArray=TO;zu.fromByteArray=DO;var Rn=[],tn=[],IO=typeof Uint8Array<"u"?Uint8Array:Array,bd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Gi=0,AO=bd.length;Gi<AO;++Gi)Rn[Gi]=bd[Gi],tn[bd.charCodeAt(Gi)]=Gi;tn[45]=62;tn[95]=63;function vS(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function NO(e){var t=vS(e),n=t[0],r=t[1];return(n+r)*3/4-r}function FO(e,t,n){return(t+n)*3/4-n}function TO(e){var t,n=vS(e),r=n[0],i=n[1],o=new IO(FO(e,r,i)),a=0,s=i>0?r-4:r,c;for(c=0;c<s;c+=4)t=tn[e.charCodeAt(c)]<<18|tn[e.charCodeAt(c+1)]<<12|tn[e.charCodeAt(c+2)]<<6|tn[e.charCodeAt(c+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=t&255;return i===2&&(t=tn[e.charCodeAt(c)]<<2|tn[e.charCodeAt(c+1)]>>4,o[a++]=t&255),i===1&&(t=tn[e.charCodeAt(c)]<<10|tn[e.charCodeAt(c+1)]<<4|tn[e.charCodeAt(c+2)]>>2,o[a++]=t>>8&255,o[a++]=t&255),o}function RO(e){return Rn[e>>18&63]+Rn[e>>12&63]+Rn[e>>6&63]+Rn[e&63]}function PO(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),i.push(RO(r));return i.join("")}function DO(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(PO(e,a,a+o>s?s:a+o));return r===1?(t=e[n-1],i.push(Rn[t>>2]+Rn[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(Rn[t>>10]+Rn[t>>4&63]+Rn[t<<2&63]+"=")),i.join("")}var Wh={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Wh.read=function(e,t,n,r,i){var o,a,s=i*8-r-1,c=(1<<s)-1,u=c>>1,f=-7,d=n?i-1:0,p=n?-1:1,h=e[t+d];for(d+=p,o=h&(1<<-f)-1,h>>=-f,f+=s;f>0;o=o*256+e[t+d],d+=p,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=r;f>0;a=a*256+e[t+d],d+=p,f-=8);if(o===0)o=1-u;else{if(o===c)return a?NaN:(h?-1:1)*(1/0);a=a+Math.pow(2,r),o=o-u}return(h?-1:1)*a*Math.pow(2,o-r)};Wh.write=function(e,t,n,r,i,o){var a,s,c,u=o*8-i-1,f=(1<<u)-1,d=f>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,g=r?1:-1,w=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+d>=1?t+=p/c:t+=p*Math.pow(2,1-d),t*c>=2&&(a++,c/=2),a+d>=f?(s=0,a=f):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a=a+d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=s&255,h+=g,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+h]=a&255,h+=g,a/=256,u-=8);e[n+h-g]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=zu,n=Wh,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=x,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const k=new Uint8Array(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,Uint8Array.prototype),Object.setPrototypeOf(k,m),k.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function a(k){if(k>i)throw new RangeError('The value "'+k+'" is invalid for option "size"');const m=new Uint8Array(k);return Object.setPrototypeOf(m,s.prototype),m}function s(k,m,v){if(typeof k=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(k)}return c(k,m,v)}s.poolSize=8192;function c(k,m,v){if(typeof k=="string")return p(k,m);if(ArrayBuffer.isView(k))return g(k);if(k==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(Q(k,ArrayBuffer)||k&&Q(k.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Q(k,SharedArrayBuffer)||k&&Q(k.buffer,SharedArrayBuffer)))return w(k,m,v);if(typeof k=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const j=k.valueOf&&k.valueOf();if(j!=null&&j!==k)return s.from(j,m,v);const D=_(k);if(D)return D;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof k[Symbol.toPrimitive]=="function")return s.from(k[Symbol.toPrimitive]("string"),m,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}s.from=function(k,m,v){return c(k,m,v)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function u(k){if(typeof k!="number")throw new TypeError('"size" argument must be of type number');if(k<0)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function f(k,m,v){return u(k),k<=0?a(k):m!==void 0?typeof v=="string"?a(k).fill(m,v):a(k).fill(m):a(k)}s.alloc=function(k,m,v){return f(k,m,v)};function d(k){return u(k),a(k<0?0:y(k)|0)}s.allocUnsafe=function(k){return d(k)},s.allocUnsafeSlow=function(k){return d(k)};function p(k,m){if((typeof m!="string"||m==="")&&(m="utf8"),!s.isEncoding(m))throw new TypeError("Unknown encoding: "+m);const v=E(k,m)|0;let j=a(v);const D=j.write(k,m);return D!==v&&(j=j.slice(0,D)),j}function h(k){const m=k.length<0?0:y(k.length)|0,v=a(m);for(let j=0;j<m;j+=1)v[j]=k[j]&255;return v}function g(k){if(Q(k,Uint8Array)){const m=new Uint8Array(k);return w(m.buffer,m.byteOffset,m.byteLength)}return h(k)}function w(k,m,v){if(m<0||k.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<m+(v||0))throw new RangeError('"length" is outside of buffer bounds');let j;return m===void 0&&v===void 0?j=new Uint8Array(k):v===void 0?j=new Uint8Array(k,m):j=new Uint8Array(k,m,v),Object.setPrototypeOf(j,s.prototype),j}function _(k){if(s.isBuffer(k)){const m=y(k.length)|0,v=a(m);return v.length===0||k.copy(v,0,0,m),v}if(k.length!==void 0)return typeof k.length!="number"||he(k.length)?a(0):h(k);if(k.type==="Buffer"&&Array.isArray(k.data))return h(k.data)}function y(k){if(k>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return k|0}function x(k){return+k!=k&&(k=0),s.alloc(+k)}s.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==s.prototype},s.compare=function(m,v){if(Q(m,Uint8Array)&&(m=s.from(m,m.offset,m.byteLength)),Q(v,Uint8Array)&&(v=s.from(v,v.offset,v.byteLength)),!s.isBuffer(m)||!s.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===v)return 0;let j=m.length,D=v.length;for(let z=0,K=Math.min(j,D);z<K;++z)if(m[z]!==v[z]){j=m[z],D=v[z];break}return j<D?-1:D<j?1:0},s.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(m,v){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return s.alloc(0);let j;if(v===void 0)for(v=0,j=0;j<m.length;++j)v+=m[j].length;const D=s.allocUnsafe(v);let z=0;for(j=0;j<m.length;++j){let K=m[j];if(Q(K,Uint8Array))z+K.length>D.length?(s.isBuffer(K)||(K=s.from(K)),K.copy(D,z)):Uint8Array.prototype.set.call(D,K,z);else if(s.isBuffer(K))K.copy(D,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=K.length}return D};function E(k,m){if(s.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||Q(k,ArrayBuffer))return k.byteLength;if(typeof k!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);const v=k.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&v===0)return 0;let D=!1;for(;;)switch(m){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return Bt(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return wt(k).length;default:if(D)return j?-1:Bt(k).length;m=(""+m).toLowerCase(),D=!0}}s.byteLength=E;function b(k,m,v){let j=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,m>>>=0,v<=m))return"";for(k||(k="utf8");;)switch(k){case"hex":return U(this,m,v);case"utf8":case"utf-8":return P(this,m,v);case"ascii":return W(this,m,v);case"latin1":case"binary":return I(this,m,v);case"base64":return O(this,m,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,m,v);default:if(j)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),j=!0}}s.prototype._isBuffer=!0;function S(k,m,v){const j=k[m];k[m]=k[v],k[v]=j}s.prototype.swap16=function(){const m=this.length;if(m%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<m;v+=2)S(this,v,v+1);return this},s.prototype.swap32=function(){const m=this.length;if(m%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<m;v+=4)S(this,v,v+3),S(this,v+1,v+2);return this},s.prototype.swap64=function(){const m=this.length;if(m%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<m;v+=8)S(this,v,v+7),S(this,v+1,v+6),S(this,v+2,v+5),S(this,v+3,v+4);return this},s.prototype.toString=function(){const m=this.length;return m===0?"":arguments.length===0?P(this,0,m):b.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(m){if(!s.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:s.compare(this,m)===0},s.prototype.inspect=function(){let m="";const v=e.INSPECT_MAX_BYTES;return m=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(m+=" ... "),"<Buffer "+m+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(m,v,j,D,z){if(Q(m,Uint8Array)&&(m=s.from(m,m.offset,m.byteLength)),!s.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(v===void 0&&(v=0),j===void 0&&(j=m?m.length:0),D===void 0&&(D=0),z===void 0&&(z=this.length),v<0||j>m.length||D<0||z>this.length)throw new RangeError("out of range index");if(D>=z&&v>=j)return 0;if(D>=z)return-1;if(v>=j)return 1;if(v>>>=0,j>>>=0,D>>>=0,z>>>=0,this===m)return 0;let K=z-D,ue=j-v;const $e=Math.min(K,ue),Ne=this.slice(D,z),Ue=m.slice(v,j);for(let Se=0;Se<$e;++Se)if(Ne[Se]!==Ue[Se]){K=Ne[Se],ue=Ue[Se];break}return K<ue?-1:ue<K?1:0};function A(k,m,v,j,D){if(k.length===0)return-1;if(typeof v=="string"?(j=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,he(v)&&(v=D?0:k.length-1),v<0&&(v=k.length+v),v>=k.length){if(D)return-1;v=k.length-1}else if(v<0)if(D)v=0;else return-1;if(typeof m=="string"&&(m=s.from(m,j)),s.isBuffer(m))return m.length===0?-1:R(k,m,v,j,D);if(typeof m=="number")return m=m&255,typeof Uint8Array.prototype.indexOf=="function"?D?Uint8Array.prototype.indexOf.call(k,m,v):Uint8Array.prototype.lastIndexOf.call(k,m,v):R(k,[m],v,j,D);throw new TypeError("val must be string, number or Buffer")}function R(k,m,v,j,D){let z=1,K=k.length,ue=m.length;if(j!==void 0&&(j=String(j).toLowerCase(),j==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(k.length<2||m.length<2)return-1;z=2,K/=2,ue/=2,v/=2}function $e(Ue,Se){return z===1?Ue[Se]:Ue.readUInt16BE(Se*z)}let Ne;if(D){let Ue=-1;for(Ne=v;Ne<K;Ne++)if($e(k,Ne)===$e(m,Ue===-1?0:Ne-Ue)){if(Ue===-1&&(Ue=Ne),Ne-Ue+1===ue)return Ue*z}else Ue!==-1&&(Ne-=Ne-Ue),Ue=-1}else for(v+ue>K&&(v=K-ue),Ne=v;Ne>=0;Ne--){let Ue=!0;for(let Se=0;Se<ue;Se++)if($e(k,Ne+Se)!==$e(m,Se)){Ue=!1;break}if(Ue)return Ne}return-1}s.prototype.includes=function(m,v,j){return this.indexOf(m,v,j)!==-1},s.prototype.indexOf=function(m,v,j){return A(this,m,v,j,!0)},s.prototype.lastIndexOf=function(m,v,j){return A(this,m,v,j,!1)};function C(k,m,v,j){v=Number(v)||0;const D=k.length-v;j?(j=Number(j),j>D&&(j=D)):j=D;const z=m.length;j>z/2&&(j=z/2);let K;for(K=0;K<j;++K){const ue=parseInt(m.substr(K*2,2),16);if(he(ue))return K;k[v+K]=ue}return K}function T(k,m,v,j){return G(Bt(m,k.length-v),k,v,j)}function N(k,m,v,j){return G(oe(m),k,v,j)}function L(k,m,v,j){return G(wt(m),k,v,j)}function $(k,m,v,j){return G(yt(m,k.length-v),k,v,j)}s.prototype.write=function(m,v,j,D){if(v===void 0)D="utf8",j=this.length,v=0;else if(j===void 0&&typeof v=="string")D=v,j=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(j)?(j=j>>>0,D===void 0&&(D="utf8")):(D=j,j=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-v;if((j===void 0||j>z)&&(j=z),m.length>0&&(j<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");D||(D="utf8");let K=!1;for(;;)switch(D){case"hex":return C(this,m,v,j);case"utf8":case"utf-8":return T(this,m,v,j);case"ascii":case"latin1":case"binary":return N(this,m,v,j);case"base64":return L(this,m,v,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,m,v,j);default:if(K)throw new TypeError("Unknown encoding: "+D);D=(""+D).toLowerCase(),K=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(k,m,v){return m===0&&v===k.length?t.fromByteArray(k):t.fromByteArray(k.slice(m,v))}function P(k,m,v){v=Math.min(k.length,v);const j=[];let D=m;for(;D<v;){const z=k[D];let K=null,ue=z>239?4:z>223?3:z>191?2:1;if(D+ue<=v){let $e,Ne,Ue,Se;switch(ue){case 1:z<128&&(K=z);break;case 2:$e=k[D+1],($e&192)===128&&(Se=(z&31)<<6|$e&63,Se>127&&(K=Se));break;case 3:$e=k[D+1],Ne=k[D+2],($e&192)===128&&(Ne&192)===128&&(Se=(z&15)<<12|($e&63)<<6|Ne&63,Se>2047&&(Se<55296||Se>57343)&&(K=Se));break;case 4:$e=k[D+1],Ne=k[D+2],Ue=k[D+3],($e&192)===128&&(Ne&192)===128&&(Ue&192)===128&&(Se=(z&15)<<18|($e&63)<<12|(Ne&63)<<6|Ue&63,Se>65535&&Se<1114112&&(K=Se))}}K===null?(K=65533,ue=1):K>65535&&(K-=65536,j.push(K>>>10&1023|55296),K=56320|K&1023),j.push(K),D+=ue}return V(j)}const M=4096;function V(k){const m=k.length;if(m<=M)return String.fromCharCode.apply(String,k);let v="",j=0;for(;j<m;)v+=String.fromCharCode.apply(String,k.slice(j,j+=M));return v}function W(k,m,v){let j="";v=Math.min(k.length,v);for(let D=m;D<v;++D)j+=String.fromCharCode(k[D]&127);return j}function I(k,m,v){let j="";v=Math.min(k.length,v);for(let D=m;D<v;++D)j+=String.fromCharCode(k[D]);return j}function U(k,m,v){const j=k.length;(!m||m<0)&&(m=0),(!v||v<0||v>j)&&(v=j);let D="";for(let z=m;z<v;++z)D+=qe[k[z]];return D}function H(k,m,v){const j=k.slice(m,v);let D="";for(let z=0;z<j.length-1;z+=2)D+=String.fromCharCode(j[z]+j[z+1]*256);return D}s.prototype.slice=function(m,v){const j=this.length;m=~~m,v=v===void 0?j:~~v,m<0?(m+=j,m<0&&(m=0)):m>j&&(m=j),v<0?(v+=j,v<0&&(v=0)):v>j&&(v=j),v<m&&(v=m);const D=this.subarray(m,v);return Object.setPrototypeOf(D,s.prototype),D};function q(k,m,v){if(k%1!==0||k<0)throw new RangeError("offset is not uint");if(k+m>v)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(m,v,j){m=m>>>0,v=v>>>0,j||q(m,v,this.length);let D=this[m],z=1,K=0;for(;++K<v&&(z*=256);)D+=this[m+K]*z;return D},s.prototype.readUintBE=s.prototype.readUIntBE=function(m,v,j){m=m>>>0,v=v>>>0,j||q(m,v,this.length);let D=this[m+--v],z=1;for(;v>0&&(z*=256);)D+=this[m+--v]*z;return D},s.prototype.readUint8=s.prototype.readUInt8=function(m,v){return m=m>>>0,v||q(m,1,this.length),this[m]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(m,v){return m=m>>>0,v||q(m,2,this.length),this[m]|this[m+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(m,v){return m=m>>>0,v||q(m,2,this.length),this[m]<<8|this[m+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(m,v){return m=m>>>0,v||q(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+this[m+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(m,v){return m=m>>>0,v||q(m,4,this.length),this[m]*16777216+(this[m+1]<<16|this[m+2]<<8|this[m+3])},s.prototype.readBigUInt64LE=Ee(function(m){m=m>>>0,Ae(m,"offset");const v=this[m],j=this[m+7];(v===void 0||j===void 0)&&be(m,this.length-8);const D=v+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24,z=this[++m]+this[++m]*2**8+this[++m]*2**16+j*2**24;return BigInt(D)+(BigInt(z)<<BigInt(32))}),s.prototype.readBigUInt64BE=Ee(function(m){m=m>>>0,Ae(m,"offset");const v=this[m],j=this[m+7];(v===void 0||j===void 0)&&be(m,this.length-8);const D=v*2**24+this[++m]*2**16+this[++m]*2**8+this[++m],z=this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+j;return(BigInt(D)<<BigInt(32))+BigInt(z)}),s.prototype.readIntLE=function(m,v,j){m=m>>>0,v=v>>>0,j||q(m,v,this.length);let D=this[m],z=1,K=0;for(;++K<v&&(z*=256);)D+=this[m+K]*z;return z*=128,D>=z&&(D-=Math.pow(2,8*v)),D},s.prototype.readIntBE=function(m,v,j){m=m>>>0,v=v>>>0,j||q(m,v,this.length);let D=v,z=1,K=this[m+--D];for(;D>0&&(z*=256);)K+=this[m+--D]*z;return z*=128,K>=z&&(K-=Math.pow(2,8*v)),K},s.prototype.readInt8=function(m,v){return m=m>>>0,v||q(m,1,this.length),this[m]&128?(255-this[m]+1)*-1:this[m]},s.prototype.readInt16LE=function(m,v){m=m>>>0,v||q(m,2,this.length);const j=this[m]|this[m+1]<<8;return j&32768?j|4294901760:j},s.prototype.readInt16BE=function(m,v){m=m>>>0,v||q(m,2,this.length);const j=this[m+1]|this[m]<<8;return j&32768?j|4294901760:j},s.prototype.readInt32LE=function(m,v){return m=m>>>0,v||q(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},s.prototype.readInt32BE=function(m,v){return m=m>>>0,v||q(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},s.prototype.readBigInt64LE=Ee(function(m){m=m>>>0,Ae(m,"offset");const v=this[m],j=this[m+7];(v===void 0||j===void 0)&&be(m,this.length-8);const D=this[m+4]+this[m+5]*2**8+this[m+6]*2**16+(j<<24);return(BigInt(D)<<BigInt(32))+BigInt(v+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24)}),s.prototype.readBigInt64BE=Ee(function(m){m=m>>>0,Ae(m,"offset");const v=this[m],j=this[m+7];(v===void 0||j===void 0)&&be(m,this.length-8);const D=(v<<24)+this[++m]*2**16+this[++m]*2**8+this[++m];return(BigInt(D)<<BigInt(32))+BigInt(this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+j)}),s.prototype.readFloatLE=function(m,v){return m=m>>>0,v||q(m,4,this.length),n.read(this,m,!0,23,4)},s.prototype.readFloatBE=function(m,v){return m=m>>>0,v||q(m,4,this.length),n.read(this,m,!1,23,4)},s.prototype.readDoubleLE=function(m,v){return m=m>>>0,v||q(m,8,this.length),n.read(this,m,!0,52,8)},s.prototype.readDoubleBE=function(m,v){return m=m>>>0,v||q(m,8,this.length),n.read(this,m,!1,52,8)};function Y(k,m,v,j,D,z){if(!s.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>D||m<z)throw new RangeError('"value" argument is out of bounds');if(v+j>k.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(m,v,j,D){if(m=+m,v=v>>>0,j=j>>>0,!D){const ue=Math.pow(2,8*j)-1;Y(this,m,v,j,ue,0)}let z=1,K=0;for(this[v]=m&255;++K<j&&(z*=256);)this[v+K]=m/z&255;return v+j},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(m,v,j,D){if(m=+m,v=v>>>0,j=j>>>0,!D){const ue=Math.pow(2,8*j)-1;Y(this,m,v,j,ue,0)}let z=j-1,K=1;for(this[v+z]=m&255;--z>=0&&(K*=256);)this[v+z]=m/K&255;return v+j},s.prototype.writeUint8=s.prototype.writeUInt8=function(m,v,j){return m=+m,v=v>>>0,j||Y(this,m,v,1,255,0),this[v]=m&255,v+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(m,v,j){return m=+m,v=v>>>0,j||Y(this,m,v,2,65535,0),this[v]=m&255,this[v+1]=m>>>8,v+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(m,v,j){return m=+m,v=v>>>0,j||Y(this,m,v,2,65535,0),this[v]=m>>>8,this[v+1]=m&255,v+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(m,v,j){return m=+m,v=v>>>0,j||Y(this,m,v,4,4294967295,0),this[v+3]=m>>>24,this[v+2]=m>>>16,this[v+1]=m>>>8,this[v]=m&255,v+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(m,v,j){return m=+m,v=v>>>0,j||Y(this,m,v,4,4294967295,0),this[v]=m>>>24,this[v+1]=m>>>16,this[v+2]=m>>>8,this[v+3]=m&255,v+4};function ee(k,m,v,j,D){se(m,j,D,k,v,7);let z=Number(m&BigInt(4294967295));k[v++]=z,z=z>>8,k[v++]=z,z=z>>8,k[v++]=z,z=z>>8,k[v++]=z;let K=Number(m>>BigInt(32)&BigInt(4294967295));return k[v++]=K,K=K>>8,k[v++]=K,K=K>>8,k[v++]=K,K=K>>8,k[v++]=K,v}function re(k,m,v,j,D){se(m,j,D,k,v,7);let z=Number(m&BigInt(4294967295));k[v+7]=z,z=z>>8,k[v+6]=z,z=z>>8,k[v+5]=z,z=z>>8,k[v+4]=z;let K=Number(m>>BigInt(32)&BigInt(4294967295));return k[v+3]=K,K=K>>8,k[v+2]=K,K=K>>8,k[v+1]=K,K=K>>8,k[v]=K,v+8}s.prototype.writeBigUInt64LE=Ee(function(m,v=0){return ee(this,m,v,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Ee(function(m,v=0){return re(this,m,v,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(m,v,j,D){if(m=+m,v=v>>>0,!D){const $e=Math.pow(2,8*j-1);Y(this,m,v,j,$e-1,-$e)}let z=0,K=1,ue=0;for(this[v]=m&255;++z<j&&(K*=256);)m<0&&ue===0&&this[v+z-1]!==0&&(ue=1),this[v+z]=(m/K>>0)-ue&255;return v+j},s.prototype.writeIntBE=function(m,v,j,D){if(m=+m,v=v>>>0,!D){const $e=Math.pow(2,8*j-1);Y(this,m,v,j,$e-1,-$e)}let z=j-1,K=1,ue=0;for(this[v+z]=m&255;--z>=0&&(K*=256);)m<0&&ue===0&&this[v+z+1]!==0&&(ue=1),this[v+z]=(m/K>>0)-ue&255;return v+j},s.prototype.writeInt8=function(m,v,j){return m=+m,v=v>>>0,j||Y(this,m,v,1,127,-128),m<0&&(m=255+m+1),this[v]=m&255,v+1},s.prototype.writeInt16LE=function(m,v,j){return m=+m,v=v>>>0,j||Y(this,m,v,2,32767,-32768),this[v]=m&255,this[v+1]=m>>>8,v+2},s.prototype.writeInt16BE=function(m,v,j){return m=+m,v=v>>>0,j||Y(this,m,v,2,32767,-32768),this[v]=m>>>8,this[v+1]=m&255,v+2},s.prototype.writeInt32LE=function(m,v,j){return m=+m,v=v>>>0,j||Y(this,m,v,4,2147483647,-2147483648),this[v]=m&255,this[v+1]=m>>>8,this[v+2]=m>>>16,this[v+3]=m>>>24,v+4},s.prototype.writeInt32BE=function(m,v,j){return m=+m,v=v>>>0,j||Y(this,m,v,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[v]=m>>>24,this[v+1]=m>>>16,this[v+2]=m>>>8,this[v+3]=m&255,v+4},s.prototype.writeBigInt64LE=Ee(function(m,v=0){return ee(this,m,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Ee(function(m,v=0){return re(this,m,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ae(k,m,v,j,D,z){if(v+j>k.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function pe(k,m,v,j,D){return m=+m,v=v>>>0,D||ae(k,m,v,4),n.write(k,m,v,j,23,4),v+4}s.prototype.writeFloatLE=function(m,v,j){return pe(this,m,v,!0,j)},s.prototype.writeFloatBE=function(m,v,j){return pe(this,m,v,!1,j)};function ge(k,m,v,j,D){return m=+m,v=v>>>0,D||ae(k,m,v,8),n.write(k,m,v,j,52,8),v+8}s.prototype.writeDoubleLE=function(m,v,j){return ge(this,m,v,!0,j)},s.prototype.writeDoubleBE=function(m,v,j){return ge(this,m,v,!1,j)},s.prototype.copy=function(m,v,j,D){if(!s.isBuffer(m))throw new TypeError("argument should be a Buffer");if(j||(j=0),!D&&D!==0&&(D=this.length),v>=m.length&&(v=m.length),v||(v=0),D>0&&D<j&&(D=j),D===j||m.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("sourceEnd out of bounds");D>this.length&&(D=this.length),m.length-v<D-j&&(D=m.length-v+j);const z=D-j;return this===m&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(v,j,D):Uint8Array.prototype.set.call(m,this.subarray(j,D),v),z},s.prototype.fill=function(m,v,j,D){if(typeof m=="string"){if(typeof v=="string"?(D=v,v=0,j=this.length):typeof j=="string"&&(D=j,j=this.length),D!==void 0&&typeof D!="string")throw new TypeError("encoding must be a string");if(typeof D=="string"&&!s.isEncoding(D))throw new TypeError("Unknown encoding: "+D);if(m.length===1){const K=m.charCodeAt(0);(D==="utf8"&&K<128||D==="latin1")&&(m=K)}}else typeof m=="number"?m=m&255:typeof m=="boolean"&&(m=Number(m));if(v<0||this.length<v||this.length<j)throw new RangeError("Out of range index");if(j<=v)return this;v=v>>>0,j=j===void 0?this.length:j>>>0,m||(m=0);let z;if(typeof m=="number")for(z=v;z<j;++z)this[z]=m;else{const K=s.isBuffer(m)?m:s.from(m,D),ue=K.length;if(ue===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(z=0;z<j-v;++z)this[z+v]=K[z%ue]}return this};const ce={};function ye(k,m,v){ce[k]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:m.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${k}]`,this.stack,delete this.name}get code(){return k}set code(D){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:D,writable:!0})}toString(){return`${this.name} [${k}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(k){return k?`${k} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(k,m){return`The "${k}" argument must be of type number. Received type ${typeof m}`},TypeError),ye("ERR_OUT_OF_RANGE",function(k,m,v){let j=`The value of "${k}" is out of range.`,D=v;return Number.isInteger(v)&&Math.abs(v)>2**32?D=Ze(String(v)):typeof v=="bigint"&&(D=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(D=Ze(D)),D+="n"),j+=` It must be ${m}. Received ${D}`,j},RangeError);function Ze(k){let m="",v=k.length;const j=k[0]==="-"?1:0;for(;v>=j+4;v-=3)m=`_${k.slice(v-3,v)}${m}`;return`${k.slice(0,v)}${m}`}function At(k,m,v){Ae(m,"offset"),(k[m]===void 0||k[m+v]===void 0)&&be(m,k.length-(v+1))}function se(k,m,v,j,D,z){if(k>v||k<m){const K=typeof m=="bigint"?"n":"";let ue;throw z>3?m===0||m===BigInt(0)?ue=`>= 0${K} and < 2${K} ** ${(z+1)*8}${K}`:ue=`>= -(2${K} ** ${(z+1)*8-1}${K}) and < 2 ** ${(z+1)*8-1}${K}`:ue=`>= ${m}${K} and <= ${v}${K}`,new ce.ERR_OUT_OF_RANGE("value",ue,k)}At(j,D,z)}function Ae(k,m){if(typeof k!="number")throw new ce.ERR_INVALID_ARG_TYPE(m,"number",k)}function be(k,m,v){throw Math.floor(k)!==k?(Ae(k,v),new ce.ERR_OUT_OF_RANGE(v||"offset","an integer",k)):m<0?new ce.ERR_BUFFER_OUT_OF_BOUNDS:new ce.ERR_OUT_OF_RANGE(v||"offset",`>= ${v?1:0} and <= ${m}`,k)}const ke=/[^+/0-9A-Za-z-_]/g;function Qt(k){if(k=k.split("=")[0],k=k.trim().replace(ke,""),k.length<2)return"";for(;k.length%4!==0;)k=k+"=";return k}function Bt(k,m){m=m||1/0;let v;const j=k.length;let D=null;const z=[];for(let K=0;K<j;++K){if(v=k.charCodeAt(K),v>55295&&v<57344){if(!D){if(v>56319){(m-=3)>-1&&z.push(239,191,189);continue}else if(K+1===j){(m-=3)>-1&&z.push(239,191,189);continue}D=v;continue}if(v<56320){(m-=3)>-1&&z.push(239,191,189),D=v;continue}v=(D-55296<<10|v-56320)+65536}else D&&(m-=3)>-1&&z.push(239,191,189);if(D=null,v<128){if((m-=1)<0)break;z.push(v)}else if(v<2048){if((m-=2)<0)break;z.push(v>>6|192,v&63|128)}else if(v<65536){if((m-=3)<0)break;z.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((m-=4)<0)break;z.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return z}function oe(k){const m=[];for(let v=0;v<k.length;++v)m.push(k.charCodeAt(v)&255);return m}function yt(k,m){let v,j,D;const z=[];for(let K=0;K<k.length&&!((m-=2)<0);++K)v=k.charCodeAt(K),j=v>>8,D=v%256,z.push(D),z.push(j);return z}function wt(k){return t.toByteArray(Qt(k))}function G(k,m,v,j){let D;for(D=0;D<j&&!(D+v>=m.length||D>=k.length);++D)m[D+v]=k[D];return D}function Q(k,m){return k instanceof m||k!=null&&k.constructor!=null&&k.constructor.name!=null&&k.constructor.name===m.name}function he(k){return k!==k}const qe=function(){const k="0123456789abcdef",m=new Array(256);for(let v=0;v<16;++v){const j=v*16;for(let D=0;D<16;++D)m[j+D]=k[v]+k[D]}return m}();function Ee(k){return typeof BigInt>"u"?rt:k}function rt(){throw new Error("BigInt not supported")}})(hS);globalThis.Buffer=hS.Buffer;kd.createRoot(document.getElementById("root")).render(l.jsx(F.StrictMode,{children:l.jsx(CO,{})}));
